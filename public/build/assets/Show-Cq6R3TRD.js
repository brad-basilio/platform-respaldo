import{c as is,r as Le,j as s,b as Me,L as ns}from"./app-NrNIKRGF.js";import{t as i,A as cs}from"./AuthenticatedLayout-BWQ4epgC.js";import{B as r}from"./button-B4lFAjRl.js";import{B as re}from"./badge-Coos99GN.js";import{a as se,C as te,c as le,d as ae}from"./card-Dw_BSVvU.js";import{a as Ve,b as Oe,D as Ye,c as Je,d as Ke,e as Qe}from"./dialog-BM5mNw8p.js";import{I as We}from"./input-DSnJltG8.js";import{L as Xe}from"./label-CS4CVQXP.js";import{P as os}from"./play-Buh-DuoO.js";import{C as ds}from"./circle-check-big-BQYtRkZy.js";import{F as Ze}from"./film-8Q04pvuc.js";import{V as es}from"./video-DQfmV5_w.js";import{c as ss}from"./createLucideIcon-BBzJVuw5.js";import{U as ms}from"./user-plus-BPkxER6N.js";import{U as Te}from"./users-BC7CTX-D.js";import{A as hs}from"./arrow-left-D6MlXFK_.js";import{C as xs}from"./calendar-BUzaat6I.js";import{C as us}from"./clock-DZCqlfmA.js";/* empty css            */import"./dropdown-menu-Cv5dCpux.js";import"./index-CcZ2iD88.js";import"./index-1EQp5QUa.js";import"./index-DJKh4HDi.js";import"./file-text-DmMTnfai.js";import"./triangle-alert-CC45l-EA.js";import"./clsx-B-dksMZM.js";import"./index-Duye212T.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ps=ss("ExternalLink",fs);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],gs=ss("UserMinus",js),tt=a=>{const e=is.c(149),{scheduledClass:t}=a,[Ae,ie]=Le.useState(!1),[Ge,ne]=Le.useState(!1),[n,ts]=Le.useState(t.recording_url||""),[c,qe]=Le.useState(""),ls=_s,as=vs;let ce;e[0]!==t.id?(ce=l=>{Me.put(`/admin/scheduled-classes/${t.id}/status`,{status:l},{onSuccess:ys,onError:bs})},e[0]=t.id,e[1]=ce):ce=e[1];const o=ce;let oe;e[2]!==n||e[3]!==t.id?(oe=()=>{n&&Me.post(`/admin/scheduled-classes/${t.id}/recording`,{recording_url:n},{onSuccess:()=>{i.success("Grabación guardada"),ie(!1)},onError:Ns})},e[2]=n,e[3]=t.id,e[4]=oe):oe=e[4];const Re=oe;let de;e[5]!==t.id||e[6]!==c?(de=()=>{c&&Me.post(`/admin/scheduled-classes/${t.id}/enroll`,{student_id:c},{onSuccess:()=>{i.success("Estudiante inscrito"),ne(!1),qe("")},onError:ws})},e[5]=t.id,e[6]=c,e[7]=de):de=e[7];const $e=de;let me;e[8]!==t.id?(me=l=>{confirm("¿Estás seguro de remover a este estudiante?")&&Me.delete(`/admin/scheduled-classes/${t.id}/unenroll/${l}`,{onSuccess:Cs,onError:Ss})},e[8]=t.id,e[9]=me):me=e[9];const Be=me,rs=Es,he=t.recording_url||t.template.intro_video_url,xe=!!t.recording_url;let ue;e[10]===Symbol.for("react.memo_cache_sentinel")?(ue=s.jsx(ns,{href:"/admin/scheduled-classes",children:s.jsx(r,{variant:"ghost",size:"icon",children:s.jsx(hs,{className:"h-5 w-5"})})}),e[10]=ue):ue=e[10];const ze=t.template.academic_level?.color||"#3B82F6";let d;e[11]!==ze?(d={backgroundColor:ze},e[11]=ze,e[12]=d):d=e[12];let fe;e[13]===Symbol.for("react.memo_cache_sentinel")?(fe=s.jsx(xs,{className:"w-6 h-6 text-white"}),e[13]=fe):fe=e[13];let m;e[14]!==d?(m=s.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center",style:d,children:fe}),e[14]=d,e[15]=m):m=e[15];let h;e[16]!==t.template.title?(h=s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:t.template.title}),e[16]=t.template.title,e[17]=h):h=e[17];let x;e[18]!==t.template.academic_level.name?(x=s.jsx(re,{variant:"outline",children:t.template.academic_level.name}),e[18]=t.template.academic_level.name,e[19]=x):x=e[19];let u;e[20]!==t.status?(u=ls(t.status),e[20]=t.status,e[21]=u):u=e[21];let f;e[22]!==x||e[23]!==u?(f=s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[x,u]}),e[22]=x,e[23]=u,e[24]=f):f=e[24];let p;e[25]!==h||e[26]!==f?(p=s.jsxs("div",{children:[h,f]}),e[25]=h,e[26]=f,e[27]=p):p=e[27];let j;e[28]!==p||e[29]!==m?(j=s.jsxs("div",{className:"flex items-center gap-4",children:[ue,s.jsx("div",{children:s.jsxs("div",{className:"flex items-center gap-3",children:[m,p]})})]}),e[28]=p,e[29]=m,e[30]=j):j=e[30];let g;e[31]!==o||e[32]!==t.status?(g=t.status==="scheduled"&&s.jsxs(r,{variant:"outline",onClick:()=>o("in_progress"),children:[s.jsx(os,{className:"w-4 h-4 mr-2"}),"Iniciar Clase"]}),e[31]=o,e[32]=t.status,e[33]=g):g=e[33];let _;e[34]!==o||e[35]!==t.status?(_=t.status==="in_progress"&&s.jsxs(r,{onClick:()=>o("completed"),children:[s.jsx(ds,{className:"w-4 h-4 mr-2"}),"Marcar Completada"]}),e[34]=o,e[35]=t.status,e[36]=_):_=e[36];let v;e[37]!==t.recording_url||e[38]!==t.status?(v=t.status==="completed"&&s.jsxs(r,{variant:"outline",onClick:()=>ie(!0),children:[s.jsx(Ze,{className:"w-4 h-4 mr-2"}),t.recording_url?"Cambiar Grabación":"Agregar Grabación"]}),e[37]=t.recording_url,e[38]=t.status,e[39]=v):v=e[39];let y;e[40]!==g||e[41]!==_||e[42]!==v?(y=s.jsxs("div",{className:"flex gap-2",children:[g,_,v]}),e[40]=g,e[41]=_,e[42]=v,e[43]=y):y=e[43];let b;e[44]!==j||e[45]!==y?(b=s.jsxs("div",{className:"flex items-start justify-between mb-6",children:[j,y]}),e[44]=j,e[45]=y,e[46]=b):b=e[46];let pe;e[47]===Symbol.for("react.memo_cache_sentinel")?(pe=s.jsx(es,{className:"h-5 w-5"}),e[47]=pe):pe=e[47];const Fe=xe?"Grabación de la Clase":"Video de Introducción";let N;e[48]!==Fe?(N=s.jsxs(ae,{className:"flex items-center gap-2",children:[pe,Fe]}),e[48]=Fe,e[49]=N):N=e[49];let w;e[50]!==xe?(w=xe&&s.jsxs(re,{variant:"default",className:"w-fit",children:[s.jsx(Ze,{className:"w-3 h-3 mr-1"}),"Grabación de sesión"]}),e[50]=xe,e[51]=w):w=e[51];let C;e[52]!==N||e[53]!==w?(C=s.jsxs(le,{children:[N,w]}),e[52]=N,e[53]=w,e[54]=C):C=e[54];let S;e[55]!==he?(S=s.jsx(se,{children:he?s.jsx("div",{className:"aspect-video rounded-lg overflow-hidden bg-black",children:s.jsx("iframe",{src:rs(he),className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):s.jsx("div",{className:"aspect-video rounded-lg bg-gray-100 flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-gray-500",children:[s.jsx(es,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"No hay video disponible"})]})})}),e[55]=he,e[56]=S):S=e[56];let E;e[57]!==C||e[58]!==S?(E=s.jsxs(te,{children:[C,S]}),e[57]=C,e[58]=S,e[59]=E):E=e[59];let k;e[60]!==t.template.description?(k=t.template.description&&s.jsxs(te,{children:[s.jsx(le,{children:s.jsx(ae,{children:"Descripción"})}),s.jsx(se,{children:s.jsx("p",{className:"text-gray-700",children:t.template.description})})]}),e[60]=t.template.description,e[61]=k):k=e[61];let D;e[62]!==t.template.content?(D=t.template.content&&s.jsxs(te,{children:[s.jsx(le,{children:s.jsx(ae,{children:"Contenido de la Clase"})}),s.jsx(se,{children:s.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:t.template.content}})})]}),e[62]=t.template.content,e[63]=D):D=e[63];let I;e[64]!==E||e[65]!==k||e[66]!==D?(I=s.jsxs("div",{className:"col-span-2 space-y-6",children:[E,k,D]}),e[64]=E,e[65]=k,e[66]=D,e[67]=I):I=e[67];let je;e[68]===Symbol.for("react.memo_cache_sentinel")?(je=s.jsx(le,{children:s.jsx(ae,{children:"Información"})}),e[68]=je):je=e[68];let ge,_e;e[69]===Symbol.for("react.memo_cache_sentinel")?(ge=s.jsx(us,{className:"w-5 h-5 text-gray-400"}),_e=s.jsx("p",{className:"text-sm font-medium",children:"Fecha y Hora"}),e[69]=ge,e[70]=_e):(ge=e[69],_e=e[70]);let U;e[71]!==t.scheduled_at?(U=as(t.scheduled_at),e[71]=t.scheduled_at,e[72]=U):U=e[72];let L;e[73]!==U?(L=s.jsxs("div",{className:"flex items-center gap-3",children:[ge,s.jsxs("div",{children:[_e,s.jsx("p",{className:"text-sm text-gray-600",children:U})]})]}),e[73]=U,e[74]=L):L=e[74];let ve,ye;e[75]===Symbol.for("react.memo_cache_sentinel")?(ve=s.jsx(Te,{className:"w-5 h-5 text-gray-400"}),ye=s.jsx("p",{className:"text-sm font-medium",children:"Profesor"}),e[75]=ve,e[76]=ye):(ve=e[75],ye=e[76]);const He=t.teacher?.name||"Sin asignar";let M;e[77]!==He?(M=s.jsxs("div",{className:"flex items-center gap-3",children:[ve,s.jsxs("div",{children:[ye,s.jsx("p",{className:"text-sm text-gray-600",children:He})]})]}),e[77]=He,e[78]=M):M=e[78];let A;e[79]!==t.meet_url?(A=t.meet_url&&s.jsx("div",{children:s.jsxs("a",{href:t.meet_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-blue-600 hover:text-blue-800 text-sm",children:[s.jsx(ps,{className:"w-4 h-4"}),"Abrir enlace de Meet"]})}),e[79]=t.meet_url,e[80]=A):A=e[80];let G;e[81]!==t.notes?(G=t.notes&&s.jsxs("div",{className:"pt-3 border-t",children:[s.jsx("p",{className:"text-sm font-medium mb-1",children:"Notas"}),s.jsx("p",{className:"text-sm text-gray-600",children:t.notes})]}),e[81]=t.notes,e[82]=G):G=e[82];let R;e[83]!==L||e[84]!==M||e[85]!==A||e[86]!==G?(R=s.jsxs(te,{children:[je,s.jsxs(se,{className:"space-y-4",children:[L,M,A,G]})]}),e[83]=L,e[84]=M,e[85]=A,e[86]=G,e[87]=R):R=e[87];let be;e[88]===Symbol.for("react.memo_cache_sentinel")?(be=s.jsx(Te,{className:"h-5 w-5"}),e[88]=be):be=e[88];let $,B;e[89]!==t.enrollments.length||e[90]!==t.max_students?($=s.jsxs(ae,{className:"flex items-center gap-2",children:[be,"Estudiantes (",t.enrollments.length,"/",t.max_students,")"]}),B=t.enrollments.length<t.max_students&&s.jsx(r,{size:"sm",variant:"outline",onClick:()=>ne(!0),children:s.jsx(ms,{className:"w-4 h-4"})}),e[89]=t.enrollments.length,e[90]=t.max_students,e[91]=$,e[92]=B):($=e[91],B=e[92]);let z;e[93]!==$||e[94]!==B?(z=s.jsx(le,{children:s.jsxs("div",{className:"flex justify-between items-center",children:[$,B]})}),e[93]=$,e[94]=B,e[95]=z):z=e[95];let F;e[96]!==Be||e[97]!==t.enrollments?(F=s.jsx(se,{children:t.enrollments.length===0?s.jsxs("div",{className:"text-center py-6 text-gray-500",children:[s.jsx(Te,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{className:"text-sm",children:"No hay estudiantes inscritos"})]}):s.jsx("div",{className:"space-y-2",children:t.enrollments.map(l=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsxs("p",{className:"text-sm font-medium truncate",children:[l.student.first_name," ",l.student.last_name]}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.attended&&s.jsx(re,{variant:"outline",className:"text-xs text-green-600",children:"Asistió"}),l.exam_completed&&s.jsx(re,{variant:"outline",className:"text-xs text-blue-600",children:"Examen ✓"})]})]}),s.jsx(r,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-600",onClick:()=>Be(l.student.id),children:s.jsx(gs,{className:"h-4 w-4"})})]},l.id))})}),e[96]=Be,e[97]=t.enrollments,e[98]=F):F=e[98];let H;e[99]!==z||e[100]!==F?(H=s.jsxs(te,{children:[z,F]}),e[99]=z,e[100]=F,e[101]=H):H=e[101];let P;e[102]!==t.template.resources?(P=t.template.resources.length>0&&s.jsxs(te,{children:[s.jsx(le,{children:s.jsx(ae,{children:"Recursos"})}),s.jsx(se,{children:s.jsx("div",{className:"space-y-2",children:t.template.resources.map(ks)})})]}),e[102]=t.template.resources,e[103]=P):P=e[103];let T;e[104]!==R||e[105]!==H||e[106]!==P?(T=s.jsxs("div",{className:"space-y-6",children:[R,H,P]}),e[104]=R,e[105]=H,e[106]=P,e[107]=T):T=e[107];let q;e[108]!==I||e[109]!==T?(q=s.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[I,T]}),e[108]=I,e[109]=T,e[110]=q):q=e[110];const Pe=t.recording_url?"Cambiar Grabación":"Agregar Grabación";let V;e[111]!==Pe?(V=s.jsx(Ve,{children:Pe}),e[111]=Pe,e[112]=V):V=e[112];let Ne;e[113]===Symbol.for("react.memo_cache_sentinel")?(Ne=s.jsx(Oe,{children:"La grabación reemplazará el video de introducción para los estudiantes"}),e[113]=Ne):Ne=e[113];let O;e[114]!==V?(O=s.jsxs(Ye,{children:[V,Ne]}),e[114]=V,e[115]=O):O=e[115];let we;e[116]===Symbol.for("react.memo_cache_sentinel")?(we=s.jsx(Xe,{children:"URL de la Grabación"}),e[116]=we):we=e[116];let Ce;e[117]===Symbol.for("react.memo_cache_sentinel")?(Ce=l=>ts(l.target.value),e[117]=Ce):Ce=e[117];let Y;e[118]!==n?(Y=s.jsx("div",{className:"space-y-4 py-4",children:s.jsxs("div",{className:"space-y-2",children:[we,s.jsx(We,{type:"url",value:n,onChange:Ce,placeholder:"https://drive.google.com/..."})]})}),e[118]=n,e[119]=Y):Y=e[119];let Se;e[120]===Symbol.for("react.memo_cache_sentinel")?(Se=s.jsx(r,{variant:"outline",onClick:()=>ie(!1),children:"Cancelar"}),e[120]=Se):Se=e[120];let J;e[121]!==Re?(J=s.jsxs(Je,{children:[Se,s.jsx(r,{onClick:Re,children:"Guardar"})]}),e[121]=Re,e[122]=J):J=e[122];let K;e[123]!==O||e[124]!==Y||e[125]!==J?(K=s.jsxs(Ke,{children:[O,Y,J]}),e[123]=O,e[124]=Y,e[125]=J,e[126]=K):K=e[126];let Q;e[127]!==Ae||e[128]!==K?(Q=s.jsx(Qe,{open:Ae,onOpenChange:ie,children:K}),e[127]=Ae,e[128]=K,e[129]=Q):Q=e[129];let Ee;e[130]===Symbol.for("react.memo_cache_sentinel")?(Ee=s.jsxs(Ye,{children:[s.jsx(Ve,{children:"Inscribir Estudiante"}),s.jsx(Oe,{children:"Ingresa el ID del estudiante a inscribir"})]}),e[130]=Ee):Ee=e[130];let ke;e[131]===Symbol.for("react.memo_cache_sentinel")?(ke=s.jsx(Xe,{children:"ID del Estudiante"}),e[131]=ke):ke=e[131];let De;e[132]===Symbol.for("react.memo_cache_sentinel")?(De=l=>qe(l.target.value),e[132]=De):De=e[132];let W;e[133]!==c?(W=s.jsx("div",{className:"space-y-4 py-4",children:s.jsxs("div",{className:"space-y-2",children:[ke,s.jsx(We,{type:"number",value:c,onChange:De,placeholder:"ID del estudiante"})]})}),e[133]=c,e[134]=W):W=e[134];let Ie;e[135]===Symbol.for("react.memo_cache_sentinel")?(Ie=s.jsx(r,{variant:"outline",onClick:()=>ne(!1),children:"Cancelar"}),e[135]=Ie):Ie=e[135];let X;e[136]!==$e?(X=s.jsxs(Je,{children:[Ie,s.jsx(r,{onClick:$e,children:"Inscribir"})]}),e[136]=$e,e[137]=X):X=e[137];let Z;e[138]!==W||e[139]!==X?(Z=s.jsxs(Ke,{children:[Ee,W,X]}),e[138]=W,e[139]=X,e[140]=Z):Z=e[140];let ee;e[141]!==Ge||e[142]!==Z?(ee=s.jsx(Qe,{open:Ge,onOpenChange:ne,children:Z}),e[141]=Ge,e[142]=Z,e[143]=ee):ee=e[143];let Ue;return e[144]!==b||e[145]!==q||e[146]!==Q||e[147]!==ee?(Ue=s.jsx(cs,{children:s.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[b,q,Q,ee]})}),e[144]=b,e[145]=q,e[146]=Q,e[147]=ee,e[148]=Ue):Ue=e[148],Ue};function _s(a){const e={scheduled:{variant:"outline",label:"Programada"},in_progress:{variant:"default",label:"En curso"},completed:{variant:"secondary",label:"Completada"},cancelled:{variant:"destructive",label:"Cancelada"}},t=e[a]||e.scheduled;return s.jsx(re,{variant:t.variant,className:"text-sm",children:t.label})}function vs(a){return new Date(a).toLocaleDateString("es-PE",{weekday:"long",day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}function ys(){i.success("Estado actualizado")}function bs(){i.error("Error al actualizar estado")}function Ns(){i.error("Error al guardar grabación")}function ws(){i.error("Error al inscribir estudiante")}function Cs(){i.success("Estudiante removido")}function Ss(){i.error("Error al remover estudiante")}function Es(a){const e=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,t=a.match(e);return t&&t[2].length===11?`https://www.youtube.com/embed/${t[2]}`:a}function ks(a){return s.jsxs("a",{href:`/storage/${a.file_path}`,download:!0,className:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg hover:bg-gray-100 transition",children:[s.jsx("div",{className:"w-8 h-8 rounded bg-blue-100 flex items-center justify-center",children:s.jsx("span",{className:"text-xs font-medium text-blue-600",children:a.file_type.toUpperCase()})}),s.jsx("span",{className:"text-sm truncate flex-1",children:a.name})]},a.id)}export{tt as default};
