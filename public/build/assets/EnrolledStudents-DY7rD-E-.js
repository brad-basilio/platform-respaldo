import{r as u,j as t,a as ce,c as ye}from"./app-CpQLX2Tt.js";import{A as ve,S as Y}from"./AuthenticatedLayout-BQCkwIkJ.js";import{A as Ne,t as we,M as Ce,a as Se}from"./index.esm-CJIHVMmt.js";import{I as ke}from"./input-C9ycVc1H.js";/* empty css                       */import{U as _e}from"./user-check-2vUv_tMD.js";import{U as Be}from"./user-x-Fx5vtom3.js";import{C as he}from"./circle-check-big-zDu-e3Vc.js";import{C as Ve}from"./clock-OFYZuWWA.js";import{E as De}from"./eye-CVUD1aT3.js";import{C as fe}from"./circle-x-BqaeHNZj.js";import{S as Ee}from"./search-8ABMKOMg.js";import{C as Te}from"./circle-alert-B0ye7WTg.js";import{U as be}from"./users-CMPHnXK0.js";import{P as Ae}from"./phone-BWjI-NAT.js";import{B as Re}from"./book-open-ByLVhNm0.js";import{G as Me}from"./graduation-cap-B1pjFD9V.js";import{C as Fe}from"./calendar-BiCu_Y2T.js";/* empty css            */import"./button-whAyKZBZ.js";import"./clsx-B-dksMZM.js";import"./dropdown-menu-ClHMaf82.js";import"./createLucideIcon-BWHyO0Mb.js";import"./index-BkkcWz2E.js";import"./index-BPa9kAg6.js";import"./index-CvwlXeqU.js";import"./badge-D7G23yc_.js";Ce.registerModules([Se]);const Pe=de=>{const e=ye.c(109),{student:l,onClose:o,groups:B}=de;let w;e[0]!==B?(w=pe=>{if(!pe)return"Sin asignar";const ge=B.find(je=>je.id===pe);return ge?ge.name:"Grupo desconocido"},e[0]=B,e[1]=w):w=e[1];const K=w;let V;e[2]===Symbol.for("react.memo_cache_sentinel")?(V=t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-white",children:"Detalles del Alumno"}),t.jsx("p",{className:"text-blue-100 text-sm",children:"Información completa del estudiante matriculado"})]}),e[2]=V):V=e[2];let C;e[3]===Symbol.for("react.memo_cache_sentinel")?(C=t.jsx(fe,{className:"h-6 w-6"}),e[3]=C):C=e[3];let h;e[4]!==o?(h=t.jsxs("div",{className:"bg-gradient-to-r from-[#073372] to-[#17BC91] px-8 py-6 flex items-center justify-between",children:[V,t.jsx("button",{onClick:o,className:"text-white hover:bg-white/20 rounded-full p-2 transition-colors",children:C})]}),e[4]=o,e[5]=h):h=e[5];let S;e[6]===Symbol.for("react.memo_cache_sentinel")?(S=t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[t.jsx(be,{className:"h-5 w-5 mr-2 text-blue-600"}),"Información Personal"]}),e[6]=S):S=e[6];let m;e[7]===Symbol.for("react.memo_cache_sentinel")?(m=t.jsx("label",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Nombre Completo"}),e[7]=m):m=e[7];let f;e[8]!==l.name?(f=t.jsxs("div",{children:[m,t.jsx("p",{className:"text-gray-900 mt-1",children:l.name})]}),e[8]=l.name,e[9]=f):f=e[9];let D;e[10]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsx("label",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Documento"}),e[10]=D):D=e[10];let p;e[11]!==l.documentNumber||e[12]!==l.documentType?(p=t.jsxs("div",{children:[D,t.jsxs("p",{className:"text-gray-900 mt-1",children:[l.documentType,": ",l.documentNumber]})]}),e[11]=l.documentNumber,e[12]=l.documentType,e[13]=p):p=e[13];let x;e[14]===Symbol.for("react.memo_cache_sentinel")?(x=t.jsx("label",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"F. Nacimiento"}),e[14]=x):x=e[14];let g;e[15]!==l.birthDate?(g=t.jsxs("div",{children:[x,t.jsx("p",{className:"text-gray-900 mt-1",children:l.birthDate})]}),e[15]=l.birthDate,e[16]=g):g=e[16];let n;e[17]!==g||e[18]!==p?(n=t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p,g]}),e[17]=g,e[18]=p,e[19]=n):n=e[19];let c;e[20]===Symbol.for("react.memo_cache_sentinel")?(c=t.jsx("label",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Género"}),e[20]=c):c=e[20];let b;e[21]!==l.gender?(b=t.jsxs("div",{children:[c,t.jsx("p",{className:"text-gray-900 mt-1",children:l.gender})]}),e[21]=l.gender,e[22]=b):b=e[22];let E;e[23]===Symbol.for("react.memo_cache_sentinel")?(E=t.jsx("label",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Nivel Educativo"}),e[23]=E):E=e[23];let j;e[24]!==l.educationLevel?(j=t.jsxs("div",{children:[E,t.jsx("p",{className:"text-gray-900 mt-1",children:l.educationLevel})]}),e[24]=l.educationLevel,e[25]=j):j=e[25];let y;e[26]!==b||e[27]!==j?(y=t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[b,j]}),e[26]=b,e[27]=j,e[28]=y):y=e[28];let v;e[29]!==n||e[30]!==y||e[31]!==f?(v=t.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-200",children:[S,t.jsxs("div",{className:"space-y-4",children:[f,n,y]})]}),e[29]=n,e[30]=y,e[31]=f,e[32]=v):v=e[32];let k;e[33]===Symbol.for("react.memo_cache_sentinel")?(k=t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[t.jsx(Ae,{className:"h-5 w-5 mr-2 text-green-600"}),"Información de Contacto"]}),e[33]=k):k=e[33];let T;e[34]===Symbol.for("react.memo_cache_sentinel")?(T=t.jsx("label",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Email"}),e[34]=T):T=e[34];let N;e[35]!==l.email?(N=t.jsxs("div",{children:[T,t.jsx("p",{className:"text-gray-900 mt-1",children:l.email})]}),e[35]=l.email,e[36]=N):N=e[36];let A;e[37]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsx("label",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Teléfono"}),e[37]=A):A=e[37];let s;e[38]!==l.phoneNumber?(s=t.jsxs("div",{children:[A,t.jsx("p",{className:"text-gray-900 mt-1",children:l.phoneNumber})]}),e[38]=l.phoneNumber,e[39]=s):s=e[39];let r;e[40]!==N||e[41]!==s?(r=t.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-200",children:[k,t.jsxs("div",{className:"space-y-4",children:[N,s]})]}),e[40]=N,e[41]=s,e[42]=r):r=e[42];let a;e[43]===Symbol.for("react.memo_cache_sentinel")?(a=t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[t.jsx(Re,{className:"h-5 w-5 mr-2 text-purple-600"}),"Información Académica"]}),e[43]=a):a=e[43];let i;e[44]===Symbol.for("react.memo_cache_sentinel")?(i=t.jsx("label",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Código"}),e[44]=i):i=e[44];let d;e[45]!==l.enrollmentCode?(d=t.jsxs("div",{children:[i,t.jsx("p",{className:"text-gray-900 mt-1 font-mono",children:l.enrollmentCode})]}),e[45]=l.enrollmentCode,e[46]=d):d=e[46];let _;e[47]===Symbol.for("react.memo_cache_sentinel")?(_=t.jsx("label",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Grupo"}),e[47]=_):_=e[47];let R;e[48]!==K||e[49]!==l.assignedGroupId?(R=K(l.assignedGroupId),e[48]=K,e[49]=l.assignedGroupId,e[50]=R):R=e[50];let M;e[51]!==R?(M=t.jsxs("div",{children:[_,t.jsx("p",{className:"text-gray-900 mt-1",children:R})]}),e[51]=R,e[52]=M):M=e[52];let F;e[53]!==d||e[54]!==M?(F=t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d,M]}),e[53]=d,e[54]=M,e[55]=F):F=e[55];let Z;e[56]===Symbol.for("react.memo_cache_sentinel")?(Z=t.jsx("label",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Plan"}),e[56]=Z):Z=e[56];let P;e[57]!==l.contractedPlan?(P=t.jsxs("div",{children:[Z,t.jsx("p",{className:"text-gray-900 mt-1",children:l.contractedPlan})]}),e[57]=l.contractedPlan,e[58]=P):P=e[58];let ee;e[59]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx("label",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Nivel"}),e[59]=ee):ee=e[59];const me=l.level==="basic"?"Básico":l.level==="intermediate"?"Intermedio":"Avanzado";let $;e[60]!==me?($=t.jsxs("div",{children:[ee,t.jsx("p",{className:"text-gray-900 mt-1",children:me})]}),e[60]=me,e[61]=$):$=e[61];let te;e[62]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx("label",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Tipo"}),e[62]=te):te=e[62];const xe=l.classType==="theoretical"?"Teórico":"Práctico";let z;e[63]!==xe?(z=t.jsxs("div",{children:[te,t.jsx("p",{className:"text-gray-900 mt-1",children:xe})]}),e[63]=xe,e[64]=z):z=e[64];let L;e[65]!==$||e[66]!==z?(L=t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[$,z]}),e[65]=$,e[66]=z,e[67]=L):L=e[67];let G;e[68]!==F||e[69]!==P||e[70]!==L?(G=t.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-200",children:[a,t.jsxs("div",{className:"space-y-4",children:[F,P,L]})]}),e[68]=F,e[69]=P,e[70]=L,e[71]=G):G=e[71];let se;e[72]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[t.jsx(Me,{className:"h-5 w-5 mr-2 text-orange-600"}),"Examen de Categorización"]}),e[72]=se):se=e[72];let re;e[73]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsx("label",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"¿Realizó examen?"}),e[73]=re):re=e[73];const ue=l.hasPlacementTest?"Sí":"No";let I;e[74]!==ue?(I=t.jsxs("div",{children:[re,t.jsx("p",{className:"text-gray-900 mt-1",children:ue})]}),e[74]=ue,e[75]=I):I=e[75];let q;e[76]!==l.hasPlacementTest||e[77]!==l.testDate||e[78]!==l.testScore?(q=l.hasPlacementTest&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Fecha"}),t.jsx("p",{className:"text-gray-900 mt-1",children:l.testDate})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Puntaje"}),t.jsx("p",{className:"text-gray-900 mt-1 font-semibold",children:l.testScore})]})]}),e[76]=l.hasPlacementTest,e[77]=l.testDate,e[78]=l.testScore,e[79]=q):q=e[79];let U;e[80]!==I||e[81]!==q?(U=t.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-200",children:[se,t.jsxs("div",{className:"space-y-4",children:[I,q]})]}),e[80]=I,e[81]=q,e[82]=U):U=e[82];let le;e[83]===Symbol.for("react.memo_cache_sentinel")?(le=t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[t.jsx(Fe,{className:"h-5 w-5 mr-2 text-indigo-600"}),"Fechas Importantes"]}),e[83]=le):le=e[83];let ae;e[84]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx("label",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Registro"}),e[84]=ae):ae=e[84];let W;e[85]!==l.registrationDate?(W=t.jsxs("div",{children:[ae,t.jsx("p",{className:"text-gray-900 mt-1",children:l.registrationDate})]}),e[85]=l.registrationDate,e[86]=W):W=e[86];let ie;e[87]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx("label",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Pago"}),e[87]=ie):ie=e[87];let H;e[88]!==l.paymentDate?(H=t.jsxs("div",{children:[ie,t.jsx("p",{className:"text-gray-900 mt-1",children:l.paymentDate})]}),e[88]=l.paymentDate,e[89]=H):H=e[89];let ne;e[90]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsx("label",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Matrícula"}),e[90]=ne):ne=e[90];let O;e[91]!==l.enrollmentDate?(O=t.jsxs("div",{children:[ne,t.jsx("p",{className:"text-gray-900 mt-1",children:l.enrollmentDate})]}),e[91]=l.enrollmentDate,e[92]=O):O=e[92];let Q;e[93]!==W||e[94]!==H||e[95]!==O?(Q=t.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-200 md:col-span-2",children:[le,t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[W,H,O]})]}),e[93]=W,e[94]=H,e[95]=O,e[96]=Q):Q=e[96];let X;e[97]!==v||e[98]!==r||e[99]!==G||e[100]!==U||e[101]!==Q?(X=t.jsx("div",{className:"p-8 overflow-y-auto max-h-[calc(90vh-200px)]",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[v,r,G,U,Q]})}),e[97]=v,e[98]=r,e[99]=G,e[100]=U,e[101]=Q,e[102]=X):X=e[102];let J;e[103]!==o?(J=t.jsx("div",{className:"bg-gray-50 px-8 py-4 border-t border-gray-200 flex justify-end",children:t.jsx("button",{onClick:o,className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-2.5 rounded-xl font-medium transition-colors",children:"Cerrar"})}),e[103]=o,e[104]=J):J=e[104];let oe;return e[105]!==h||e[106]!==X||e[107]!==J?(oe=t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-3xl max-w-5xl w-full max-h-[90vh] overflow-hidden shadow-2xl",children:[h,X,J]})}),e[105]=h,e[106]=X,e[107]=J,e[108]=oe):oe=e[108],oe},mt=({students:de=[],groups:e=[],userRole:l=""})=>{const[o,B]=u.useState(de??[]),[w,K]=u.useState(null),[V,C]=u.useState(!1),[h,S]=u.useState(""),[m,f]=u.useState("verified"),[D,p]=u.useState(!1),[x,g]=u.useState(null),[n,c]=u.useState([]),b=()=>{const s=document.createElement("input");s.type="file",s.accept=".pdf,.doc,.docx,.png,.jpg,.jpeg",s.multiple=!0,s.onchange=async r=>{const i=r.target.files;if(i){const d=Array.from(i).map(_=>({file:_,document_type:"contract",document_name:_.name.replace(/\.[^/.]+$/,""),description:"",requires_signature:!0}));c([...n,...d])}},s.click()},E=s=>{c(n.filter((r,a)=>a!==s))},j=async s=>{g(s),c([]),p(!0)},y=async()=>{if(x)try{const s=new FormData;n.forEach((a,i)=>{s.append(`documents[${i}][file]`,a.file),s.append(`documents[${i}][document_type]`,a.document_type),s.append(`documents[${i}][document_name]`,a.document_name),s.append(`documents[${i}][description]`,a.description),s.append(`documents[${i}][requires_signature]`,a.requires_signature?"1":"0")});const r=await ce.post(`/admin/students/${x.id}/verify-enrollment`,s,{headers:{"Content-Type":"multipart/form-data"}});r.data.success&&(B(a=>a.map(i=>i.id===x.id?{...i,enrollmentVerified:!0,enrollmentVerifiedAt:r.data.student.enrollmentVerifiedAt,verifiedEnrollmentBy:r.data.student.verifiedEnrollmentBy}:i)),p(!1),g(null),c([]),await Y.fire({title:"¡Verificado!",html:`
            <p>La matrícula ha sido verificada exitosamente</p>
            ${r.data.documents_uploaded>0?`<p class="text-sm text-gray-600 mt-2">Se enviaron ${r.data.documents_uploaded} documento(s) al estudiante</p>`:""}
          `,icon:"success",confirmButtonColor:"#10b981",confirmButtonText:"Entendido",timer:3e3,timerProgressBar:!0,customClass:{confirmButton:"px-6 py-2.5 rounded-xl font-medium"}}))}catch(s){console.error("Error al verificar matrícula:",s);const r=ce.isAxiosError(s)&&s.response?.data?.message||"Error al verificar la matrícula";await Y.fire({title:"Error",text:r,icon:"error",confirmButtonColor:"#ef4444",confirmButtonText:"Cerrar",customClass:{confirmButton:"px-6 py-2.5 rounded-xl font-medium"}})}},v=async s=>{if((await Y.fire({title:"¿Remover Verificación?",html:`
        <div class="text-left">
          <p class="text-gray-700 mb-3">¿Estás seguro de que quieres remover la verificación de esta matrícula?</p>
          <div class="bg-yellow-50 border-l-4 border-yellow-500 p-4 rounded">
            <p class="text-sm text-yellow-800">
              <strong>Advertencia:</strong> Al remover la verificación:
            </p>
            <ul class="text-sm text-yellow-700 mt-2 space-y-1 list-disc list-inside">
              <li>NO contará para la comisión del asesor</li>
              <li>Se marcará como pendiente de verificación</li>
              <li>Se eliminará el registro de verificación</li>
            </ul>
          </div>
        </div>
      `,icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#6b7280",confirmButtonText:'<i class="fas fa-times-circle"></i> Sí, Remover',cancelButtonText:'<i class="fas fa-ban"></i> Cancelar',reverseButtons:!0,customClass:{confirmButton:"px-6 py-2.5 rounded-xl font-medium",cancelButton:"px-6 py-2.5 rounded-xl font-medium"}})).isConfirmed)try{(await ce.post(`/admin/students/${s}/unverify-enrollment`)).data.success&&(B(i=>i.map(d=>d.id===s?{...d,enrollmentVerified:!1,enrollmentVerifiedAt:void 0,verifiedEnrollmentBy:void 0}:d)),await Y.fire({title:"Verificación Removida",text:"La verificación ha sido removida exitosamente",icon:"success",confirmButtonColor:"#10b981",confirmButtonText:"Entendido",timer:3e3,timerProgressBar:!0,customClass:{confirmButton:"px-6 py-2.5 rounded-xl font-medium"}}))}catch(a){console.error("Error al remover verificación:",a);const i=ce.isAxiosError(a)&&a.response?.data?.message||"Error al remover la verificación";await Y.fire({title:"Error",text:i,icon:"error",confirmButtonColor:"#ef4444",confirmButtonText:"Cerrar",customClass:{confirmButton:"px-6 py-2.5 rounded-xl font-medium"}})}},k=u.useCallback(s=>{if(!s)return"Sin asignar";const r=e.find(a=>a.id===s);return r?r.name:"Grupo desconocido"},[e]),T=u.useMemo(()=>{let s=o;return m==="pending"?s=o.filter(r=>!r.enrollmentVerified):m==="verified"&&(s=o.filter(r=>r.enrollmentVerified)),s},[o,m]),N=s=>{K(s),C(!0)},A=u.useMemo(()=>[{headerName:"Alumno",field:"name",minWidth:300,filter:"agTextColumnFilter",cellRenderer:s=>{const r=s.data,a=r.avatar;return t.jsxs("div",{className:"flex items-center py-2 w-full h-full",children:[a?t.jsx("img",{src:`/storage/${r.avatar}`,alt:r.name,className:"w-10 h-10 rounded-full object-cover flex-shrink-0 border-2 border-white shadow-md"}):t.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-[#073372] to-[#17BC91] rounded-full flex items-center justify-center flex-shrink-0",children:t.jsx("span",{className:"text-white text-sm font-semibold",children:r.name.split(" ").map(i=>i[0]).join("")})}),t.jsxs("div",{className:"ml-3",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:r.name}),t.jsx("div",{className:"text-xs text-gray-500",children:r.email}),t.jsx("div",{className:"text-xs text-gray-400",children:r.phoneNumber})]})]})}},{headerName:"Código",field:"enrollmentCode",width:180,filter:"agTextColumnFilter",cellRenderer:s=>{const r=s.data;return t.jsxs("div",{className:"w-full h-full flex items-center",children:[t.jsx("div",{className:"text-sm font-mono text-gray-900",children:s.value}),t.jsx("div",{className:"text-xs text-gray-500",children:r.enrollmentDate})]})}},{headerName:"Estado",field:"status",width:120,filter:"agTextColumnFilter",cellRenderer:s=>{const r=s.value;return t.jsx("div",{className:"flex items-center space-x-2 w-full h-full",children:t.jsxs("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${r==="active"?"bg-[#17BC91]/10 text-[#17BC91] border border-[#17BC91]/30":"bg-red-100 text-red-800"}`,children:[r==="active"?t.jsx(_e,{className:"w-3 h-3 mr-1"}):t.jsx(Be,{className:"w-3 h-3 mr-1"}),r==="active"?"Activo":"Inactivo"]})})}},{headerName:"Nivel",field:"level",width:120,filter:"agTextColumnFilter",cellRenderer:s=>{const r=s.value,a=r==="basic"?"bg-[#17BC91]/10 text-[#17BC91] border border-[#17BC91]/30":r==="intermediate"?"bg-[#F98613]/10 text-[#F98613] border border-[#F98613]/30":"bg-[#073372]/10 text-[#073372] border border-[#073372]/30";return t.jsx("div",{className:"flex items-center space-x-2 w-full h-full",children:t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a}`,children:r==="basic"?"Básico":r==="intermediate"?"Intermedio":"Avanzado"})})}},{headerName:"Verificación",field:"enrollmentVerified",width:150,filter:"agTextColumnFilter",cellRenderer:s=>{const a=s.data.enrollmentVerified;return t.jsx("div",{className:"flex items-center justify-between h-full gap-2",children:a?t.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-[#17BC91]/10 text-[#17BC91] border border-[#17BC91]/30",children:[t.jsx(he,{className:"w-3 h-3 mr-1"}),"Verificado"]}):t.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-[#F98613]/10 text-[#F98613] border border-[#F98613]/30",children:[t.jsx(Ve,{className:"w-3 h-3 mr-1"}),"Pendiente"]})})}},{headerName:"Plan",field:"contractedPlan",minWidth:200,filter:"agTextColumnFilter",cellRenderer:s=>{const r=s.data;return t.jsxs("div",{className:"w-full h-full flex flex-col items-start justify-center",children:[t.jsx("div",{className:"text-sm text-gray-900",children:s.value}),t.jsxs("div",{className:"text-xs text-gray-500",children:["Grupo: ",k(r.assignedGroupId)]})]})}},{headerName:"Acciones",width:100,sortable:!1,filter:!1,cellRenderer:s=>{const r=s.data;return t.jsxs("div",{className:"flex items-center space-x-2 w-full h-full",children:[t.jsx("button",{onClick:()=>N(r),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Ver detalles",children:t.jsx(De,{className:"h-4 w-4"})}),r.enrollmentVerified?t.jsx("button",{onClick:()=>v(r.id),className:"p-1.5 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Remover verificación",children:t.jsx(he,{className:"h-4 w-4"})}):t.jsx("button",{onClick:()=>j(r),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Verificar matrícula",children:t.jsx(fe,{className:"h-4 w-4"})})]})}}],[k]);return t.jsxs(ve,{children:[t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Alumnos Matriculados"}),t.jsx("p",{className:"text-gray-600",children:"Gestiona los estudiantes que ya han completado su matrícula"})]})}),t.jsxs("div",{className:"relative",children:[t.jsx(ke,{type:"text",label:"Buscar por nombre, email, código, teléfono, nivel, plan...",value:h,onChange:s=>S(s.target.value),icon:t.jsx(Ee,{className:"w-4 h-4"}),className:"pr-10"}),h&&t.jsx("button",{onClick:()=>S(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors z-20",children:t.jsx(fe,{className:"h-5 w-5"})})]}),t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-1 inline-flex",children:t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>f("verified"),className:`px-6 py-3 rounded-lg font-medium transition-all ${m==="verified"?"bg-gradient-to-r from-green-500 to-emerald-500 text-white shadow-md":"text-gray-600 hover:bg-gray-50"}`,children:t.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[t.jsx(he,{className:"h-4 w-4"}),t.jsx("span",{children:"Verificados"}),t.jsx("span",{className:"bg-white/20 px-2 py-0.5 rounded-full text-xs",children:o.filter(s=>s.enrollmentVerified).length})]})}),t.jsx("button",{onClick:()=>f("pending"),className:`px-6 py-3 rounded-lg font-medium transition-all ${m==="pending"?"bg-gradient-to-r from-yellow-500 to-orange-500 text-white shadow-md":"text-gray-600 hover:bg-gray-50"}`,children:t.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[t.jsx(Te,{className:"h-4 w-4"}),t.jsx("span",{children:"No Verificados"}),t.jsx("span",{className:"bg-white/20 px-2 py-0.5 rounded-full text-xs",children:o.filter(s=>!s.enrollmentVerified).length})]})}),t.jsx("button",{onClick:()=>f("all"),className:`px-6 py-3 rounded-lg font-medium transition-all ${m==="all"?"bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-md":"text-gray-600 hover:bg-gray-50"}`,children:t.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[t.jsx(be,{className:"h-4 w-4"}),t.jsx("span",{children:"Todos"}),t.jsx("span",{className:"bg-white/20 px-2 py-0.5 rounded-full text-xs",children:o.length})]})})]})}),t.jsx("div",{className:"ag-theme-quartz",style:{height:"600px",width:"100%"},children:t.jsx(Ne,{theme:we,rowData:T,columnDefs:A,quickFilterText:h,defaultColDef:{sortable:!0,filter:!0,resizable:!0,flex:1,minWidth:100},pagination:!0,paginationPageSize:10,paginationPageSizeSelector:[5,10,20,50],rowSelection:{mode:"singleRow"},animateRows:!0,domLayout:"normal",rowHeight:70,headerHeight:48,suppressCellFocus:!0,rowClass:"hover:bg-gray-50"})})]}),V&&w&&t.jsx(Pe,{student:w,onClose:()=>C(!1),groups:e}),D&&x&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-3xl max-w-4xl w-full max-h-[90vh] overflow-hidden shadow-2xl",children:[t.jsxs("div",{className:"bg-gradient-to-r from-[#073372] to-[#17BC91] px-8 py-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-white",children:"Verificar Matrícula"}),t.jsxs("p",{className:"text-white/90 text-sm mt-1",children:[x.name," - ",x.enrollmentCode]})]}),t.jsxs("div",{className:"p-8 overflow-y-auto max-h-[calc(90vh-200px)]",children:[t.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 rounded mb-6",children:[t.jsxs("p",{className:"text-sm text-blue-800",children:[t.jsx("strong",{children:"Importante:"})," Al verificar esta matrícula:"]}),t.jsxs("ul",{className:"text-sm text-blue-700 mt-2 space-y-1 list-disc list-inside",children:[t.jsx("li",{children:"Contará para la comisión del asesor de ventas"}),t.jsx("li",{children:"Se registrará como matrícula válida"}),t.jsx("li",{children:"Se guardará tu nombre como verificador"}),n.length>0&&t.jsxs("li",{children:["Se enviarán ",n.length," documento(s) al estudiante por email"]})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Documentos para el Estudiante"}),t.jsxs("button",{onClick:b,className:"flex items-center gap-2 bg-[#17BC91] hover:bg-[#17BC91]/90 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Agregar Documentos"]})]}),n.length===0?t.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[t.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:'No hay documentos agregados. Haz clic en "Agregar Documentos" para subir contratos, reglamentos, etc.'}),t.jsx("p",{className:"mt-1 text-xs text-gray-400",children:"Los documentos se enviarán al estudiante por email y deberá confirmarlos/firmarlos."})]}):t.jsx("div",{className:"space-y-3",children:n.map((s,r)=>t.jsx("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),t.jsx("span",{className:"font-medium text-gray-900",children:s.file.name}),t.jsxs("span",{className:"text-xs text-gray-500",children:["(",(s.file.size/1024/1024).toFixed(2)," MB)"]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-3",children:[t.jsx("input",{type:"text",value:s.document_name,onChange:a=>{const i=[...n];i[r].document_name=a.target.value,c(i)},placeholder:"Nombre del documento",className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"}),t.jsxs("select",{value:s.document_type,onChange:a=>{const i=[...n];i[r].document_type=a.target.value,c(i)},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[t.jsx("option",{value:"contract",children:"Contrato"}),t.jsx("option",{value:"regulation",children:"Reglamento"}),t.jsx("option",{value:"terms",children:"Términos y Condiciones"}),t.jsx("option",{value:"other",children:"Otro"})]})]}),t.jsx("textarea",{value:s.description,onChange:a=>{const i=[...n];i[r].description=a.target.value,c(i)},placeholder:"Descripción o instrucciones para el estudiante (opcional)",className:"mt-2 w-full px-3 py-2 border border-gray-300 rounded-lg text-sm resize-none",rows:2}),t.jsxs("label",{className:"flex items-center gap-2 mt-2",children:[t.jsx("input",{type:"checkbox",checked:s.requires_signature,onChange:a=>{const i=[...n];i[r].requires_signature=a.target.checked,c(i)},className:"rounded"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Requiere firma del estudiante"})]})]}),t.jsx("button",{onClick:()=>E(r),className:"text-red-600 hover:bg-red-50 p-2 rounded-lg transition-colors",title:"Eliminar documento",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},r))})]})]}),t.jsxs("div",{className:"bg-gray-50 px-8 py-4 border-t border-gray-200 flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>{p(!1),g(null),c([])},className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-2.5 rounded-xl font-medium transition-colors",children:"Cancelar"}),t.jsxs("button",{onClick:y,className:"bg-gradient-to-r from-[#073372] to-[#17BC91] hover:opacity-90 text-white px-6 py-2.5 rounded-xl font-medium transition-opacity",children:["✓ Verificar Matrícula",n.length>0&&` y Enviar ${n.length} Documento(s)`]})]})]})})]})};export{mt as default};
