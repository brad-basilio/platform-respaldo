import{r as x,U as b,j as e,a as g}from"./app-CdJ8_Js4.js";import{A as re}from"./AuthenticatedLayout-BFQ91Yio.js";import{A as le,t as ie,M as ne,a as oe}from"./index.esm-idvKP4Sh.js";import{C as A,U as de,S as y}from"./DocumentConfirmationModal-B6AulIZs.js";import{I as i,S as ce}from"./input-Bld5qb-7.js";/* empty css                       */import{U as me}from"./user-check-D3rJ18_R.js";import{U as xe}from"./user-x-DTFcDBEm.js";import{C as w}from"./circle-check-big-DjwIH4tW.js";import{C as V}from"./circle-alert-CqI4fse6.js";import{C as Y}from"./clock-DQJnGsjl.js";import{E as L}from"./eye-CCSl9Xsx.js";import{S as ue}from"./search-BxQ4lAGR.js";import{U as N}from"./users-s5bUGnKq.js";import{F as u}from"./file-text-DOmn6jgq.js";import{M as q}from"./mail-C33HBl5a.js";import{P as X,M as he}from"./phone-CyAfgb1d.js";import{C as h}from"./calendar-BOEbTz2i.js";import{C as M}from"./credit-card-CJTBAZZi.js";import{G as R}from"./graduation-cap-D5NZ0Scp.js";import{B as fe}from"./book-open-DaZpbdNo.js";/* empty css            */import"./index-DSaI5dkq.js";import"./button-BytvLpZM.js";import"./clsx-B-dksMZM.js";import"./dropdown-menu-nHImfEel.js";import"./createLucideIcon-DnH1zIQK.js";import"./index-a3BCoqOn.js";import"./index-DQoxv3ec.js";import"./badge-D8XfFG_C.js";import"./triangle-alert-C4vi-oaQ.js";ne.registerModules([oe]);const pe=({student:r,onClose:p,groups:z})=>{const[d,k]=b.useState([]),[T,$]=b.useState(!0),[F,C]=b.useState(!1),D=l=>{if(!l)return"Sin asignar";const c=z.find(S=>S.id===l);return c?c.name:"Grupo desconocido"};return b.useEffect(()=>{(async()=>{try{$(!0);const c=await g.get(`/admin/students/${r.id}/enrollment-documents`);k(c.data.documents||[]),C(c.data.has_pending_documents||!1)}catch(c){console.error("Error al cargar documentos:",c),k([]),C(!1)}finally{$(!1)}})()},[r.id]),b.useEffect(()=>{const l=window.scrollY;return document.body.style.position="fixed",document.body.style.top=`-${l}px`,document.body.style.width="100%",document.body.style.overflow="hidden",()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,l)}},[]),e.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/50 backdrop-blur-sm animate-fade-in flex items-center justify-center p-4",onClick:p,style:{height:"100vh",width:"100vw"},children:e.jsxs("div",{className:"relative bg-white rounded-3xl shadow-2xl w-full max-w-5xl max-h-[90vh] flex flex-col animate-scale-in",onClick:l=>l.stopPropagation(),children:[e.jsxs("div",{className:"bg-gradient-to-r from-[#073372] to-[#17BC91] px-8 py-6 flex items-center justify-between rounded-t-3xl",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Informaci√≥n del Estudiante"}),e.jsx("p",{className:"text-blue-100 text-sm",children:"Todos los datos del estudiante matriculado (Solo lectura)"})]}),e.jsx("button",{onClick:p,className:"text-white hover:bg-white/20 rounded-full p-2 transition-colors",children:e.jsx(A,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-8",children:e.jsxs("form",{className:"space-y-6",children:[e.jsxs("div",{className:"border border-gray-200 p-6 rounded-xl bg-white shadow-sm",children:[e.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center border-b border-gray-200 pb-3",children:[e.jsx(N,{className:"h-5 w-5 mr-2 text-blue-600"}),"Datos Personales"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(i,{label:"Nombres",type:"text",value:r.firstName||"",disabled:!0,variant:"filled"}),e.jsx(i,{label:"Apellido Paterno",type:"text",value:r.paternalLastName||"",disabled:!0,variant:"filled"}),e.jsx(i,{label:"Apellido Materno",type:"text",value:r.maternalLastName||"",disabled:!0,variant:"filled"}),e.jsx(i,{label:"Email",type:"email",value:r.email||"",disabled:!0,variant:"filled",icon:e.jsx(q,{className:"w-4 h-4"})}),e.jsx(i,{label:"Tel√©fono",type:"text",value:r.phoneNumber||"",disabled:!0,variant:"filled",icon:e.jsx(X,{className:"w-4 h-4"})}),e.jsx(i,{label:"G√©nero",type:"text",value:r.gender==="male"?"Masculino":r.gender==="female"?"Femenino":"Otro",disabled:!0,variant:"filled"}),e.jsx(i,{label:"Fecha de Nacimiento",type:"date",value:r.birthDate||"",disabled:!0,variant:"filled",icon:e.jsx(h,{className:"w-4 h-4"})}),e.jsx(i,{label:"Tipo de Documento",type:"text",value:r.documentType?.toUpperCase()||"",disabled:!0,variant:"filled",icon:e.jsx(u,{className:"w-4 h-4"})}),e.jsx(i,{label:"N√∫mero de Documento",type:"text",value:r.documentNumber||"",disabled:!0,variant:"filled",icon:e.jsx(M,{className:"w-4 h-4"})}),e.jsx("div",{className:"md:col-span-3",children:e.jsx(i,{label:"Nivel Educativo",type:"text",value:r.educationLevel||"",disabled:!0,variant:"filled",icon:e.jsx(R,{className:"w-4 h-4"})})})]})]}),e.jsxs("div",{className:"border border-gray-200 p-6 rounded-xl bg-white shadow-sm",children:[e.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center border-b border-gray-200 pb-3",children:[e.jsx(fe,{className:"h-5 w-5 mr-2 text-purple-600"}),"Datos Acad√©micos"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(i,{label:"C√≥digo de Matr√≠cula",type:"text",value:r.enrollmentCode||"",disabled:!0,variant:"filled",icon:e.jsx(u,{className:"w-4 h-4"})}),e.jsx(i,{label:"Fecha de Pago",type:"date",value:r.paymentDate||"",disabled:!0,variant:"filled",icon:e.jsx(h,{className:"w-4 h-4"})}),e.jsx(i,{label:"Fecha de Matr√≠cula",type:"date",value:r.enrollmentDate||"",disabled:!0,variant:"filled",icon:e.jsx(h,{className:"w-4 h-4"})}),e.jsx(i,{label:"Nivel Acad√©mico",type:"text",value:r.level==="basic"?"B√°sico":r.level==="intermediate"?"Intermedio":r.level==="advanced"?"Avanzado":"No asignado",disabled:!0,variant:"filled",icon:e.jsx(R,{className:"w-4 h-4"})}),e.jsx(i,{label:"Plan Contratado",type:"text",value:r.contractedPlan||"Sin plan",disabled:!0,variant:"filled",icon:e.jsx(M,{className:"w-4 h-4"})}),e.jsx(i,{label:"Grupo Asignado",type:"text",value:D(r.assignedGroupId),disabled:!0,variant:"filled",icon:e.jsx(N,{className:"w-4 h-4"})}),e.jsx(i,{label:"Tipo de Clase",type:"text",value:r.classType==="theoretical"?"Te√≥rico":"Pr√°ctico",disabled:!0,variant:"filled"}),e.jsx(i,{label:"Pago Verificado",type:"text",value:r.paymentVerified?"‚úÖ S√≠":"‚ùå No",disabled:!0,variant:"filled"}),e.jsx(i,{label:"Estado",type:"text",value:r.status==="active"?"‚úÖ Activo":"‚ùå Inactivo",disabled:!0,variant:"filled"})]})]}),e.jsxs("div",{className:"border border-gray-200 p-6 rounded-xl bg-white shadow-sm",children:[e.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center border-b border-gray-200 pb-3",children:[e.jsx(R,{className:"h-5 w-5 mr-2 text-orange-600"}),"Examen de Categorizaci√≥n"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(i,{label:"¬øRealiz√≥ examen?",type:"text",value:r.hasPlacementTest?"S√≠":"No",disabled:!0,variant:"filled"}),r.hasPlacementTest&&e.jsxs(e.Fragment,{children:[e.jsx(i,{label:"Fecha del Examen",type:"date",value:r.testDate||"",disabled:!0,variant:"filled",icon:e.jsx(h,{className:"w-4 h-4"})}),e.jsx(i,{label:"Puntaje",type:"text",value:r.testScore||"",disabled:!0,variant:"filled",icon:e.jsx(u,{className:"w-4 h-4"})})]})]})]}),e.jsxs("div",{className:"border border-gray-200 p-6 rounded-xl bg-white shadow-sm",children:[e.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center border-b border-gray-200 pb-3",children:[e.jsx(N,{className:"h-5 w-5 mr-2 text-green-600"}),"Datos del Apoderado / Titular"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(i,{label:"Nombre Completo",type:"text",value:r.guardianName||"No registrado",disabled:!0,variant:"filled"}),e.jsx(i,{label:"N√∫mero de Documento",type:"text",value:r.guardianDocumentNumber||"No registrado",disabled:!0,variant:"filled",icon:e.jsx(M,{className:"w-4 h-4"})}),e.jsx(i,{label:"Email",type:"email",value:r.guardianEmail||"No registrado",disabled:!0,variant:"filled",icon:e.jsx(q,{className:"w-4 h-4"})}),e.jsx(i,{label:"Tel√©fono",type:"text",value:r.guardianPhone||"No registrado",disabled:!0,variant:"filled",icon:e.jsx(X,{className:"w-4 h-4"})}),e.jsx(i,{label:"Fecha de Nacimiento",type:"date",value:r.guardianBirthDate||"",disabled:!0,variant:"filled",icon:e.jsx(h,{className:"w-4 h-4"})}),e.jsx(i,{label:"Direcci√≥n",type:"text",value:r.guardianAddress||"No registrado",disabled:!0,variant:"filled",icon:e.jsx(he,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"border border-gray-200 p-6 rounded-xl bg-white shadow-sm",children:[e.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center border-b border-gray-200 pb-3",children:[e.jsx(h,{className:"h-5 w-5 mr-2 text-indigo-600"}),"Fechas Importantes"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(i,{label:"Fecha de Registro",type:"date",value:r.registrationDate||"",disabled:!0,variant:"filled",icon:e.jsx(h,{className:"w-4 h-4"})}),e.jsx(i,{label:"Fecha de Pago",type:"date",value:r.paymentDate||"",disabled:!0,variant:"filled",icon:e.jsx(h,{className:"w-4 h-4"})}),e.jsx(i,{label:"Fecha de Matr√≠cula",type:"date",value:r.enrollmentDate||"",disabled:!0,variant:"filled",icon:e.jsx(h,{className:"w-4 h-4"})})]})]}),r.enrollmentVerified&&e.jsxs("div",{className:"border border-gray-200 p-6 rounded-xl bg-white shadow-sm",children:[e.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center border-b border-gray-200 pb-3",children:[e.jsx(w,{className:"h-5 w-5 mr-2 text-emerald-600"}),"Informaci√≥n de Verificaci√≥n"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(i,{label:"Verificado por",type:"text",value:r.verifiedEnrollmentBy?.name||"No disponible",disabled:!0,variant:"filled",icon:e.jsx(N,{className:"w-4 h-4"})}),e.jsx(i,{label:"Fecha de Verificaci√≥n",type:"text",value:r.enrollmentVerifiedAt?new Date(r.enrollmentVerifiedAt).toLocaleString("es-ES"):"No disponible",disabled:!0,variant:"filled",icon:e.jsx(h,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"border border-gray-200 p-6 rounded-xl bg-white shadow-sm",children:[e.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center border-b border-gray-200 pb-3",children:[e.jsx(u,{className:"h-5 w-5 mr-2 text-indigo-600"}),"Documentos de Matr√≠cula",d.length>0&&e.jsxs("span",{className:"ml-auto text-xs bg-indigo-100 text-indigo-700 px-2.5 py-1 rounded-full font-medium",children:[d.length," documento(s)"]})]}),F&&e.jsx("div",{className:"mb-4 bg-yellow-50 border-l-4 border-yellow-500 p-4 rounded",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(V,{className:"h-5 w-5 text-yellow-600 mr-2"}),e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Atenci√≥n:"})," Hay documentos enviados al estudiante pendientes de confirmaci√≥n. No se puede enviar m√°s documentos hasta que confirme los actuales."]})]})}),T?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Cargando documentos..."})]}):d.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(u,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No hay documentos de matr√≠cula"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"El estudiante debe subir su contrato y voucher de pago, o puedes enviarle documentos adicionales"})]}):e.jsxs("div",{className:"space-y-3",children:[d.some(l=>l.is_student_upload)&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center",children:[e.jsx(N,{className:"h-4 w-4 mr-2 text-blue-600"}),"Documentos del Estudiante"]}),e.jsx("div",{className:"space-y-3",children:d.filter(l=>l.is_student_upload).map((l,c)=>e.jsx("div",{className:"border border-blue-200 bg-blue-50 rounded-lg p-4 hover:bg-blue-100 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(u,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:l.document_name}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["Subido por el estudiante ‚Ä¢ ",l.document_type==="contract"?"Contrato":l.document_type==="payment"?"Voucher de Pago":"Documento"]})]})]}),l.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-2 ml-14",children:l.description}),e.jsxs("div",{className:"flex items-center gap-4 ml-14 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(h,{className:"h-3 w-3"}),"Subido: ",new Date(l.uploaded_at).toLocaleDateString("es-ES")]}),e.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 rounded-full bg-green-100 text-green-700",children:[e.jsx(w,{className:"h-3 w-3"}),"Confirmado"]})]})]}),e.jsxs("a",{href:l.document_type==="contract"?`/admin/students/${r.id}/contract`:`/storage/${l.file_path}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded-lg transition-colors",children:[e.jsx(L,{className:"h-4 w-4"}),"Ver"]})]})},`student-${c}`))})]}),d.some(l=>!l.is_student_upload)&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center",children:[e.jsx(u,{className:"h-4 w-4 mr-2 text-purple-600"}),"Documentos Enviados al Estudiante"]}),e.jsx("div",{className:"space-y-3",children:d.filter(l=>!l.is_student_upload).map((l,c)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-purple-50 rounded-lg",children:e.jsx(u,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:l.document_name}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["Tipo: ",l.document_type==="contract"?"Contrato":l.document_type==="regulation"?"Reglamento":l.document_type==="terms"?"T√©rminos y Condiciones":"Otro",l.uploaded_by_name&&` ‚Ä¢ Enviado por: ${l.uploaded_by_name}`]})]})]}),l.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-2 ml-14",children:l.description}),e.jsxs("div",{className:"flex items-center gap-4 ml-14 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(h,{className:"h-3 w-3"}),"Enviado: ",new Date(l.uploaded_at).toLocaleDateString("es-ES")]}),l.requires_signature&&e.jsx("span",{className:`flex items-center gap-1 px-2 py-1 rounded-full ${l.student_confirmed?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:l.student_confirmed?e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"h-3 w-3"}),"Confirmado por estudiante"]}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"h-3 w-3"}),"Pendiente de confirmaci√≥n"]})}),l.confirmed_at&&e.jsxs("span",{className:"flex items-center gap-1",children:["Confirmado: ",new Date(l.confirmed_at).toLocaleDateString("es-ES")]})]})]}),e.jsxs("a",{href:`/storage/${l.file_path}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-3 py-2 bg-purple-600 hover:bg-purple-700 text-white text-sm rounded-lg transition-colors",children:[e.jsx(L,{className:"h-4 w-4"}),"Ver"]})]})},`verifier-${c}`))})]})]})]})]})}),e.jsx("div",{className:"bg-gray-50 px-8 py-4 border-t border-gray-200 flex justify-end rounded-b-3xl",children:e.jsx("button",{onClick:p,className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-2.5 rounded-xl font-medium transition-colors",children:"Cerrar"})})]})})},We=({students:r=[],groups:p=[],userRole:z=""})=>{const[d,k]=x.useState(r??[]),[T,$]=x.useState(null),[F,C]=x.useState(!1),[D,l]=x.useState(""),[c,S]=x.useState("verified"),[P,I]=x.useState(new Set),[J,E]=x.useState(!1),[j,B]=x.useState(null),[o,G]=x.useState(!1),[U,H]=x.useState([]),[m,f]=x.useState([]);b.useEffect(()=>{const t=async()=>{const s=new Set;for(const a of d)try{(await g.get(`/admin/students/${a.id}/enrollment-documents`)).data.has_pending_documents&&s.add(a.id)}catch(n){console.error(`Error checking documents for student ${a.id}:`,n)}I(s)};d.length>0&&t()},[d]),b.useEffect(()=>{(async()=>{try{const s=await g.get("/admin/document-types/active");H(s.data)}catch(s){console.error("Error loading document types:",s),H([{id:1,name:"Contrato",code:"contract"},{id:2,name:"Reglamento",code:"regulation"},{id:3,name:"T√©rminos y Condiciones",code:"terms"},{id:4,name:"Otro",code:"other"}])}})()},[]);const K=()=>{const t=document.createElement("input");t.type="file",t.accept=".pdf,.doc,.docx,.png,.jpg,.jpeg",t.multiple=!0,t.onchange=async s=>{const n=s.target.files;if(n){const _=Array.from(n).map(v=>({file:v,document_type:"contract",document_name:v.name.replace(/\.[^/.]+$/,""),description:"",requires_signature:!0}));f([...m,..._])}},t.click()},Z=t=>{f(m.filter((s,a)=>a!==t))},O=async t=>{if(P.has(t.id)){await y.fire({title:"Documentos Pendientes",html:`
          <p class="text-gray-700">Este estudiante tiene documentos pendientes de confirmaci√≥n.</p>
          <p class="text-sm text-yellow-600 mt-2">‚è≥ Debe confirmar los documentos actuales antes de poder enviar m√°s.</p>
        `,icon:"warning",confirmButtonColor:"#f59e0b",confirmButtonText:"Entendido",customClass:{confirmButton:"px-6 py-2.5 rounded-xl font-medium"}});return}B(t),f([]),E(!0)},ee=async()=>{if(j&&!o)try{G(!0);const t=new FormData;m.forEach((a,n)=>{t.append(`documents[${n}][file]`,a.file),t.append(`documents[${n}][document_type]`,a.document_type),t.append(`documents[${n}][document_name]`,a.document_name),t.append(`documents[${n}][description]`,a.description),t.append(`documents[${n}][requires_signature]`,a.requires_signature?"1":"0")});const s=await g.post(`/admin/students/${j.id}/verify-enrollment`,t,{headers:{"Content-Type":"multipart/form-data"}});s.data.success&&(I(a=>new Set(a).add(j.id)),E(!1),B(null),f([]),await y.fire({title:"¬°Documentos Enviados!",html:`
            <p>Los documentos han sido enviados al estudiante exitosamente</p>
            ${s.data.documents_uploaded>0?`<p class="text-sm text-gray-600 mt-2">Se enviaron ${s.data.documents_uploaded} documento(s)</p>`:""}
            <p class="text-sm text-orange-600 mt-3">‚è≥ La matr√≠cula se verificar√° cuando el estudiante confirme todos los documentos</p>
          `,icon:"success",confirmButtonColor:"#10b981",confirmButtonText:"Entendido",timer:3e3,timerProgressBar:!0,customClass:{confirmButton:"px-6 py-2.5 rounded-xl font-medium"}}))}catch(t){console.error("Error al verificar matr√≠cula:",t);const s=g.isAxiosError(t)&&t.response?.data?.message||"Error al verificar la matr√≠cula";await y.fire({title:"Error",text:s,icon:"error",confirmButtonColor:"#ef4444",confirmButtonText:"Cerrar",customClass:{confirmButton:"px-6 py-2.5 rounded-xl font-medium"}})}finally{G(!1)}},Q=async t=>{if((await y.fire({title:"¬øRemover Verificaci√≥n?",html:`
        <div class="text-left">
          <p class="text-gray-700 mb-3">¬øEst√°s seguro de que quieres remover la verificaci√≥n de esta matr√≠cula?</p>
          <div class="bg-yellow-50 border-l-4 border-yellow-500 p-4 rounded">
            <p class="text-sm text-yellow-800">
              <strong>Advertencia:</strong> Al remover la verificaci√≥n:
            </p>
            <ul class="text-sm text-yellow-700 mt-2 space-y-1 list-disc list-inside">
              <li>NO contar√° para la comisi√≥n del asesor</li>
              <li>Se marcar√° como pendiente de verificaci√≥n</li>
              <li>Se eliminar√° el registro de verificaci√≥n</li>
            </ul>
          </div>
        </div>
      `,icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#6b7280",confirmButtonText:'<i class="fas fa-times-circle"></i> S√≠, Remover',cancelButtonText:'<i class="fas fa-ban"></i> Cancelar',reverseButtons:!0,customClass:{confirmButton:"px-6 py-2.5 rounded-xl font-medium",cancelButton:"px-6 py-2.5 rounded-xl font-medium"}})).isConfirmed)try{const a=await g.post(`/admin/students/${t}/unverify-enrollment`);if(a.data.success){k(_=>_.map(v=>v.id===t?{...v,enrollmentVerified:!1,enrollmentVerifiedAt:void 0,verifiedEnrollmentBy:void 0}:v));const n=a.data.documents_deleted||0;await y.fire({title:"Verificaci√≥n Removida",html:`
            <p>La verificaci√≥n ha sido removida exitosamente</p>
            ${n>0?`<p class="text-sm text-gray-600 mt-2">‚úÖ Se eliminaron ${n} documento(s) anterior(es)</p>`:""}
          `,icon:"success",confirmButtonColor:"#10b981",confirmButtonText:"Entendido",timer:3e3,timerProgressBar:!0,customClass:{confirmButton:"px-6 py-2.5 rounded-xl font-medium"}})}}catch(a){console.error("Error al remover verificaci√≥n:",a);const n=g.isAxiosError(a)&&a.response?.data?.message||"Error al remover la verificaci√≥n";await y.fire({title:"Error",text:n,icon:"error",confirmButtonColor:"#ef4444",confirmButtonText:"Cerrar",customClass:{confirmButton:"px-6 py-2.5 rounded-xl font-medium"}})}},te=x.useCallback(t=>{if(!t)return"Sin asignar";const s=p.find(a=>a.id===t);return s?s.name:"Grupo desconocido"},[p]),se=x.useMemo(()=>{let t=d;return c==="pending"?t=d.filter(s=>!s.enrollmentVerified):c==="verified"&&(t=d.filter(s=>s.enrollmentVerified)),t},[d,c]),W=t=>{$(t),C(!0)},ae=x.useMemo(()=>[{headerName:"Alumno",field:"name",width:280,filter:"agTextColumnFilter",cellRenderer:t=>{const s=t.data,a=s.avatar;return e.jsx("div",{className:"flex items-center justify-between py-2 w-full h-full group",children:e.jsxs("div",{className:"flex items-center",children:[a?e.jsx("img",{src:`/storage/${s.avatar}`,alt:s.name,className:"w-10 h-10 rounded-full object-cover flex-shrink-0 border-2 border-white shadow-md"}):e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-[#073372] to-[#17BC91] rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-white text-sm font-semibold",children:s.name.split(" ").map(n=>n[0]).join("")})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsx("div",{className:"text-xs text-gray-500",children:s.email}),e.jsx("div",{className:"text-xs text-gray-400",children:s.phoneNumber})]})]})})}},{headerName:"C√≥digo",field:"enrollmentCode",width:150,filter:"agTextColumnFilter",cellRenderer:t=>{const s=t.data;return e.jsxs("div",{className:"w-full h-full flex flex-col justify-center",children:[e.jsx("div",{className:"text-sm font-mono text-gray-900",children:t.value}),e.jsx("div",{className:"text-xs text-gray-500",children:s.enrollmentDate})]})}},{headerName:"Estado",field:"status",width:110,filter:"agTextColumnFilter",cellRenderer:t=>{const s=t.value;return e.jsx("div",{className:"flex items-center justify-center w-full h-full",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${s==="active"?"bg-[#17BC91]/10 text-[#17BC91] border border-[#17BC91]/30":"bg-red-100 text-red-800"}`,children:[s==="active"?e.jsx(me,{className:"w-3 h-3 mr-1"}):e.jsx(xe,{className:"w-3 h-3 mr-1"}),s==="active"?"Activo":"Inactivo"]})})}},{headerName:"Nivel",field:"level",width:130,filter:"agTextColumnFilter",cellRenderer:t=>{const s=t.value;if(!s)return e.jsx("div",{className:"flex items-center justify-center w-full h-full",children:e.jsx("span",{className:"text-xs text-gray-400",children:"N/A"})});const a=s==="basic"?"bg-[#17BC91]/10 text-[#17BC91] border border-[#17BC91]/30":s==="intermediate"?"bg-[#F98613]/10 text-[#F98613] border border-[#F98613]/30":"bg-[#073372]/10 text-[#073372] border border-[#073372]/30";return e.jsx("div",{className:"flex items-center justify-center w-full h-full",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a}`,children:s==="basic"?"B√°sico":s==="intermediate"?"Intermedio":"Avanzado"})})}},{headerName:"Verificaci√≥n",field:"enrollmentVerified",width:180,filter:"agTextColumnFilter",cellRenderer:t=>{const s=t.data,a=s.enrollmentVerified,n=P.has(s.id);return e.jsxs("div",{className:"flex items-center gap-2 h-full",children:[a?e.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-[#17BC91]/10 text-[#17BC91] border border-[#17BC91]/30",children:[e.jsx(w,{className:"w-3 h-3 mr-1"}),"Verificado"]}):n?e.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-700 border border-orange-300",children:[e.jsx(V,{className:"w-3 h-3 mr-1"}),"En proceso"]}):e.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-[#F98613]/10 text-[#F98613] border border-[#F98613]/30",children:[e.jsx(Y,{className:"w-3 h-3 mr-1"}),"Pendiente"]}),e.jsx("button",{onClick:()=>a?Q(s.id):O(s),disabled:!a&&n,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 ${a?"bg-[#17BC91] focus:ring-[#17BC91]":n?"bg-gray-200 cursor-not-allowed opacity-50":"bg-gray-300 focus:ring-gray-400"}`,title:a?"Clic para desverificar":n?"Hay documentos pendientes de confirmaci√≥n":"Clic para verificar",children:e.jsx("span",{className:`inline-block h-3.5 w-3.5 transform rounded-full bg-white transition-transform ${a?"translate-x-5":"translate-x-0.5"}`})})]})}},{headerName:"Plan",field:"contractedPlan",width:200,filter:"agTextColumnFilter",cellRenderer:t=>{t.data;const s=t.value||"Sin plan";return e.jsx("div",{className:"w-full h-full flex flex-col items-start justify-center",children:e.jsx("div",{className:"text-sm text-gray-900",children:s})})}},{headerName:"Acciones",width:100,cellRenderer:t=>{const s=t.data;return e.jsx("div",{className:"flex items-center justify-center h-full gap-2",children:e.jsx("button",{onClick:()=>W(s),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Ver detalles",children:e.jsx(L,{className:"h-4 w-4"})})})}}],[te,P,O,Q,W]);return e.jsxs(re,{children:[e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Alumnos Matriculados"}),e.jsx("p",{className:"text-gray-600",children:"Gestiona los estudiantes que ya han completado su matr√≠cula"})]})}),e.jsxs("div",{className:"relative",children:[e.jsx(i,{type:"text",label:"Buscar por nombre, email, c√≥digo, tel√©fono, nivel, plan...",value:D,onChange:t=>l(t.target.value),icon:e.jsx(ue,{className:"w-4 h-4"}),className:"pr-10"}),D&&e.jsx("button",{onClick:()=>l(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors z-20",children:e.jsx(A,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-1 inline-flex",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>S("verified"),className:`px-6 py-3 rounded-lg font-medium transition-all ${c==="verified"?"bg-gradient-to-r from-green-500 to-emerald-500 text-white shadow-md":"text-gray-600 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(w,{className:"h-4 w-4"}),e.jsx("span",{children:"Verificados"}),e.jsx("span",{className:"bg-white/20 px-2 py-0.5 rounded-full text-xs",children:d.filter(t=>t.enrollmentVerified).length})]})}),e.jsx("button",{onClick:()=>S("pending"),className:`px-6 py-3 rounded-lg font-medium transition-all ${c==="pending"?"bg-gradient-to-r from-yellow-500 to-orange-500 text-white shadow-md":"text-gray-600 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(V,{className:"h-4 w-4"}),e.jsx("span",{children:"No Verificados"}),e.jsx("span",{className:"bg-white/20 px-2 py-0.5 rounded-full text-xs",children:d.filter(t=>!t.enrollmentVerified).length})]})}),e.jsx("button",{onClick:()=>S("all"),className:`px-6 py-3 rounded-lg font-medium transition-all ${c==="all"?"bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-md":"text-gray-600 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(N,{className:"h-4 w-4"}),e.jsx("span",{children:"Todos"}),e.jsx("span",{className:"bg-white/20 px-2 py-0.5 rounded-full text-xs",children:d.length})]})})]})}),e.jsx("div",{className:"ag-theme-quartz",style:{height:"600px",width:"100%"},children:e.jsx(le,{theme:ie,rowData:se,columnDefs:ae,quickFilterText:D,defaultColDef:{sortable:!0,filter:!0,resizable:!0,flex:1,minWidth:100},pagination:!0,paginationPageSize:10,paginationPageSizeSelector:[5,10,20,50],rowSelection:{mode:"singleRow"},animateRows:!0,domLayout:"normal",rowHeight:70,headerHeight:48,suppressCellFocus:!0,rowClass:"hover:bg-gray-50"})})]}),F&&T&&e.jsx(pe,{student:T,onClose:()=>C(!1),groups:p}),J&&j&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[9999] p-4 animate-fade-in",onClick:()=>{o||(E(!1),B(null),f([]))},children:e.jsxs("div",{className:"bg-white rounded-3xl max-w-5xl w-full max-h-[90vh] overflow-hidden shadow-2xl animate-scale-in",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"bg-gradient-to-r from-[#073372] via-[#0d4a8f] to-[#17BC91] px-8 py-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/5 to-transparent"}),e.jsx("div",{className:"relative z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx(u,{className:"h-6 w-6"}),"Enviar Documentos para Verificaci√≥n"]}),e.jsxs("p",{className:"text-white/90 text-sm mt-1 flex items-center gap-2",children:[e.jsx(de,{className:"h-4 w-4"}),j.name," ‚Ä¢ ",j.enrollmentCode]})]}),e.jsx("button",{onClick:()=>{o||(E(!1),B(null),f([]))},disabled:o,className:`rounded-full p-2 transition-colors ${o?"text-white/50 cursor-not-allowed":"text-white hover:bg-white/20"}`,children:e.jsx(A,{className:"h-6 w-6"})})]})})]}),e.jsxs("div",{className:"p-8 overflow-y-auto max-h-[calc(90vh-200px)]",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-blue-500 rounded-xl p-5 mb-6 shadow-sm",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(V,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-semibold text-blue-900 mb-2",children:"‚ÑπÔ∏è Informaci√≥n Importante"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1.5",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-500 mt-0.5",children:"‚Ä¢"}),e.jsx("span",{children:"Los documentos se enviar√°n por email al estudiante"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-500 mt-0.5",children:"‚Ä¢"}),e.jsx("span",{children:"El estudiante debe confirmar/firmar cada documento"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-500 mt-0.5",children:"‚Ä¢"}),e.jsx("span",{children:"La matr√≠cula se verificar√° autom√°ticamente cuando confirme todos"})]}),m.length>0&&e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-500 mt-0.5",children:"‚úì"}),e.jsxs("span",{className:"font-medium text-green-700",children:["Se enviar√°n ",m.length," documento(s) que requieren confirmaci√≥n"]})]})]})]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(u,{className:"h-5 w-5 text-indigo-600"}),"Documentos para el Estudiante"]}),e.jsxs("button",{onClick:K,disabled:o,className:`group relative inline-flex items-center gap-2 px-5 py-2.5 rounded-xl font-medium transition-all duration-200 shadow-md ${o?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-[#17BC91] to-[#14a87d] hover:from-[#14a87d] hover:to-[#17BC91] text-white hover:shadow-lg transform hover:-translate-y-0.5"}`,children:[e.jsx("svg",{className:"w-5 h-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Agregar Documentos"]})]}),m.length===0?e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-2xl p-12 text-center bg-gradient-to-br from-gray-50 to-gray-100 hover:from-gray-100 hover:to-gray-50 transition-all",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-4 bg-white rounded-full shadow-md",children:e.jsx(u,{className:"h-12 w-12 text-gray-400"})})}),e.jsx("p",{className:"text-base font-medium text-gray-700 mb-2",children:"No hay documentos agregados"}),e.jsx("p",{className:"text-sm text-gray-500 max-w-md mx-auto",children:'Haz clic en "Agregar Documentos" para subir contratos, reglamentos, etc.'}),e.jsx("p",{className:"text-xs text-gray-400 mt-3",children:"üìß Los documentos se enviar√°n al estudiante por email"})]}):e.jsx("div",{className:"space-y-4",children:m.map((t,s)=>e.jsx("div",{className:"border-2 border-gray-200 rounded-2xl p-6 bg-gradient-to-br from-white to-gray-50 hover:shadow-lg transition-all duration-200",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-gray-200",children:[e.jsx("div",{className:"p-2.5 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl shadow-md",children:e.jsx(u,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:t.file.name}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["Tama√±o: ",(t.file.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(i,{label:"Nombre del Documento",type:"text",value:t.document_name,onChange:a=>{const n=[...m];n[s].document_name=a.target.value,f(n)},variant:"outlined",required:!0,disabled:o}),e.jsx(ce,{label:"Tipo de Documento",value:t.document_type,onChange:a=>{const n=[...m];n[s].document_type=a.target.value,f(n)},variant:"outlined",required:!0,disabled:o,children:U.length>0?U.map(a=>e.jsx("option",{value:a.code,children:a.name},a.id)):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"contract",children:"Contrato"}),e.jsx("option",{value:"regulation",children:"Reglamento"}),e.jsx("option",{value:"terms",children:"T√©rminos y Condiciones"}),e.jsx("option",{value:"other",children:"Otro"})]})})]}),e.jsx(i,{label:"Descripci√≥n o Instrucciones (Opcional)",type:"text",value:t.description,onChange:a=>{const n=[...m];n[s].description=a.target.value,f(n)},variant:"filled",helperText:"Agrega notas o instrucciones para el estudiante",disabled:o}),e.jsxs("label",{className:`flex items-center gap-3 p-3 bg-white rounded-lg border border-gray-200 transition-colors ${o?"cursor-not-allowed opacity-60":"cursor-pointer hover:bg-gray-50"}`,children:[e.jsx("input",{type:"checkbox",checked:t.requires_signature,onChange:a=>{const n=[...m];n[s].requires_signature=a.target.checked,f(n)},disabled:o,className:"w-5 h-5 text-[#17BC91] border-gray-300 rounded focus:ring-[#17BC91] focus:ring-2 disabled:cursor-not-allowed"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(w,{className:"h-4 w-4 text-[#17BC91]"}),"Requiere firma/confirmaci√≥n del estudiante"]})]})]}),e.jsx("button",{onClick:()=>Z(s),disabled:o,className:`flex-shrink-0 group p-3 rounded-xl transition-all duration-200 ${o?"text-gray-400 cursor-not-allowed":"text-red-600 hover:bg-red-50 hover:shadow-md"}`,title:o?"Enviando documentos...":"Eliminar documento",children:e.jsx(A,{className:`w-6 h-6 ${!o&&"group-hover:scale-110"} transition-transform`})})]})},s))})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-8 py-5 border-t border-gray-200 flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-gray-600",children:m.length>0?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-4 w-4 text-indigo-600"}),e.jsx("strong",{className:"text-gray-900",children:m.length})," documento(s) listo(s) para enviar"]}):e.jsx("span",{className:"text-gray-500",children:"Agrega al menos un documento"})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{E(!1),B(null),f([])},disabled:o,className:`px-6 py-2.5 rounded-xl font-medium transition-all duration-200 border-2 ${o?"bg-gray-100 text-gray-400 border-gray-200 cursor-not-allowed":"text-gray-700 bg-white hover:bg-gray-100 border-gray-300 hover:shadow-md"}`,children:"Cancelar"}),e.jsx("button",{onClick:ee,disabled:m.length===0||o,className:`group relative inline-flex items-center gap-2 px-6 py-2.5 rounded-xl font-medium transition-all duration-200 ${m.length===0||o?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-[#073372] via-[#0d4a8f] to-[#17BC91] hover:from-[#0d4a8f] hover:via-[#073372] hover:to-[#14a87d] text-white shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"}`,children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Enviando documentos..."]}):e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"h-5 w-5"}),"Enviar Documentos al Estudiante",m.length>0&&e.jsx("span",{className:"ml-1 px-2 py-0.5 bg-white/20 rounded-full text-xs font-bold",children:m.length})]})})]})]})]})})]})};export{We as default};
