import{c as G,r as A,j as t,a as H}from"./app-DjufSLuX.js";import{N as E,O as Q,t as k,P as U,A as V}from"./AuthenticatedLayout-BTpCz7Po.js";import{M as I,a as J,A as K}from"./index.esm-t21LTagP.js";/* empty css            */import"./button-CrG9g67x.js";import"./clsx-B-dksMZM.js";import"./dropdown-menu-9tjImYhN.js";import"./createLucideIcon-BvB0pKj1.js";import"./index-Dbr--6vd.js";import"./index-cuhTeiTE.js";import"./index-BkSLFjMa.js";import"./badge-DZiqZEPm.js";import"./file-text-BJhxtHdM.js";import"./triangle-alert-BiV7I1z4.js";import"./circle-check-big-C8IFjzXl.js";import"./clock-DRu8VL3W.js";I.registerModules([J]);const ve=r=>{const e=G.c(33),{archivedStudents:B}=r,[s,z]=A.useState(B),[i,D]=A.useState(""),[F,P]=A.useState(!1),[h,T]=A.useState(null);let x;e[0]===Symbol.for("react.memo_cache_sentinel")?(x=async l=>{try{const a=new FormData;a.append("archived","0"),a.append("archived_reason",""),a.append("_method","PUT"),await H.post(`/admin/students/${l}`,a,{headers:{"Content-Type":"multipart/form-data"}}),z(L=>L.filter(W=>W.id!==l)),k.success("Prospecto restaurado",{description:'El prospecto ha sido restaurado y vuelve al estado "Registrado"',duration:4e3})}catch(a){console.error("Error:",a),k.error("Error al restaurar",{description:"No se pudo restaurar el prospecto. Intenta nuevamente.",duration:5e3})}},e[0]=x):x=e[0];const M=x,q=X,$=Y;let p;e[1]===Symbol.for("react.memo_cache_sentinel")?(p={headerName:"Prospecto",field:"name",minWidth:250,filter:"agTextColumnFilter",cellRenderer:Z},e[1]=p):p=e[1];let f,g,b,v;e[2]===Symbol.for("react.memo_cache_sentinel")?(f={headerName:"Estado Original",field:"prospectStatus",width:180,filter:"agTextColumnFilter",cellRenderer:l=>{const a=l.data;return t.jsx("div",{className:"flex items-center w-full h-full",children:t.jsx("span",{className:`px-3 py-1.5 rounded-full text-xs font-semibold ${q(a.prospectStatus)}`,children:$(a.prospectStatus)})})}},g={headerName:"Fecha de Archivo",field:"archivedAt",width:180,filter:"agTextColumnFilter",cellRenderer:ee},b={headerName:"Razón de Archivo",field:"archivedReason",minWidth:300,filter:"agTextColumnFilter",cellRenderer:te},v={headerName:"Contacto",field:"phoneNumber",width:150,filter:"agTextColumnFilter",cellRenderer:re},e[2]=f,e[3]=g,e[4]=b,e[5]=v):(f=e[2],g=e[3],b=e[4],v=e[5]);let y;e[6]===Symbol.for("react.memo_cache_sentinel")?(y=[p,f,g,b,v,{headerName:"Acciones",width:130,sortable:!1,filter:!1,cellRenderer:l=>{const a=l.data;return t.jsx("div",{className:"flex items-center space-x-2 w-full h-full",children:t.jsx("button",{onClick:()=>{T(a),P(!0)},className:"p-2 text-[#17BC91] hover:bg-[#17BC91]/10 rounded-lg transition-colors",title:"Restaurar prospecto",children:t.jsx(E,{className:"w-5 h-5"})})})}}],e[6]=y):y=e[6];const O=y;let o;e[7]!==F||e[8]!==h?(o=F&&h&&t.jsx("div",{className:"fixed inset-0 z-[99999] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full animate-scale-in",children:[t.jsx("div",{className:"bg-gradient-to-r from-[#17BC91] to-emerald-600 px-6 py-4 rounded-t-2xl",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:t.jsx(E,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-white",children:"Confirmar Restauración"})]})}),t.jsxs("div",{className:"p-6",children:[t.jsxs("p",{className:"text-gray-700 mb-2",children:["¿Estás seguro de que deseas restaurar a ",t.jsx("span",{className:"font-semibold",children:h.name}),"?"]}),t.jsxs("div",{className:"bg-emerald-50 border-l-4 border-[#17BC91] p-3 rounded mt-4",children:[t.jsxs("p",{className:"text-sm text-gray-600",children:["• El prospecto volverá al estado ",t.jsx("span",{className:"font-semibold",children:'"Registrado"'})]}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"• Aparecerá nuevamente en tu lista de prospectos activos"}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"• Se eliminará la razón de archivo"})]})]}),t.jsxs("div",{className:"bg-gray-50 px-6 py-4 rounded-b-2xl flex justify-end gap-3",children:[t.jsx("button",{type:"button",onClick:()=>{P(!1),T(null)},className:"px-4 py-2 text-gray-700 bg-white hover:bg-gray-100 border-2 border-gray-300 rounded-lg font-semibold transition-all duration-200",children:"Cancelar"}),t.jsxs("button",{type:"button",onClick:()=>{M(h.id),P(!1),T(null)},className:"px-4 py-2 bg-[#17BC91] hover:bg-emerald-600 text-white rounded-lg font-semibold transition-all duration-200 flex items-center gap-2",children:[t.jsx(E,{className:"w-5 h-5"}),"Sí, Restaurar"]})]})]})}),e[7]=F,e[8]=h,e[9]=o):o=e[9];let N;e[10]===Symbol.for("react.memo_cache_sentinel")?(N=t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-[#073372] to-[#17BC91] bg-clip-text text-transparent",children:"Prospectos Archivados"}),t.jsx("p",{className:"text-gray-600 mt-2",children:"Prospectos que han sido archivados por no llegar a un acuerdo"})]}),e[10]=N):N=e[10];let j;e[11]===Symbol.for("react.memo_cache_sentinel")?(j=t.jsx("div",{className:"text-sm text-gray-600",children:"Total Archivados"}),e[11]=j):j=e[11];let n;e[12]!==s.length?(n=t.jsxs("div",{className:"flex items-center justify-between",children:[N,t.jsx("div",{className:"flex items-center gap-4",children:t.jsxs("div",{className:"bg-white rounded-xl px-4 py-3 shadow-sm border border-gray-200",children:[j,t.jsx("div",{className:"text-2xl font-bold text-[#073372]",children:s.length})]})})]}),e[12]=s.length,e[13]=n):n=e[13];let w;e[14]===Symbol.for("react.memo_cache_sentinel")?(w=t.jsx(U,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e[14]=w):w=e[14];let _;e[15]===Symbol.for("react.memo_cache_sentinel")?(_=l=>D(l.target.value),e[15]=_):_=e[15];let c;e[16]!==i?(c=t.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-4",children:t.jsxs("div",{className:"relative",children:[w,t.jsx("input",{type:"text",placeholder:"Buscar prospecto archivado...",value:i,onChange:_,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#17BC91] focus:border-transparent"})]})}),e[16]=i,e[17]=c):c=e[17];let S;e[18]===Symbol.for("react.memo_cache_sentinel")?(S={height:"600px",width:"100%"},e[18]=S):S=e[18];let R;e[19]===Symbol.for("react.memo_cache_sentinel")?(R={sortable:!0,resizable:!0,flex:1},e[19]=R):R=e[19];let d;e[20]!==s||e[21]!==i?(d=t.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:t.jsx("div",{className:"ag-theme-alpine",style:S,children:t.jsx(K,{rowData:s,columnDefs:O,defaultColDef:R,quickFilterText:i,animateRows:!0,pagination:!0,paginationPageSize:20,rowHeight:70,domLayout:"normal"})})}),e[20]=s,e[21]=i,e[22]=d):d=e[22];let m;e[23]!==s.length?(m=s.length===0&&t.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-12 text-center",children:[t.jsx(Q,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),t.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No hay prospectos archivados"}),t.jsx("p",{className:"text-gray-500",children:"Los prospectos archivados aparecerán aquí"})]}),e[23]=s.length,e[24]=m):m=e[24];let u;e[25]!==n||e[26]!==c||e[27]!==d||e[28]!==m?(u=t.jsxs("div",{className:"p-6 space-y-6",children:[n,c,d,m]}),e[25]=n,e[26]=c,e[27]=d,e[28]=m,e[29]=u):u=e[29];let C;return e[30]!==u||e[31]!==o?(C=t.jsxs(V,{children:[o,u]}),e[30]=u,e[31]=o,e[32]=C):C=e[32],C};function X(r){switch(r){case"registrado":return"bg-[#073372]/10 text-[#073372] border border-[#073372]/30";case"propuesta_enviada":return"bg-[#F98613]/10 text-[#F98613] border border-[#F98613]/30";case"pago_por_verificar":return"bg-orange-100 text-orange-700 border border-orange-300";case"matriculado":return"bg-[#17BC91]/10 text-[#17BC91] border border-[#17BC91]/30";default:return"bg-gray-100 text-gray-800"}}function Y(r){switch(r){case"registrado":return"Registrado";case"propuesta_enviada":return"Reunión Realizada";case"pago_por_verificar":return"Pago Por Verificar";case"matriculado":return"Matriculado";default:return"Sin Estado"}}function Z(r){const e=r.data;return t.jsxs("div",{className:"flex items-center py-2 w-full h-full",children:[t.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-[#073372] to-[#17BC91] rounded-full flex items-center justify-center text-white font-bold mr-3 flex-shrink-0",children:[e.firstName.charAt(0),e.paternalLastName.charAt(0)]}),t.jsxs("div",{children:[t.jsx("div",{className:"font-semibold text-gray-900",children:e.name}),t.jsx("div",{className:"text-xs text-gray-500",children:e.email})]})]})}function ee(r){const e=r.data;if(!e.archivedAt)return t.jsx("div",{className:"flex items-center w-full h-full",children:"-"});const B=new Date(e.archivedAt);return t.jsx("div",{className:"flex items-center w-full h-full",children:t.jsx("div",{className:"text-sm text-gray-700",children:B.toLocaleDateString("es-PE",{day:"2-digit",month:"short",year:"numeric"})})})}function te(r){const e=r.data;return t.jsx("div",{className:"flex items-center w-full h-full",children:t.jsx("div",{className:"text-sm text-gray-700 truncate",children:e.archivedReason||"Sin razón especificada"})})}function re(r){const e=r.data;return t.jsx("div",{className:"flex items-center w-full h-full",children:t.jsx("div",{className:"text-sm text-gray-700",children:e.phoneNumber})})}export{ve as default};
