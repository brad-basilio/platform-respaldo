import{c as pe,r as Q,j as s,L as S,b as me}from"./app-DDnwtAou.js";import{t as U,A as ie}from"./AuthenticatedLayout-COg4Xp4k.js";import{B as ce}from"./badge-fdEPb9w8.js";import{C as G,a as J,c as fe,d as ge,b as je}from"./card-DiXBhmPr.js";import{B as o}from"./button-CN_q5fm-.js";import{T as Ne}from"./textarea-Cqiw7M-m.js";import{B as ne}from"./book-open-BmVyYByB.js";import{C as oe}from"./clock-CXYR9CRl.js";import{F as be}from"./file-question-plgwFaRN.js";import{F as ye}from"./file-text-BYcZrii5.js";import{C as de}from"./circle-check-big-DgidILKK.js";import{E as K}from"./eye-cG6YBZWP.js";import{c as ve}from"./createLucideIcon-K4XsRM4s.js";import{S as te}from"./send-Czy06ebh.js";import{C as we}from"./circle-alert-CVeDSkT4.js";/* empty css            */import"./dropdown-menu-DFm38KBC.js";import"./index-BV2Piioo.js";import"./index-_fPUl1jC.js";import"./index-DTU29zgP.js";import"./triangle-alert-D32YsjSX.js";import"./clsx-B-dksMZM.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]],_e=ve("CirclePlay",Ce),es=c=>{const e=pe.c(64),{templates:_,enrollments:n,myRequests:m,academicLevel:ae,message:q}=c,[W,E]=Q.useState(!1),[r,xe]=Q.useState(null),[x,le]=Q.useState(""),[k,re]=Q.useState(!1);let B;e[0]!==n?(B=Object.values(n).filter(Se),e[0]=n,e[1]=B):B=e[1];const h=B.length,d=_.length;let $;e[2]!==h||e[3]!==d?($=d>0?Math.round(h/d*100):0,e[2]=h,e[3]=d,e[4]=$):$=e[4];const R=$;let T;e[5]===Symbol.for("react.memo_cache_sentinel")?(T=t=>{xe(t),le(""),E(!0)},e[5]=T):T=e[5];const he=T;let M;e[6]!==x||e[7]!==r?(M=()=>{r&&(re(!0),me.post("/student/class-requests",{class_template_id:r.id,message:x},{onSuccess:()=>{U.success("Solicitud enviada",{description:"El administrador revisará tu solicitud pronto."}),E(!1)},onError:qe,onFinish:()=>re(!1)}))},e[6]=x,e[7]=r,e[8]=M):M=e[8];const X=M,ue=Be;let P;e[9]!==n||e[10]!==m?(P=t=>{const a=n[t.id],l=m[t.id];if(a){const i=a.scheduled_class;return i.status==="completed"&&a.attended&&a.exam_completed?{type:"completed",label:"Completada",color:"bg-green-600"}:i.status==="completed"?{type:"pending_exam",label:"Pendiente examen",color:"bg-yellow-600"}:i.status==="in_progress"?{type:"in_progress",label:"En curso",color:"bg-blue-600"}:{type:"scheduled",label:"Programada",color:"bg-purple-600"}}if(l){if(l.status==="pending")return{type:"request_pending",label:"Solicitud pendiente",color:"bg-orange-500"};if(l.status==="approved")return{type:"request_approved",label:"Aprobada",color:"bg-cyan-600"}}return{type:"available",label:"Disponible",color:"bg-gray-400"}},e[9]=n,e[10]=m,e[11]=P):P=e[11];const Y=P;if(q){let t;e[12]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsx(we,{className:"w-16 h-16 mx-auto mb-4 text-yellow-500"}),e[12]=t):t=e[12];let a;e[13]!==q?(a=s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:q}),e[13]=q,e[14]=a):a=e[14];let l;e[15]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx("p",{className:"text-gray-600",children:"Contacta con tu asesor para más información."}),e[15]=l):l=e[15];let i;return e[16]!==a?(i=s.jsx(ie,{children:s.jsx("div",{className:"max-w-5xl mx-auto p-6",children:s.jsx(G,{children:s.jsxs(J,{className:"py-12 text-center",children:[t,a,l]})})})}),e[16]=a,e[17]=i):i=e[17],i}const Z=ae?.color||"#3B82F6";let u;e[18]!==Z?(u={backgroundColor:Z},e[18]=Z,e[19]=u):u=e[19];let z;e[20]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsx(ne,{className:"w-5 h-5 text-white"}),e[20]=z):z=e[20];let p;e[21]!==u?(p=s.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:u,children:z}),e[21]=u,e[22]=p):p=e[22];let A;e[23]===Symbol.for("react.memo_cache_sentinel")?(A=s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Clases"}),e[23]=A):A=e[23];const ee=ae?.name||"Sin nivel asignado";let f;e[24]!==ee?(f=s.jsxs("div",{children:[A,s.jsx("p",{className:"text-gray-600",children:ee})]}),e[24]=ee,e[25]=f):f=e[25];let g;e[26]!==f||e[27]!==p?(g=s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[p,f]})}),e[26]=f,e[27]=p,e[28]=g):g=e[28];let F;e[29]===Symbol.for("react.memo_cache_sentinel")?(F=s.jsx("h3",{className:"text-lg font-semibold",children:"Tu Progreso"}),e[29]=F):F=e[29];let j;e[30]!==h||e[31]!==d?(j=s.jsxs("div",{children:[F,s.jsxs("p",{className:"text-blue-100",children:["Has completado ",h," de ",d," sesiones"]})]}),e[30]=h,e[31]=d,e[32]=j):j=e[32];let N;e[33]!==R?(N=s.jsxs("div",{className:"text-4xl font-bold",children:[R,"%"]}),e[33]=R,e[34]=N):N=e[34];let b;e[35]!==j||e[36]!==N?(b=s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[j,N]}),e[35]=j,e[36]=N,e[37]=b):b=e[37];const se=`${R}%`;let y;e[38]!==se?(y=s.jsx("div",{className:"w-full bg-white/20 rounded-full h-3",children:s.jsx("div",{className:"bg-white rounded-full h-3 transition-all duration-500",style:{width:se}})}),e[38]=se,e[39]=y):y=e[39];let v;e[40]!==b||e[41]!==y?(v=s.jsx(G,{className:"mb-8 bg-gradient-to-r from-[#073372] to-[#17BC91] text-white",children:s.jsxs(J,{className:"py-6",children:[b,y]})}),e[40]=b,e[41]=y,e[42]=v):v=e[42];let L;e[43]===Symbol.for("react.memo_cache_sentinel")?(L=s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-green-600"}),s.jsx("span",{className:"text-gray-600",children:"Completada"})]}),e[43]=L):L=e[43];let V;e[44]===Symbol.for("react.memo_cache_sentinel")?(V=s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-600"}),s.jsx("span",{className:"text-gray-600",children:"En curso"})]}),e[44]=V):V=e[44];let D;e[45]===Symbol.for("react.memo_cache_sentinel")?(D=s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-600"}),s.jsx("span",{className:"text-gray-600",children:"Programada"})]}),e[45]=D):D=e[45];let H;e[46]===Symbol.for("react.memo_cache_sentinel")?(H=s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-500"}),s.jsx("span",{className:"text-gray-600",children:"Solicitud pendiente"})]}),e[46]=H):H=e[46];let O;e[47]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsxs("div",{className:"flex flex-wrap gap-4 mb-6 text-sm",children:[L,V,D,H,s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-400"}),s.jsx("span",{className:"text-gray-600",children:"Disponible para solicitar"})]})]}),e[47]=O):O=e[47];let w;e[48]!==n||e[49]!==Y||e[50]!==m||e[51]!==_?(w=_.length===0?s.jsx(G,{children:s.jsxs(J,{className:"py-12 text-center",children:[s.jsx(ne,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No hay clases disponibles"}),s.jsx("p",{className:"text-gray-600",children:"Las clases de tu nivel aparecerán aquí."})]})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:_.map(t=>{const a=Y(t),l=n[t.id],i=m[t.id];return s.jsxs(G,{className:`relative overflow-hidden transition-all hover:shadow-lg ${a.type==="completed"?"border-green-200 bg-green-50/50":""}`,children:[s.jsx("div",{className:`h-1.5 ${a.color}`}),s.jsxs(fe,{className:"pb-2",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs(ce,{variant:"outline",className:"text-xs mb-2",children:["Sesión ",t.session_number]}),s.jsx(ce,{className:`${a.color} text-white text-xs`,children:a.label})]}),s.jsx(ge,{className:"text-base leading-tight",children:t.title}),t.description&&s.jsx(je,{className:"line-clamp-2 text-xs",children:t.description})]}),s.jsxs(J,{className:"pt-0",children:[s.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 mb-4",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(oe,{className:"w-3.5 h-3.5"}),t.duration_minutes," min"]}),t.has_exam&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(be,{className:"w-3.5 h-3.5"}),t.questions_count," preguntas"]}),t.resources_count>0&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ye,{className:"w-3.5 h-3.5"}),t.resources_count]})]}),a.type==="completed"&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-green-600 text-sm",children:[s.jsx(de,{className:"w-4 h-4"}),s.jsx("span",{children:"Clase completada"})]}),l&&s.jsx(S,{href:`/student/class-enrollments/${l.id}`,children:s.jsxs(o,{variant:"outline",size:"sm",className:"w-full",children:[s.jsx(K,{className:"w-4 h-4 mr-2"}),"Ver contenido"]})})]}),(a.type==="in_progress"||a.type==="scheduled"||a.type==="pending_exam")&&l&&s.jsx(S,{href:`/student/class-enrollments/${l.id}`,children:s.jsxs(o,{className:"w-full bg-[#073372] hover:bg-[#052555]",children:[s.jsx(_e,{className:"w-4 h-4 mr-2"}),a.type==="pending_exam"?"Completar examen":"Ver clase"]})}),a.type==="request_pending"&&i&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-orange-600 text-sm",children:[s.jsx(oe,{className:"w-4 h-4"}),s.jsx("span",{children:"Esperando respuesta..."})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(S,{href:`/student/class-templates/${t.id}`,className:"flex-1",children:s.jsxs(o,{variant:"outline",size:"sm",className:"w-full",children:[s.jsx(K,{className:"w-4 h-4 mr-2"}),"Ver temario"]})}),s.jsx(o,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>ue(i.id),children:"Cancelar"})]})]}),a.type==="request_approved"&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-cyan-600 text-sm",children:[s.jsx(de,{className:"w-4 h-4"}),s.jsx("span",{children:"Aprobada - En espera de programación"})]}),s.jsx(S,{href:`/student/class-templates/${t.id}`,children:s.jsxs(o,{variant:"outline",size:"sm",className:"w-full",children:[s.jsx(K,{className:"w-4 h-4 mr-2"}),"Ver temario"]})})]}),a.type==="available"&&s.jsxs("div",{className:"flex gap-2",children:[s.jsx(S,{href:`/student/class-templates/${t.id}`,className:"flex-1",children:s.jsxs(o,{variant:"outline",size:"sm",className:"w-full",children:[s.jsx(K,{className:"w-4 h-4 mr-2"}),"Ver temario"]})}),s.jsxs(o,{size:"sm",className:"flex-1 bg-[#17BC91] hover:bg-[#14a77f]",onClick:()=>he(t),children:[s.jsx(te,{className:"w-4 h-4 mr-2"}),"Solicitar"]})]})]})]},t.id)})}),e[48]=n,e[49]=Y,e[50]=m,e[51]=_,e[52]=w):w=e[52];let C;e[53]!==x||e[54]!==r||e[55]!==W||e[56]!==X||e[57]!==k?(C=W&&r&&s.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>E(!1),children:s.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md",onClick:$e,children:[s.jsx("div",{className:"bg-gradient-to-r from-[#073372] to-[#17BC91] px-6 py-5 rounded-t-2xl",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:s.jsx(te,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-white",children:"Solicitar Clase"}),s.jsxs("p",{className:"text-blue-100 text-sm",children:["Sesión ",r.session_number]})]})]})}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:r.title}),r.description&&s.jsx("p",{className:"text-sm text-gray-600",children:r.description})]}),s.jsx(Ne,{label:"Mensaje (opcional)",value:x,onChange:t=>le(t.target.value),placeholder:"¿Tienes alguna preferencia de horario o comentario adicional?",rows:3}),s.jsx("p",{className:"text-xs text-gray-500",children:"Al solicitar esta clase, un administrador revisará tu petición y te asignará a una sesión disponible."})]}),s.jsxs("div",{className:"bg-gray-50 px-6 py-4 rounded-b-2xl flex justify-end gap-3 border-t",children:[s.jsx(o,{variant:"outline",onClick:()=>E(!1),children:"Cancelar"}),s.jsxs(o,{onClick:X,disabled:k,className:"bg-[#17BC91] hover:bg-[#14a77f]",children:[s.jsx(te,{className:"w-4 h-4 mr-2"}),k?"Enviando...":"Enviar Solicitud"]})]})]})}),e[53]=x,e[54]=r,e[55]=W,e[56]=X,e[57]=k,e[58]=C):C=e[58];let I;return e[59]!==g||e[60]!==v||e[61]!==w||e[62]!==C?(I=s.jsx(ie,{children:s.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[g,v,O,w,C]})}),e[59]=g,e[60]=v,e[61]=w,e[62]=C,e[63]=I):I=e[63],I};function Se(c){return c.scheduled_class.status==="completed"&&c.attended&&c.exam_completed}function qe(){U.error("Error al enviar solicitud")}function Ee(){return U.success("Solicitud cancelada")}function ke(){return U.error("Error al cancelar")}function Be(c){confirm("¿Estás seguro de cancelar esta solicitud?")&&me.delete(`/student/class-requests/${c}`,{onSuccess:Ee,onError:ke})}function $e(c){return c.stopPropagation()}export{es as default};
