import{r as x,j as e,H as T,L as h,b as z}from"./app-C6YE5T--.js";import{A as M}from"./AuthenticatedLayout-_rPooCV6.js";import{F as G,t as b}from"./DocumentConfirmationModal-CZV_kU00.js";import{B as L}from"./badge-DHSqOQzH.js";import{C as g,a as N}from"./card-wj1b8fAm.js";import{B as c}from"./button-6tCHLMme.js";import{T as J}from"./textarea-DoCIIMJM.js";import{C as P}from"./circle-alert-BhuiHqTC.js";import{B as R}from"./book-open-D6fWrMEq.js";import{Z as v}from"./zap-D5FAnSBh.js";import{C as u}from"./clock-BWTYdOlS.js";import{F as k}from"./file-question-Du4sWvPl.js";import{E as y}from"./eye-M1Cyk6Ep.js";import{T as K}from"./trophy-CaKPl0U1.js";import{L as A}from"./lock-K9xANCjJ.js";import{c as X}from"./createLucideIcon-BGmV2zCp.js";import{C as Y}from"./chevron-right-CMQXMx40.js";import{S as ee}from"./send-FhDWMkY7.js";import{C as F}from"./circle-check-big-WFnOe-g7.js";import{T as se}from"./target-BcywDiRT.js";/* empty css            */import"./dropdown-menu-uD6b7PPU.js";import"./index-BgNR7j3l.js";import"./index-CAKlQ3OI.js";import"./index-rSn7b1lN.js";import"./x-sHO0ZKp4.js";import"./triangle-alert-CK3NKnUG.js";import"./clsx-B-dksMZM.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]],H=X("CirclePlay",ae),Te=({templates:j,sessionStats:l,academicLevel:I,practiceSettings:d,message:q})=>{const[V,w]=x.useState(!1),[i,te]=x.useState(null),[$,D]=x.useState(""),[E,B]=x.useState(!1),p=x.useMemo(()=>[...j].sort((s,a)=>{const t=parseInt(s.session_number)||0,n=parseInt(a.session_number)||0;return t-n}),[j]),_=s=>{const a=l[s];return!a||!a.regular_completed?!1:a.practice_completed_count>=d.min_required},O=s=>{const a=parseInt(s.session_number)||0;if(a<=1)return!0;const t=p.find(n=>(parseInt(n.session_number)||0)===a-1);return t?_(t.id):!0},f=Object.values(l).filter(s=>s.regular_completed&&s.practice_completed_count>=d.min_required).length,m=j.length,S=m>0?Math.round(f/m*100):0,r=x.useMemo(()=>{for(const s of p)if(!_(s.id))return s;return null},[p,l]),W=()=>{i&&(B(!0),z.post("/student/class-requests",{class_template_id:i.id,message:$},{onSuccess:()=>{b.success("Solicitud enviada",{description:"El administrador revisar√° tu solicitud pronto."}),w(!1)},onError:()=>{b.error("Error al enviar solicitud")},onFinish:()=>B(!1)}))},Z=s=>{confirm("¬øEst√°s seguro de cancelar esta solicitud?")&&z.delete(`/student/class-requests/${s}`,{onSuccess:()=>b.success("Solicitud cancelada"),onError:()=>b.error("Error al cancelar")})},Q=s=>{const a=l[s.id];if(!O(s))return{type:"locked",label:"Bloqueada",color:"bg-gray-300",icon:A};if(a){if(a.regular_completed&&a.practice_completed_count>=d.min_required)return{type:"completed",label:"Completada",color:"bg-emerald-500",icon:F};if(a.regular_completed)return{type:"practices_pending",label:`Pr√°cticas (${a.practice_completed_count}/${d.min_required})`,color:"bg-cyan-500",icon:v};if(a.regular_enrolled&&!a.regular_completed)return a.regular_status==="in_progress"?{type:"in_progress",label:"En curso",color:"bg-blue-500",icon:H}:{type:"scheduled",label:"Programada",color:"bg-violet-500",icon:u};if(a.pending_request){const n=a.pending_request;if(n.status==="pending")return{type:"request_pending",label:"En revisi√≥n",color:"bg-orange-500",icon:u};if(n.status==="approved")return{type:"request_approved",label:"Aprobada",color:"bg-cyan-500",icon:F}}}return{type:"available",label:"Disponible",color:"bg-gray-400",icon:se}};return q?e.jsxs(M,{children:[e.jsx(T,{title:"Mis Clases"}),e.jsx("div",{className:"max-w-5xl mx-auto p-6",children:e.jsx(g,{children:e.jsxs(N,{className:"py-12 text-center",children:[e.jsx(P,{className:"w-16 h-16 mx-auto mb-4 text-yellow-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:q}),e.jsx("p",{className:"text-gray-600",children:"Contacta con tu asesor para m√°s informaci√≥n."})]})})})]}):e.jsxs(M,{children:[e.jsx(T,{title:"Mis Clases"}),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50",children:[e.jsx("div",{className:"bg-gradient-to-r  text-primary",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-white/20 backdrop-blur-sm flex items-center justify-center",children:e.jsx(R,{className:"w-8 h-8 text-[#073372]"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Mi Ruta de Aprendizaje"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(L,{className:"bg-white/20 hover:bg-white/30 text-[#073372] border-0",children:I?.name||"Sin nivel asignado"}),e.jsxs("span",{className:"text-[#073372] text-sm",children:["‚Ä¢ ",m," sesiones en total"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold",children:f}),e.jsx("div",{className:"text-[#073372] text-sm",children:"Completadas"})]}),e.jsx("div",{className:"w-px h-12 bg-white/30"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold",children:m-f}),e.jsx("div",{className:"text-[#073372] text-sm",children:"Pendientes"})]}),e.jsx("div",{className:"w-px h-12 bg-black/30"}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"relative w-20 h-20",children:[e.jsxs("svg",{className:"w-20 h-20 transform -rotate-90",children:[e.jsx("circle",{cx:"40",cy:"40",r:"35",stroke:"rgba(0,115,114,0.2)",strokeWidth:"6",fill:"none"}),e.jsx("circle",{cx:"40",cy:"40",r:"35",stroke:"#073372",strokeWidth:"6",fill:"none",strokeDasharray:`${S*2.2} 220`,strokeLinecap:"round"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"text-lg font-bold",children:[S,"%"]})})]})})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r&&!_(r.id)&&e.jsx("div",{className:"mb-8",children:e.jsx(g,{className:"border-2 border-[#17BC91] bg-gradient-to-r from-emerald-50 to-teal-50 overflow-hidden",children:e.jsx(N,{className:"p-0",children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsxs("div",{className:"flex-1 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(v,{className:"w-5 h-5 text-[#17BC91]"}),e.jsx("span",{className:"text-sm font-semibold text-[#17BC91] uppercase tracking-wide",children:"Tu siguiente paso"})]}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:l[r.id]?.regular_completed?`Refuerzo: Pr√°cticas de Sesi√≥n ${r.session_number}`:`Sesi√≥n ${r.session_number}: ${r.title}`}),l[r.id]?.regular_completed&&e.jsx("div",{className:"mb-4 p-3 bg-cyan-100/50 rounded-lg border border-cyan-200",children:e.jsxs("p",{className:"text-sm text-cyan-800 font-medium",children:["Has completado la teor√≠a. Ahora debes realizar al menos ",d.min_required," pr√°cticas para avanzar a la siguiente sesi√≥n.",e.jsxs("span",{className:"block mt-1 font-bold",children:["Llevas: ",l[r.id].practice_completed_count," / ",d.min_required]})]})}),r.description&&!l[r.id]?.regular_completed&&e.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:r.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-4",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(u,{className:"w-4 h-4"}),r.duration_minutes," min"]}),r.has_exam&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(k,{className:"w-4 h-4"}),r.exam_questions_count," preguntas"]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsx(h,{href:`/student/class-templates/${r.id}`,children:e.jsxs(c,{className:"bg-[#073372] hover:bg-[#052555]",children:[l[r.id]?.regular_completed?e.jsx(v,{className:"w-4 h-4 mr-2"}):e.jsx(y,{className:"w-4 h-4 mr-2"}),l[r.id]?.regular_completed?"Hacer Pr√°cticas":"Ver contenido"]})})})]}),e.jsx("div",{className:"hidden md:flex items-center justify-center w-48 bg-gradient-to-br from-[#17BC91] to-[#14a77f] text-white",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl font-bold opacity-90",children:r.session_number}),e.jsx("div",{className:"text-sm opacity-75",children:"Sesi√≥n"})]})})]})})})}),f===m&&m>0&&e.jsx("div",{className:"mb-8",children:e.jsx(g,{className:"border-2 border-yellow-400 bg-gradient-to-r from-yellow-50 to-amber-50 overflow-hidden",children:e.jsxs(N,{className:"p-6 text-center",children:[e.jsx(K,{className:"w-16 h-16 mx-auto mb-4 text-yellow-500"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"¬°Felicitaciones! Has completado todas las sesiones üéâ"}),e.jsx("p",{className:"text-gray-600",children:"Has demostrado un excelente compromiso con tu aprendizaje. ¬°Sigue as√≠!"})]})})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Todas las Sesiones"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Completa cada sesi√≥n en orden para desbloquear la siguiente"})]}),j.length===0?e.jsx(g,{children:e.jsxs(N,{className:"py-12 text-center",children:[e.jsx(R,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No hay clases disponibles"}),e.jsx("p",{className:"text-gray-600",children:"Las clases de tu nivel aparecer√°n aqu√≠."})]})}):e.jsx("div",{className:"space-y-3",children:p.map((s,a)=>{const t=Q(s),n=l[s.id],o=t.type==="locked",C=t.type==="completed",U=t.icon;return e.jsx(g,{className:`relative overflow-hidden transition-all duration-300 ${C?"border-emerald-200 bg-emerald-50/50":o?"border-gray-200 bg-gray-50 opacity-60":"border-gray-200 hover:border-[#073372]/30 hover:shadow-md"}`,children:e.jsxs("div",{className:"flex items-stretch",children:[e.jsxs("div",{className:`w-20 flex-shrink-0 flex flex-col items-center justify-center py-4 ${C?"bg-emerald-500":o?"bg-gray-300":"bg-gradient-to-b from-[#073372] to-[#0a4a9e]"}`,children:[e.jsx("span",{className:"text-3xl font-bold text-white",children:s.session_number}),e.jsx("span",{className:"text-xs text-white/80 uppercase",children:"Sesi√≥n"})]}),e.jsxs("div",{className:"flex-1 p-4 flex items-center gap-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${t.color}`,children:e.jsx(U,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:`font-semibold truncate ${o?"text-gray-400":"text-gray-900"}`,children:s.title}),e.jsx(L,{className:`${t.color} text-white text-xs flex-shrink-0`,children:t.label})]}),s.description&&e.jsx("p",{className:`text-sm line-clamp-1 ${o?"text-gray-400":"text-gray-600"}`,children:s.description}),e.jsxs("div",{className:`flex items-center gap-3 mt-2 text-xs ${o?"text-gray-400":"text-gray-500"}`,children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(u,{className:"w-3.5 h-3.5"}),s.duration_minutes," min"]}),s.has_exam&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(k,{className:"w-3.5 h-3.5"}),s.exam_questions_count," preguntas"]}),s.resources_count>0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(G,{className:"w-3.5 h-3.5"}),s.resources_count," recursos"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[o&&e.jsxs("div",{className:"text-center px-4",children:[e.jsx(A,{className:"w-5 h-5 text-gray-400 mx-auto mb-1"}),e.jsxs("span",{className:"text-xs text-gray-400",children:["Completa la sesi√≥n ",parseInt(s.session_number)-1]})]}),t.type==="completed"&&e.jsx(h,{href:`/student/class-templates/${s.id}`,children:e.jsxs(c,{variant:"outline",size:"sm",className:"border-emerald-300 text-emerald-600 hover:bg-emerald-50",children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),"Ver contenido"]})}),t.type==="practices_pending"&&e.jsx(h,{href:`/student/class-templates/${s.id}`,children:e.jsxs(c,{size:"sm",className:"bg-cyan-600 hover:bg-cyan-700",children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Hacer Pr√°cticas"]})}),(t.type==="scheduled"||t.type==="in_progress")&&e.jsx(h,{href:`/student/class-templates/${s.id}`,children:e.jsx(c,{size:"sm",className:"bg-[#073372] hover:bg-[#052555]",children:t.type==="in_progress"?e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Entrar a clase"]}):e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"Ver clase"]})})}),t.type==="request_pending"&&n?.pending_request&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{href:`/student/class-templates/${s.id}`,children:e.jsxs(c,{variant:"outline",size:"sm",children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),"Ver temario"]})}),e.jsx(c,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>Z(n.pending_request.id),children:"Cancelar"})]}),t.type==="request_approved"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-cyan-600 bg-cyan-50 px-2 py-1 rounded",children:"En espera de programaci√≥n"}),e.jsx(h,{href:`/student/class-templates/${s.id}`,children:e.jsxs(c,{variant:"outline",size:"sm",children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),"Ver temario"]})})]})]})]}),C&&a<p.length-1&&e.jsx("div",{className:"absolute -bottom-3 left-10 transform -translate-x-1/2 z-10",children:e.jsx("div",{className:"w-6 h-6 bg-emerald-500 rounded-full flex items-center justify-center shadow-lg",children:e.jsx(Y,{className:"w-4 h-4 text-white rotate-90"})})})]})},s.id)})})]})]}),V&&i&&e.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>w(!1),children:e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md",onClick:s=>s.stopPropagation(),children:[e.jsx("div",{className:"bg-gradient-to-r from-[#073372] to-[#17BC91] px-6 py-5 rounded-t-2xl",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx("span",{className:"text-xl font-bold text-white",children:i.session_number})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Solicitar Clase"}),e.jsxs("p",{className:"text-blue-100 text-sm",children:["Sesi√≥n ",i.session_number]})]})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:i.title}),i.description&&e.jsx("p",{className:"text-sm text-gray-600",children:i.description}),e.jsxs("div",{className:"flex items-center gap-3 mt-3 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(u,{className:"w-3.5 h-3.5"}),i.duration_minutes," min"]}),i.has_exam&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(k,{className:"w-3.5 h-3.5"}),"Examen (",i.exam_questions_count," preguntas)"]})]})]}),e.jsx(J,{label:"Mensaje (opcional)",value:$,onChange:s=>D(s.target.value),placeholder:"¬øTienes alguna preferencia de horario o comentario adicional?",rows:3}),e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-blue-50 rounded-lg",children:[e.jsx(P,{className:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-xs text-blue-700",children:"Al solicitar esta clase, un administrador revisar√° tu petici√≥n y te asignar√° a una sesi√≥n disponible."})]})]}),e.jsxs("div",{className:"bg-gray-50 px-6 py-4 rounded-b-2xl flex justify-end gap-3 border-t",children:[e.jsx(c,{variant:"outline",onClick:()=>w(!1),children:"Cancelar"}),e.jsxs(c,{onClick:W,disabled:E,className:"bg-[#17BC91] hover:bg-[#14a77f]",children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),E?"Enviando...":"Enviar Solicitud"]})]})]})})]})};export{Te as default};
