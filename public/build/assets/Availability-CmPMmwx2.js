import{r as n,j as e,H as B,a as b}from"./app-C6YE5T--.js";import{A as I}from"./AuthenticatedLayout-_rPooCV6.js";import{t as i}from"./DocumentConfirmationModal-CZV_kU00.js";import{I as T}from"./input-BvfI1Hj0.js";import{B as f}from"./button-6tCHLMme.js";import{C as u,c as j,d as y,a as N}from"./card-wj1b8fAm.js";import{S as v}from"./switch-B1PzBGMO.js";import{S as H}from"./save-DRH0JRqc.js";import{L as w}from"./link-2-yJkl7Cyf.js";import{C as O}from"./copy-C870gpDl.js";import{C as $}from"./circle-alert-BhuiHqTC.js";import{C as F}from"./circle-check-big-WFnOe-g7.js";import{C as G}from"./clock-BWTYdOlS.js";/* empty css            */import"./dropdown-menu-uD6b7PPU.js";import"./createLucideIcon-BGmV2zCp.js";import"./index-BgNR7j3l.js";import"./index-CAKlQ3OI.js";import"./index-rSn7b1lN.js";import"./badge-DHSqOQzH.js";import"./x-sHO0ZKp4.js";import"./triangle-alert-CK3NKnUG.js";import"./clsx-B-dksMZM.js";import"./index-Bhc1Y00l.js";const C=["Lunes","Martes","Miércoles","Jueves","Viernes","Sábado","Domingo"],xe=({teacher:o,settings:t})=>{const[d,U]=n.useState(o.meet_url||""),[a,_]=n.useState(o.not_available_today),c=t.operation_start_hour.length===2?`${t.operation_start_hour}:00`:t.operation_start_hour.substring(0,5),m=t.operation_end_hour.length===2?`${t.operation_end_hour}:00`:t.operation_end_hour.substring(0,5),[l,p]=n.useState(o.time_slots&&o.time_slots.length>0?Array.from(new Set(o.time_slots.map(s=>s.day_of_week))):C),[x,g]=n.useState(!1),[k,h]=n.useState(!1),S=s=>{l.includes(s)?p(l.filter(r=>r!==s)):p([...l,s])},D=async()=>{g(!0);try{await b.put("/teacher/availability",{meet_url:d||null,time_slots:l.map(s=>({day_of_week:s,start_time:c,end_time:m}))}),i.success("Configuración guardada exitosamente")}catch{i.error("Error al guardar la configuración")}finally{g(!1)}},A=async()=>{h(!0);try{const s=await b.post("/teacher/toggle-availability");_(s.data.not_available_today),s.data.not_available_today?i.warning("Marcado como NO DISPONIBLE por hoy"):i.success("Marcado como DISPONIBLE hoy")}catch{i.error("Error al cambiar disponibilidad")}finally{h(!1)}},E=()=>{d&&(navigator.clipboard.writeText(d),i.success("Link copiado al portapapeles"))},L=s=>({Lunes:"#073372",Martes:"#0ea5e9",Miércoles:"#17BC91",Jueves:"#8b5cf6",Viernes:"#ec4899",Sábado:"#f59e0b",Domingo:"#ef4444"})[s]||"#64748b";return e.jsxs(I,{children:[e.jsx(B,{title:"Mi Disponibilidad"}),e.jsxs("div",{className:"bg-gray-50 min-h-screen pb-12",children:[e.jsx("div",{className:"bg-white border-b sticky top-0 z-30 shadow-sm",children:e.jsx("div",{className:"w-full px-6 py-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Mi Disponibilidad"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Administra tus días de trabajo (Horario fijo de ",c," a ",m,")"]})]}),e.jsx("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:e.jsxs(f,{onClick:D,disabled:x,className:"bg-[#073372] hover:bg-[#062b61] text-white flex-1 sm:w-48",children:[x?"Guardando...":"Guardar Cambios",!x&&e.jsx(H,{className:"w-4 h-4 ml-2"})]})})]})})}),e.jsxs("div",{className:"w-full px-6 py-8 space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(u,{className:"md:col-span-2 shadow-sm border-gray-200",children:[e.jsx(j,{className:"pb-3",children:e.jsxs(y,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 bg-blue-100 rounded-lg",children:e.jsx(w,{className:"w-4 h-4 text-blue-700"})}),"Link de Google Meet"]})}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"relative flex-1",children:e.jsx(T,{readOnly:!0,placeholder:"https://meet.google.com/...",value:d,className:"font-mono text-sm bg-gray-50 text-gray-500 cursor-not-allowed",icon:e.jsx(w,{className:"w-4 h-4"})})}),e.jsx(f,{variant:"outline",size:"icon",onClick:E,title:"Copiar Link",className:"shrink-0",children:e.jsx(O,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Este enlace es asignado administrativamente y no puede ser modificado."})]})})]}),e.jsxs(u,{className:`shadow-sm border transition-colors ${a?"border-red-200 bg-red-50/50":"border-emerald-200 bg-emerald-50/50"}`,children:[e.jsx(j,{className:"pb-3",children:e.jsxs(y,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx("div",{className:`p-1.5 rounded-lg ${a?"bg-red-100":"bg-emerald-100"}`,children:a?e.jsx($,{className:"w-4 h-4 text-red-700"}):e.jsx(F,{className:"w-4 h-4 text-emerald-700"})}),"Estado de Hoy"]})}),e.jsx(N,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-sm font-medium ${a?"text-red-700":"text-emerald-700"}`,children:a?"NO Disponible":"Disponible"}),e.jsx(v,{checked:!a,onCheckedChange:A,disabled:k,className:"data-[state=checked]:bg-[#17BC91]"})]}),e.jsx("p",{className:"text-xs text-gray-500 leading-tight",children:a?"Has indicado que no puedes atender hoy. No recibirás nuevas asignaciones por el resto del día.":"Estás disponible para recibir clases hoy según tus horarios configurados."})]})})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(G,{className:"w-5 h-5 text-gray-400"}),"Días de Disponibilidad Semanal"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:C.map(s=>{const r=l.includes(s),M=L(s);return e.jsxs("div",{className:`flex flex-col rounded-xl shadow-sm border transition-all duration-300 overflow-hidden ${r?"bg-white border-gray-200":"bg-gray-100/50 border-gray-200 grayscale opacity-70"}`,children:[e.jsxs("div",{className:"px-4 py-3 border-b flex items-center justify-between bg-gray-50/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center font-bold text-white shadow-sm text-sm",style:{backgroundColor:M},children:s.substring(0,3).toUpperCase()}),e.jsx("span",{className:"font-bold text-gray-900",children:s})]}),e.jsx(v,{checked:r,onCheckedChange:()=>S(s),className:"data-[state=checked]:bg-[#17BC91]"})]}),e.jsx("div",{className:"p-5 flex flex-col items-center justify-center text-center space-y-2",children:r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-lg font-mono font-bold text-[#073372]",children:[c," - ",m]}),e.jsx("span",{className:"text-[10px] uppercase tracking-wider font-bold text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full",children:"Disponible"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-lg font-mono font-bold text-gray-400",children:"-- : --"}),e.jsx("span",{className:"text-[10px] uppercase tracking-wider font-bold text-gray-400 bg-gray-200 px-2 py-0.5 rounded-full",children:"No Laboral"})]})})]},s)})})]})]})]})]})};export{xe as default};
