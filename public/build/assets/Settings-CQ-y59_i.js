import{r as Y,c as Ve,u as J,j as a,H as qe}from"./app-o0HhIzvG.js";import{d as X,e as ye,A as Ke,f as xe,g as We,h as _e,i as Ue,t as k}from"./AuthenticatedLayout-h8O4quge.js";import{S as $e,I as le}from"./input-DUcx--Q5.js";/* empty css            */import"./button-XyCkGDT-.js";import"./clsx-B-dksMZM.js";import"./dropdown-menu-CW7l9cNF.js";import"./createLucideIcon-qcX9lIY7.js";import"./index-BkPwhu3O.js";import"./index-BJLPiSy4.js";import"./index-Cw147kKF.js";import"./badge-BZ1tKqau.js";import"./file-text-ByLX3Ra3.js";import"./triangle-alert-DaPHEIN_.js";import"./circle-check-big-CPgmzhfM.js";import"./clock-DCzFmdoh.js";var ue={exports:{}},pe,je;function Je(){if(je)return pe;je=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return pe=t,pe}var me,we;function Xe(){if(we)return me;we=1;var t=Je();function e(){}function i(){}return i.resetWarningCache=e,me=function(){function o(n,c,d,p,m,u){if(u!==t){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}o.isRequired=o;function s(){return o}var l={array:o,bigint:o,bool:o,func:o,number:o,object:o,string:o,symbol:o,any:o,arrayOf:s,element:o,elementType:o,instanceOf:s,node:o,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:i,resetWarningCache:e};return l.PropTypes=l,l},me}var Ne;function Ye(){return Ne||(Ne=1,ue.exports=Xe()()),ue.exports}var r=Ye(),ge=function(){return ge=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++){e=arguments[i];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},ge.apply(this,arguments)},Oe={onActivate:r.func,onAddUndo:r.func,onBeforeAddUndo:r.func,onBeforeExecCommand:r.func,onBeforeGetContent:r.func,onBeforeRenderUI:r.func,onBeforeSetContent:r.func,onBeforePaste:r.func,onBlur:r.func,onChange:r.func,onClearUndos:r.func,onClick:r.func,onContextMenu:r.func,onCommentChange:r.func,onCompositionEnd:r.func,onCompositionStart:r.func,onCompositionUpdate:r.func,onCopy:r.func,onCut:r.func,onDblclick:r.func,onDeactivate:r.func,onDirty:r.func,onDrag:r.func,onDragDrop:r.func,onDragEnd:r.func,onDragGesture:r.func,onDragOver:r.func,onDrop:r.func,onExecCommand:r.func,onFocus:r.func,onFocusIn:r.func,onFocusOut:r.func,onGetContent:r.func,onHide:r.func,onInit:r.func,onInput:r.func,onKeyDown:r.func,onKeyPress:r.func,onKeyUp:r.func,onLoadContent:r.func,onMouseDown:r.func,onMouseEnter:r.func,onMouseLeave:r.func,onMouseMove:r.func,onMouseOut:r.func,onMouseOver:r.func,onMouseUp:r.func,onNodeChange:r.func,onObjectResizeStart:r.func,onObjectResized:r.func,onObjectSelected:r.func,onPaste:r.func,onPostProcess:r.func,onPostRender:r.func,onPreProcess:r.func,onProgressState:r.func,onRedo:r.func,onRemove:r.func,onReset:r.func,onSaveContent:r.func,onSelectionChange:r.func,onSetAttrib:r.func,onSetContent:r.func,onShow:r.func,onSubmit:r.func,onUndo:r.func,onVisualAid:r.func,onSkinLoadError:r.func,onThemeLoadError:r.func,onModelLoadError:r.func,onPluginLoadError:r.func,onIconsLoadError:r.func,onLanguageLoadError:r.func,onScriptsLoad:r.func,onScriptsLoadError:r.func},Qe=ge({apiKey:r.string,licenseKey:r.string,id:r.string,inline:r.bool,init:r.object,initialValue:r.string,onEditorChange:r.func,value:r.string,tagName:r.string,tabIndex:r.number,cloudChannel:r.string,plugins:r.oneOfType([r.string,r.array]),toolbar:r.oneOfType([r.string,r.array]),disabled:r.bool,readonly:r.bool,textareaName:r.string,tinymceScriptSrc:r.oneOfType([r.string,r.arrayOf(r.string),r.arrayOf(r.shape({src:r.string,async:r.bool,defer:r.bool}))]),rollback:r.oneOfType([r.number,r.oneOf([!1])]),scriptLoading:r.shape({async:r.bool,defer:r.bool,delay:r.number})},Oe),Ie=function(t){var e=t;return e&&e.tinymce?e.tinymce:null},fe=function(t){return typeof t=="function"},Ce=function(t){return t in Oe},Se=function(t){return t.substr(2)},Ze=function(t,e,i,o,s,l,n){var c=Object.keys(s).filter(Ce),d=Object.keys(l).filter(Ce),p=c.filter(function(u){return l[u]===void 0}),m=d.filter(function(u){return s[u]===void 0});p.forEach(function(u){var h=Se(u),g=n[h];i(h,g),delete n[h]}),m.forEach(function(u){var h=o(t,u),g=Se(u);n[g]=h,e(g,h)})},et=function(t,e,i,o,s){return Ze(s,t.on.bind(t),t.off.bind(t),function(l,n){return function(c){var d;return(d=l(n))===null||d===void 0?void 0:d(c,t)}},e,i,o)},Ee=0,Re=function(t){var e=Date.now(),i=Math.floor(Math.random()*1e9);return Ee++,t+"_"+i+Ee+String(e)},ke=function(t){return t!==null&&(t.tagName.toLowerCase()==="textarea"||t.tagName.toLowerCase()==="input")},Te=function(t){return typeof t>"u"||t===""?[]:Array.isArray(t)?t:t.split(" ")},tt=function(t,e){return Te(t).concat(Te(e))},nt=function(){return window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"},at=function(t){if(!("isConnected"in Node.prototype)){for(var e=t,i=t.parentNode;i!=null;)e=i,i=e.parentNode;return e===t.ownerDocument}return t.isConnected},De=function(t,e){t!==void 0&&(t.mode!=null&&typeof t.mode=="object"&&typeof t.mode.set=="function"?t.mode.set(e):t.setMode(e))},rt=function(t){var e=Ie(t);if(!e)throw new Error("tinymce should have been loaded into global scope");return e},Pe=function(t){return t.options&&t.options.isRegistered("disabled")},be=function(){return be=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++){e=arguments[i];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},be.apply(this,arguments)},it=function(t,e,i){var o,s,l=t.createElement("script");l.referrerPolicy="origin",l.type="application/javascript",l.id=e.id,l.src=e.src,l.async=(o=e.async)!==null&&o!==void 0?o:!1,l.defer=(s=e.defer)!==null&&s!==void 0?s:!1;var n=function(){l.removeEventListener("load",n),l.removeEventListener("error",c),i(e.src)},c=function(d){l.removeEventListener("load",n),l.removeEventListener("error",c),i(e.src,d)};l.addEventListener("load",n),l.addEventListener("error",c),t.head&&t.head.appendChild(l)},ot=function(t){var e={},i=function(n,c){var d=e[n];d.done=!0,d.error=c;for(var p=0,m=d.handlers;p<m.length;p++){var u=m[p];u(n,c)}d.handlers=[]},o=function(n,c,d){var p=function(S){return d!==void 0?d(S):console.error(S)};if(n.length===0){p(new Error("At least one script must be provided"));return}for(var m=0,u=!1,h=function(S,E){u||(E?(u=!0,p(E)):++m===n.length&&c())},g=0,b=n;g<b.length;g++){var x=b[g],j=e[x.src];if(j)j.done?h(x.src,j.error):j.handlers.push(h);else{var y=Re("tiny-");e[x.src]={id:y,src:x.src,done:!1,error:null,handlers:[h]},it(t,be({id:y},x),i)}}},s=function(){for(var n,c=0,d=Object.values(e);c<d.length;c++){var p=d[c],m=t.getElementById(p.id);m!=null&&m.tagName==="SCRIPT"&&((n=m.parentNode)===null||n===void 0||n.removeChild(m))}e={}},l=function(){return t};return{loadScripts:o,deleteScripts:s,getDocument:l}},st=function(){var t=[],e=function(s){var l=t.find(function(n){return n.getDocument()===s});return l===void 0&&(l=ot(s),t.push(l)),l},i=function(s,l,n,c,d){var p=function(){return e(s).loadScripts(l,c,d)};n>0?setTimeout(p,n):p()},o=function(){for(var s=t.pop();s!=null;s=t.pop())s.deleteScripts()};return{loadList:i,reinitialize:o}},lt=st(),ct=(function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(o[l]=s[l])},t(e,i)};return function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");t(e,i);function o(){this.constructor=e}e.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}})(),Q=function(){return Q=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++){e=arguments[i];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Q.apply(this,arguments)},he="change keyup compositionend setcontent CommentChange",Le=(function(t){ct(e,t);function e(i){var o,s,l,n=t.call(this,i)||this;return n.rollbackTimer=void 0,n.valueCursor=void 0,n.rollbackChange=function(){var c=n.editor,d=n.props.value;c&&d&&d!==n.currentContent&&c.undoManager.ignore(function(){if(c.setContent(d),n.valueCursor&&(!n.inline||c.hasFocus()))try{c.selection.moveToBookmark(n.valueCursor)}catch{}}),n.rollbackTimer=void 0},n.handleBeforeInput=function(c){if(n.props.value!==void 0&&n.props.value===n.currentContent&&n.editor&&(!n.inline||n.editor.hasFocus()))try{n.valueCursor=n.editor.selection.getBookmark(3)}catch{}},n.handleBeforeInputSpecial=function(c){(c.key==="Enter"||c.key==="Backspace"||c.key==="Delete")&&n.handleBeforeInput(c)},n.handleEditorChange=function(c){var d=n.editor;if(d&&d.initialized){var p=d.getContent();n.props.value!==void 0&&n.props.value!==p&&n.props.rollback!==!1&&(n.rollbackTimer||(n.rollbackTimer=window.setTimeout(n.rollbackChange,typeof n.props.rollback=="number"?n.props.rollback:200))),p!==n.currentContent&&(n.currentContent=p,fe(n.props.onEditorChange)&&n.props.onEditorChange(p,d))}},n.handleEditorChangeSpecial=function(c){(c.key==="Backspace"||c.key==="Delete")&&n.handleEditorChange(c)},n.initialise=function(c){var d,p,m;c===void 0&&(c=0);var u=n.elementRef.current;if(u){if(!at(u)){if(c===0)setTimeout(function(){return n.initialise(1)},1);else if(c<100)setTimeout(function(){return n.initialise(c+1)},100);else throw new Error("tinymce can only be initialised when in a document");return}var h=rt(n.view),g=Q(Q(Q(Q({},n.props.init),{selector:void 0,target:u,disabled:n.props.disabled,readonly:n.props.readonly,inline:n.inline,plugins:tt((d=n.props.init)===null||d===void 0?void 0:d.plugins,n.props.plugins),toolbar:(p=n.props.toolbar)!==null&&p!==void 0?p:(m=n.props.init)===null||m===void 0?void 0:m.toolbar}),n.props.licenseKey?{license_key:n.props.licenseKey}:{}),{setup:function(b){n.editor=b,n.bindHandlers({}),n.inline&&!ke(u)&&b.once("PostRender",function(x){b.setContent(n.getInitialValue(),{no_events:!0})}),n.props.init&&fe(n.props.init.setup)&&n.props.init.setup(b),n.props.disabled&&(Pe(n.editor)?n.editor.options.set("disabled",n.props.disabled):n.editor.mode.set("readonly"))},init_instance_callback:function(b){var x,j=n.getInitialValue();n.currentContent=(x=n.currentContent)!==null&&x!==void 0?x:b.getContent(),n.currentContent!==j&&(n.currentContent=j,b.setContent(j),b.undoManager.clear(),b.undoManager.add(),b.setDirty(!1)),n.props.init&&fe(n.props.init.init_instance_callback)&&n.props.init.init_instance_callback(b)}});n.inline||(u.style.visibility=""),ke(u)&&(u.value=n.getInitialValue()),h.init(g)}},n.id=n.props.id||Re("tiny-react"),n.elementRef=Y.createRef(),n.inline=(l=(o=n.props.inline)!==null&&o!==void 0?o:(s=n.props.init)===null||s===void 0?void 0:s.inline)!==null&&l!==void 0?l:!1,n.boundHandlers={},n}return Object.defineProperty(e.prototype,"view",{get:function(){var i,o;return(o=(i=this.elementRef.current)===null||i===void 0?void 0:i.ownerDocument.defaultView)!==null&&o!==void 0?o:window},enumerable:!1,configurable:!0}),e.prototype.componentDidUpdate=function(i){var o=this,s,l;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(i),this.editor.initialized)){if(this.currentContent=(s=this.currentContent)!==null&&s!==void 0?s:this.editor.getContent(),typeof this.props.initialValue=="string"&&this.props.initialValue!==i.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if(typeof this.props.value=="string"&&this.props.value!==this.currentContent){var n=this.editor;n.undoManager.transact(function(){var d;if(!o.inline||n.hasFocus())try{d=n.selection.getBookmark(3)}catch{}var p=o.valueCursor;if(n.setContent(o.props.value),!o.inline||n.hasFocus())for(var m=0,u=[d,p];m<u.length;m++){var h=u[m];if(h)try{n.selection.moveToBookmark(h),o.valueCursor=h;break}catch{}}})}if(this.props.readonly!==i.readonly){var c=(l=this.props.readonly)!==null&&l!==void 0?l:!1;De(this.editor,c?"readonly":"design")}this.props.disabled!==i.disabled&&(Pe(this.editor)?this.editor.options.set("disabled",this.props.disabled):De(this.editor,this.props.disabled?"readonly":"design"))}},e.prototype.componentDidMount=function(){var i=this,o,s,l,n,c;if(Ie(this.view)!==null)this.initialise();else if(Array.isArray(this.props.tinymceScriptSrc)&&this.props.tinymceScriptSrc.length===0)(s=(o=this.props).onScriptsLoadError)===null||s===void 0||s.call(o,new Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array."));else if(!((l=this.elementRef.current)===null||l===void 0)&&l.ownerDocument){var d=function(){var m,u;(u=(m=i.props).onScriptsLoad)===null||u===void 0||u.call(m),i.initialise()},p=function(m){var u,h;(h=(u=i.props).onScriptsLoadError)===null||h===void 0||h.call(u,m)};lt.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),(c=(n=this.props.scriptLoading)===null||n===void 0?void 0:n.delay)!==null&&c!==void 0?c:0,d,p)}},e.prototype.componentWillUnmount=function(){var i=this,o=this.editor;o&&(o.off(he,this.handleEditorChange),o.off(this.beforeInputEvent(),this.handleBeforeInput),o.off("keypress",this.handleEditorChangeSpecial),o.off("keydown",this.handleBeforeInputSpecial),o.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach(function(s){o.off(s,i.boundHandlers[s])}),this.boundHandlers={},o.remove(),this.editor=void 0)},e.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},e.prototype.beforeInputEvent=function(){return nt()?"beforeinput SelectionChange":"SelectionChange"},e.prototype.renderInline=function(){var i=this.props.tagName,o=i===void 0?"div":i;return Y.createElement(o,{ref:this.elementRef,id:this.id,tabIndex:this.props.tabIndex})},e.prototype.renderIframe=function(){return Y.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id,tabIndex:this.props.tabIndex})},e.prototype.getScriptSources=function(){var i,o,s=(i=this.props.scriptLoading)===null||i===void 0?void 0:i.async,l=(o=this.props.scriptLoading)===null||o===void 0?void 0:o.defer;if(this.props.tinymceScriptSrc!==void 0)return typeof this.props.tinymceScriptSrc=="string"?[{src:this.props.tinymceScriptSrc,async:s,defer:l}]:this.props.tinymceScriptSrc.map(function(p){return typeof p=="string"?{src:p,async:s,defer:l}:p});var n=this.props.cloudChannel,c=this.props.apiKey?this.props.apiKey:"no-api-key",d="https://cdn.tiny.cloud/1/".concat(c,"/tinymce/").concat(n,"/tinymce.min.js");return[{src:d,async:s,defer:l}]},e.prototype.getInitialValue=function(){return typeof this.props.initialValue=="string"?this.props.initialValue:typeof this.props.value=="string"?this.props.value:""},e.prototype.bindHandlers=function(i){var o=this;if(this.editor!==void 0){et(this.editor,i,this.props,this.boundHandlers,function(c){return o.props[c]});var s=function(c){return c.onEditorChange!==void 0||c.value!==void 0},l=s(i),n=s(this.props);!l&&n?(this.editor.on(he,this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):l&&!n&&(this.editor.off(he,this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},e.propTypes=Qe,e.defaultProps={cloudChannel:"8"},e})(Y.Component);const Yt=t=>{const e=Ve.c(97),{settings:i}=t,[o,s]=Y.useState("mail"),[l,n]=Y.useState("prospect_welcome"),c=[{key:"prospect_welcome",label:"Email de Bienvenida a Prospectos",variables:["nombre_estudiante","nombre_asesor","email_asesor","telefono_asesor","fecha_registro","url_plataforma"]},{key:"contract_email",label:"Email de Contrato de MatrÃ­cula (con PDF adjunto)",variables:["nombre_estudiante","codigo_matricula","nivel_academico","plan_pago","url_contrato","fecha_actual"]},{key:"contract_signed_student",label:"Email de ConfirmaciÃ³n de Firma (Estudiante)",variables:["nombre_estudiante","codigo_matricula","nivel_academico","plan_pago","fecha_actual"]},{key:"contract_signed_admin",label:"NotificaciÃ³n de Contrato Firmado (Admin)",variables:["nombre_estudiante","codigo_matricula","nivel_academico","plan_pago","asesor","fecha_firma"]},{key:"contract_signed_advisor",label:"NotificaciÃ³n de Contrato Firmado (Asesor)",variables:["nombre_asesor","nombre_estudiante","codigo_matricula","nivel_academico","plan_pago","fecha_firma"]},{key:"student_enrolled",label:"Email de Credenciales para Estudiantes Matriculados",variables:["nombre_estudiante","codigo_matricula","email","contrasena","url_plataforma","nivel_academico","plan_pago"]},{key:"enrollment_verified",label:"Email de MatrÃ­cula Verificada",variables:["nombre_estudiante","codigo_matricula","email","nivel_academico","plan_pago","verificado_por","fecha_verificacion","cantidad_documentos","url_plataforma"]}];let d;e[0]!==i.mail?(d=(i.mail||[]).reduce(dt,{}),e[0]=i.mail,e[1]=d):d=e[1];let p;e[2]!==d?(p={settings:d},e[2]=d,e[3]=p):p=e[3];const m=J(p);let u;e[4]!==i.general?(u=i.general?.find(ut)?.content||"",e[4]=i.general,e[5]=u):u=e[5];let h;e[6]!==u?(h={contract_template:u},e[6]=u,e[7]=h):h=e[7];const g=J(h);let b;e[8]!==i.whatsapp?(b=i.whatsapp?.find(pt)?.content||"",e[8]=i.whatsapp,e[9]=b):b=e[9];let x;e[10]!==i.whatsapp?(x=i.whatsapp?.find(mt)?.content||"",e[10]=i.whatsapp,e[11]=x):x=e[11];let j;e[12]!==b||e[13]!==x?(j={whatsapp_number:b,whatsapp_message:x},e[12]=b,e[13]=x,e[14]=j):j=e[14];const y=J(j);let S;e[15]!==i.general?(S=i.general?.find(ft)?.content||"",e[15]=i.general,e[16]=S):S=e[16];let E;e[17]!==i.general?(E=i.general?.find(ht)?.content||"",e[17]=i.general,e[18]=E):E=e[18];let Z;e[19]!==S||e[20]!==E?(Z={site_name:S,site_description:E},e[19]=S,e[20]=E,e[21]=Z):Z=e[21];const _=J(Z);let T;e[22]!==i.contact?(T=i.contact?.find(gt)?.content||"",e[22]=i.contact,e[23]=T):T=e[23];let ee;e[24]!==T?(ee={support_email:T},e[24]=T,e[25]=ee):ee=e[25];const w=J(ee);let D;e[26]!==i.payment?(D=i.payment?.find(bt)?.content||"7",e[26]=i.payment,e[27]=D):D=e[27];let P;e[28]!==i.payment?(P=i.payment?.find(vt)?.content||"true",e[28]=i.payment,e[29]=P):P=e[29];let te;e[30]!==D||e[31]!==P?(te={plan_change_deadline_days:D,allow_partial_payments:P},e[30]=D,e[31]=P,e[32]=te):te=e[32];const v=J(te);let ne;e[33]===Symbol.for("react.memo_cache_sentinel")?(ne=[{id:"mail",label:"Templates de Email",icon:xe},{id:"contract",label:"Plantilla de Contrato",icon:ye},{id:"whatsapp",label:"ConfiguraciÃ³n WhatsApp",icon:We},{id:"payment",label:"ConfiguraciÃ³n de Pagos",icon:_e},{id:"general",label:"ConfiguraciÃ³n General",icon:Ue},{id:"contact",label:"InformaciÃ³n de Contacto",icon:xe}],e[33]=ne):ne=e[33];const Be=ne;let L,O,I,ae,R,B;if(e[34]!==w||e[35]!==g||e[36]!==_||e[37]!==m||e[38]!==v||e[39]!==y){ae=N=>{N.preventDefault();const C=Object.entries(m.data.settings).map(He=>{const[ve,Ge]=He;return{key:ve,content:Ge,type:"mail",description:ze(ve)}});m.transform(()=>({settings:C})),m.post("/admin/settings",{onSuccess:yt,onError:xt})};let f;e[46]!==y?(f=N=>{N.preventDefault();const C=[{key:"whatsapp_number",content:y.data.whatsapp_number,type:"whatsapp",description:"NÃºmero de WhatsApp para contacto"},{key:"whatsapp_message",content:y.data.whatsapp_message,type:"whatsapp",description:"Mensaje predeterminado de WhatsApp"}];y.transform(()=>({settings:C})),y.post("/admin/settings",{onSuccess:_t})},e[46]=y,e[47]=f):f=e[47],B=f;let $;e[48]!==_?($=N=>{N.preventDefault();const C=[{key:"site_name",content:_.data.site_name,type:"general",description:"Nombre del sitio"},{key:"site_description",content:_.data.site_description,type:"general",description:"DescripciÃ³n del sitio"}];_.transform(()=>({settings:C})),_.post("/admin/settings",{onSuccess:jt})},e[48]=_,e[49]=$):$=e[49],I=$;let ie;e[50]!==w?(ie=N=>{N.preventDefault();const C=[{key:"support_email",content:w.data.support_email,type:"contact",description:"Email de soporte tÃ©cnico para estudiantes"}];w.transform(()=>({settings:C})),w.post("/admin/settings",{onSuccess:wt})},e[50]=w,e[51]=ie):ie=e[51],L=ie;let oe;e[52]!==v?(oe=N=>{N.preventDefault();const C=[{key:"plan_change_deadline_days",content:v.data.plan_change_deadline_days,type:"payment",description:"DÃ­as lÃ­mite desde la matrÃ­cula para cambiar de plan"},{key:"allow_partial_payments",content:v.data.allow_partial_payments,type:"payment",description:"Permitir pagos parciales de cualquier monto aplicados al total"}];v.transform(()=>({settings:C})),v.post("/admin/settings",{onSuccess:Nt,onError:Ct})},e[52]=v,e[53]=oe):oe=e[53],R=oe;let se;e[54]!==g?(se=N=>{N.preventDefault();const C=[{key:"contract_template",content:g.data.contract_template,type:"general",description:"Plantilla de contrato digital para estudiantes"}];g.transform(()=>({settings:C})),g.post("/admin/settings",{onSuccess:St,onError:Et})},e[54]=g,e[55]=se):se=e[55],O=se;const ze=kt;e[34]=w,e[35]=g,e[36]=_,e[37]=m,e[38]=v,e[39]=y,e[40]=L,e[41]=O,e[42]=I,e[43]=ae,e[44]=R,e[45]=B}else L=e[40],O=e[41],I=e[42],ae=e[43],R=e[44],B=e[45];const ce=Ke;let A;e[56]===Symbol.for("react.memo_cache_sentinel")?(A=a.jsx(qe,{title:"Configuraciones"}),e[56]=A):A=e[56];const Ae="p-6 space-y-6";let M;e[57]===Symbol.for("react.memo_cache_sentinel")?(M=a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-3 bg-gradient-to-br from-[#073372] to-[#17BC91] rounded-xl shadow-lg",children:a.jsx(_e,{className:"h-7 w-7 text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Configuraciones del Sistema"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Administra templates de email, WhatsApp y configuraciÃ³n general"})]})]}),e[57]=M):M=e[57];const Me="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden";let F;e[58]!==o?(F=a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("div",{className:"flex space-x-1 p-2",children:Be.map(f=>{const $=f.icon;return a.jsxs("button",{onClick:()=>s(f.id),className:`flex items-center px-6 py-3 rounded-lg font-medium transition-all ${o===f.id?"bg-gradient-to-r from-[#073372] to-[#17BC91] text-white shadow-md":"text-gray-600 hover:bg-gray-50"}`,children:[a.jsx($,{className:"h-5 w-5 mr-2"}),f.label]},f.id)})})}),e[58]=o,e[59]=F):F=e[59];const Fe="p-8",de=o==="mail"&&a.jsxs("form",{onSubmit:ae,className:"space-y-6",children:[a.jsx("div",{children:a.jsx($e,{label:"Seleccionar Template de Email",value:l,onChange:f=>n(f.target.value),required:!0,children:c.map(Tt)})}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:c.find(f=>f.key===l)?.label})}),a.jsx(Le,{apiKey:"0nai4nwo1mc0dumfyzl8re1odbzzr1fz4gfwzpgu5ghdnu4n",value:m.data.settings[l]||"",onEditorChange:f=>{m.setData("settings",{...m.data.settings,[l]:f})},init:{height:500,menubar:"file edit view insert format tools table help",plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","help","wordcount","visualchars","pagebreak"],toolbar:"undo redo | formatselect | bold italic underline forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media | table tabledelete | code | removeformat | help",image_title:!0,image_advtab:!0,automatic_uploads:!0,file_picker_types:"image",images_upload_url:"/admin/upload-image",relative_urls:!1,remove_script_host:!1,convert_urls:!0,extended_valid_elements:"img[data-src|src|alt|style|width|height|class]",images_upload_handler:Pt,content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }",setup:Ot}},l),a.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[a.jsx("p",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Variables disponibles para este template:"}),a.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs text-blue-800",children:c.find(f=>f.key===l)?.variables.map(It)})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{type:"submit",disabled:m.processing,className:"inline-flex items-center px-6 py-3 bg-[#073372] hover:bg-[#17BC91] text-white font-medium rounded-lg transition-all shadow-md hover:shadow-lg disabled:opacity-50",children:[a.jsx(X,{className:"h-5 w-5 mr-2"}),m.processing?"Guardando...":"Guardar Template"]})})]});let z;e[60]!==o||e[61]!==B||e[62]!==y?(z=o==="whatsapp"&&a.jsxs("form",{onSubmit:B,className:"space-y-6",children:[a.jsx(le,{label:"NÃºmero de WhatsApp",type:"text",value:y.data.whatsapp_number,onChange:f=>y.setData("whatsapp_number",f.target.value),helperText:"Ejemplo: +51987654321",variant:"outlined"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mensaje Predeterminado"}),a.jsx("textarea",{value:y.data.whatsapp_message,onChange:f=>y.setData("whatsapp_message",f.target.value),rows:6,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#17BC91] focus:border-transparent transition-all",placeholder:"Hola! Estoy interesado en informaciÃ³n sobre los cursos..."}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Este mensaje se usarÃ¡ como plantilla para contacto por WhatsApp"})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{type:"submit",disabled:y.processing,className:"inline-flex items-center px-6 py-3 bg-[#073372] hover:bg-[#17BC91] text-white font-medium rounded-lg transition-all shadow-md hover:shadow-lg disabled:opacity-50",children:[a.jsx(X,{className:"h-5 w-5 mr-2"}),y.processing?"Guardando...":"Guardar ConfiguraciÃ³n"]})})]}),e[60]=o,e[61]=B,e[62]=y,e[63]=z):z=e[63];let H;e[64]!==o||e[65]!==g||e[66]!==O?(H=o==="contract"&&a.jsxs("form",{onSubmit:O,className:"space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 border-2 border-emerald-200 rounded-xl p-6 mb-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-2 flex items-center gap-2",children:[a.jsx(ye,{className:"w-6 h-6 text-emerald-600"}),"ðŸ“„ Plantilla de Contrato Digital"]}),a.jsxs("p",{className:"text-sm text-slate-700",children:["Esta plantilla se genera automÃ¡ticamente cuando un prospecto pasa de ",a.jsx("strong",{children:'"ReuniÃ³n Realizada"'})," a ",a.jsx("strong",{children:'"Pago Por Verificar"'}),". El estudiante recibirÃ¡ un email con un enlace para revisar y aceptar el contrato digitalmente."]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Contenido de la Plantilla de Contrato"})}),a.jsx(Le,{apiKey:"0nai4nwo1mc0dumfyzl8re1odbzzr1fz4gfwzpgu5ghdnu4n",value:g.data.contract_template,onEditorChange:f=>{g.setData("contract_template",f)},init:{height:600,menubar:"file edit view insert format tools table help",plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","help","wordcount","visualchars","pagebreak"],toolbar:"undo redo | formatselect | bold italic underline forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media | table tabledelete | code | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px; padding: 20px; }"}}),a.jsxs("div",{className:"p-4 bg-emerald-50 border-2 border-emerald-200 rounded-lg",children:[a.jsx("h4",{className:"font-semibold text-emerald-900 mb-2",children:"Variables Disponibles:"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 text-sm",children:[a.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{nombre_estudiante}}"}),a.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{documento_estudiante}}"}),a.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{email_estudiante}}"}),a.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{telefono_estudiante}}"}),a.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{nivel_academico}}"}),a.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{plan_pago}}"}),a.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{monto_total}}"}),a.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{fecha_matricula}}"}),a.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{codigo_matricula}}"}),a.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{usuario}}"}),a.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{contrasena}}"}),a.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{nombre_apoderado}}"}),a.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{documento_apoderado}}"}),a.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{fecha_actual}}"})]}),a.jsxs("p",{className:"text-sm text-emerald-800 mt-3",children:[a.jsx("strong",{children:"Nota:"})," Estas variables se reemplazarÃ¡n automÃ¡ticamente con los datos del estudiante al generar el contrato."]})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{type:"submit",disabled:g.processing,className:"inline-flex items-center px-6 py-3 bg-[#073372] hover:bg-[#17BC91] text-white font-medium rounded-lg transition-all shadow-md hover:shadow-lg disabled:opacity-50",children:[a.jsx(X,{className:"h-5 w-5 mr-2"}),g.processing?"Guardando...":"Guardar Plantilla de Contrato"]})})]}),e[64]=o,e[65]=g,e[66]=O,e[67]=H):H=e[67];let G;e[68]!==o||e[69]!==_||e[70]!==I?(G=o==="general"&&a.jsxs("form",{onSubmit:I,className:"space-y-6",children:[a.jsx(le,{label:"Nombre del Sitio",type:"text",value:_.data.site_name,onChange:f=>_.setData("site_name",f.target.value),variant:"outlined"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"DescripciÃ³n del Sitio"}),a.jsx("textarea",{value:_.data.site_description,onChange:f=>_.setData("site_description",f.target.value),rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#17BC91] focus:border-transparent transition-all",placeholder:"DescripciÃ³n breve del sitio..."})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{type:"submit",disabled:_.processing,className:"inline-flex items-center px-6 py-3 bg-[#073372] hover:bg-[#17BC91] text-white font-medium rounded-lg transition-all shadow-md hover:shadow-lg disabled:opacity-50",children:[a.jsx(X,{className:"h-5 w-5 mr-2"}),_.processing?"Guardando...":"Guardar ConfiguraciÃ³n"]})})]}),e[68]=o,e[69]=_,e[70]=I,e[71]=G):G=e[71];let V;e[72]!==o||e[73]!==w||e[74]!==L?(V=o==="contact"&&a.jsxs("form",{onSubmit:L,className:"space-y-6",children:[a.jsx(le,{label:"Email de Soporte",type:"email",value:w.data.support_email,onChange:f=>w.setData("support_email",f.target.value),helperText:"Email que se mostrarÃ¡ a los estudiantes para soporte tÃ©cnico",variant:"outlined"}),a.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:a.jsxs("p",{className:"text-sm text-blue-900",children:[a.jsx("strong",{children:"Nota:"})," Este email se muestra en las notificaciones y modales de confirmaciÃ³n de documentos para que los estudiantes puedan contactar con soporte."]})}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{type:"submit",disabled:w.processing,className:"inline-flex items-center px-6 py-3 bg-[#073372] hover:bg-[#17BC91] text-white font-medium rounded-lg transition-all shadow-md hover:shadow-lg disabled:opacity-50",children:[a.jsx(X,{className:"h-5 w-5 mr-2"}),w.processing?"Guardando...":"Guardar Email"]})})]}),e[72]=o,e[73]=w,e[74]=L,e[75]=V):V=e[75];let q;e[76]!==o||e[77]!==R||e[78]!==v?(q=o==="payment"&&a.jsxs("form",{onSubmit:R,className:"space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-xl p-6 mb-6",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"âš™ï¸ Configuraciones de Sistema de Pagos"}),a.jsx("p",{className:"text-sm text-slate-700",children:"Estas configuraciones afectan el comportamiento del sistema de pagos y cambios de plan para todos los estudiantes."})]}),a.jsxs("div",{children:[a.jsx(le,{label:"DÃ­as lÃ­mite para cambiar de plan",type:"number",min:"0",max:"30",value:v.data.plan_change_deadline_days,onChange:f=>v.setData("plan_change_deadline_days",f.target.value),helperText:"NÃºmero de dÃ­as desde la matrÃ­cula en que el estudiante puede cambiar su plan de pago (ej: 7 dÃ­as)",variant:"outlined"}),a.jsx("div",{className:"mt-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:a.jsxs("p",{className:"text-xs text-yellow-900",children:[a.jsx("strong",{children:"âš ï¸ Importante:"})," Solo los estudiantes que no tengan cuotas pagadas o verificadas podrÃ¡n cambiar de plan, incluso dentro de este perÃ­odo."]})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Permitir pagos parciales"}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"allow_partial_payments",value:"true",checked:v.data.allow_partial_payments==="true",onChange:f=>v.setData("allow_partial_payments",f.target.value),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-gray-700",children:"SÃ­, permitir pagos parciales"})]}),a.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"allow_partial_payments",value:"false",checked:v.data.allow_partial_payments==="false",onChange:f=>v.setData("allow_partial_payments",f.target.value),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-gray-700",children:"No, solo pagos completos"})]})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Si se habilita, los estudiantes podrÃ¡n pagar cualquier monto que deseen aplicado al total de su plan de pagos."})]}),a.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-lg",children:[a.jsx("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"ðŸ“Š Resumen de ConfiguraciÃ³n Actual:"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-slate-600",children:"DÃ­as para cambiar plan:"}),a.jsxs("span",{className:"font-bold text-slate-900",children:[v.data.plan_change_deadline_days," dÃ­as"]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-slate-600",children:"Pagos parciales:"}),a.jsx("span",{className:`font-bold ${v.data.allow_partial_payments==="true"?"text-green-600":"text-red-600"}`,children:v.data.allow_partial_payments==="true"?"âœ“ Habilitados (monto libre)":"âœ— Deshabilitados"})]})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{type:"submit",disabled:v.processing,className:"inline-flex items-center px-6 py-3 bg-[#073372] hover:bg-[#17BC91] text-white font-medium rounded-lg transition-all shadow-md hover:shadow-lg disabled:opacity-50",children:[a.jsx(X,{className:"h-5 w-5 mr-2"}),v.processing?"Guardando...":"Guardar ConfiguraciÃ³n de Pagos"]})})]}),e[76]=o,e[77]=R,e[78]=v,e[79]=q):q=e[79];let K;e[80]!==de||e[81]!==z||e[82]!==H||e[83]!==G||e[84]!==V||e[85]!==q?(K=a.jsxs("div",{className:Fe,children:[de,z,H,G,V,q]}),e[80]=de,e[81]=z,e[82]=H,e[83]=G,e[84]=V,e[85]=q,e[86]=K):K=e[86];let W;e[87]!==F||e[88]!==K?(W=a.jsxs("div",{className:Me,children:[F,K]}),e[87]=F,e[88]=K,e[89]=W):W=e[89];let U;e[90]!==M||e[91]!==W?(U=a.jsxs("div",{className:Ae,children:[M,W]}),e[90]=M,e[91]=W,e[92]=U):U=e[92];let re;return e[93]!==ce||e[94]!==A||e[95]!==U?(re=a.jsxs(ce,{children:[A,U]}),e[93]=ce,e[94]=A,e[95]=U,e[96]=re):re=e[96],re};function dt(t,e){return t[e.key]=e.content,t}function ut(t){return t.key==="contract_template"}function pt(t){return t.key==="whatsapp_number"}function mt(t){return t.key==="whatsapp_message"}function ft(t){return t.key==="site_name"}function ht(t){return t.key==="site_description"}function gt(t){return t.key==="support_email"}function bt(t){return t.key==="plan_change_deadline_days"}function vt(t){return t.key==="allow_partial_payments"}function yt(){k.success("ConfiguraciÃ³n guardada",{description:"Los templates de email han sido actualizados",duration:4e3})}function xt(){k.error("Error",{description:"No se pudieron guardar las configuraciones",duration:4e3})}function _t(){k.success("ConfiguraciÃ³n guardada",{description:"La configuraciÃ³n de WhatsApp ha sido actualizada",duration:4e3})}function jt(){k.success("ConfiguraciÃ³n guardada",{description:"La configuraciÃ³n general ha sido actualizada",duration:4e3})}function wt(){k.success("ConfiguraciÃ³n guardada",{description:"El email de soporte ha sido actualizado",duration:4e3})}function Nt(){k.success("ConfiguraciÃ³n guardada",{description:"Las configuraciones de pago han sido actualizadas",duration:4e3})}function Ct(){k.error("Error",{description:"No se pudieron guardar las configuraciones",duration:4e3})}function St(){k.success("ConfiguraciÃ³n guardada",{description:"La plantilla de contrato ha sido actualizada",duration:4e3})}function Et(){k.error("Error",{description:"No se pudo guardar la plantilla de contrato",duration:4e3})}function kt(t){return{welcome_email:"Email de bienvenida para nuevos usuarios",payment_reminder:"Recordatorio de pago pendiente",enrollment_confirmation:"ConfirmaciÃ³n de matrÃ­cula"}[t]||""}function Tt(t){return a.jsx("option",{value:t.key,children:t.label},t.key)}function Dt(t){return t.json()}function Pt(t){return new Promise((e,i)=>{const o=new FormData;o.append("file",t.blob(),t.filename()),fetch("/admin/upload-image",{method:"POST",body:o,headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}}).then(Dt).then(s=>{s.location?e(s.location):i("Error al subir imagen")}).catch(()=>{i("Error al subir imagen")})})}function Lt(t){return t=t.replace(/src="[^"]*({{[^}]+}})"/g,'src="$1"'),t=t.replace(/src="[^"]*(https?:\/\/[^"}]+)"/g,'src="$1"'),t=t.replace(/href="[^"]*({{[^}]+}})"/g,'href="$1"'),t=t.replace(/href="[^"]*(https?:\/\/[^"}]+)"/g,'href="$1"'),t}function Ot(t){const e=Lt;t.on("BeforeSetContent",function(i){i.content&&typeof i.content=="string"&&(i.content=e(i.content))}),t.on("PostProcess",function(i){i.content&&typeof i.content=="string"&&(i.content=e(i.content))})}function It(t){return a.jsx("code",{className:"bg-white px-2 py-1 rounded",children:`{{${t}}}`},t)}export{Yt as default};
