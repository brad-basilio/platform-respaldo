import{r as h,j as e,a as T}from"./app-DloPvlvC.js";import{A}from"./AuthenticatedLayout-DgVN5Dag.js";import{A as R,t as M,M as z,a as E}from"./index.esm-D0xRZAVP.js";import{S as v}from"./sweetalert2.esm.all-NNS-RXd7.js";import{I as $}from"./input-B9jnIT_9.js";/* empty css                       */import{C as F}from"./clock-DyFYOB_R.js";import{E as L}from"./eye-BPBA5_fh.js";import{U as B}from"./users-DCYUnirn.js";import{C as y}from"./circle-alert-dUvududk.js";import{C}from"./circle-check-big-Ch2qgecD.js";import{S as U}from"./search-DjpqH3yk.js";import{C as D}from"./circle-x-BngfkSnE.js";import{F as G}from"./file-text-DpeTZauG.js";import{D as q}from"./dollar-sign-BE5BHb3r.js";import{C as I}from"./calendar-RCdIpxVe.js";import{D as H}from"./download-t6lXlwLV.js";/* empty css            */import"./button-CxJ5Uh1A.js";import"./dropdown-menu-Dy9AY3D5.js";import"./createLucideIcon-isoGPNkP.js";import"./index-BJ4GAdsQ.js";import"./index-DAWLt_Y-.js";import"./badge-D7WurQdG.js";z.registerModules([E]);const O=({student:P,enrollment:l,onClose:d,onVerifyVoucher:j})=>{const[b,f]=h.useState(null),N=async r=>{f(r);try{await j(r,"approve")}finally{f(null)}},S=async r=>{const n=await v.fire({title:"Rechazar Voucher",input:"textarea",inputLabel:"Motivo del rechazo",inputPlaceholder:"Explica por qu√© se rechaza este voucher...",inputAttributes:{"aria-label":"Motivo del rechazo"},showCancelButton:!0,confirmButtonText:"Rechazar",cancelButtonText:"Cancelar",confirmButtonColor:"#ef4444",cancelButtonColor:"#6b7280",inputValidator:i=>{if(!i)return"Debes especificar un motivo"}});if(n.isConfirmed&&n.value){f(r);try{await j(r,"reject",n.value)}finally{f(null)}}},m=r=>{if(r.status==="verified")return e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(C,{className:"w-3 h-3 mr-1"}),"Verificado"]});if(r.status==="paid")return e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 animate-pulse",children:[e.jsx(F,{className:"w-3 h-3 mr-1"}),"Pendiente Verificaci√≥n"]});if(r.status==="pending"||r.status==="overdue"){const n=r.due_date||r.dueDate||"";let i;if(typeof n=="string"&&n.includes("-")){const[a,x,k]=n.split("-").map(Number);i=new Date(a,(x||1)-1,k||1)}else i=new Date(n);const u=new Date,g=new Date(u.getFullYear(),u.getMonth(),u.getDate()),o=r.daysUntilDue,p=r.daysUntilGraceLimit;let c=typeof o=="number"?o:Math.round((i.getTime()-g.getTime())/(1e3*60*60*24));const s=l.paymentPlan?.gracePeriodDays||l.paymentPlan?.grace_period_days||0;let t=typeof p=="number"?p:(function(){const a=new Date(i);return a.setDate(a.getDate()+s),Math.round((a.getTime()-g.getTime())/(1e3*60*60*24))})();return console.log("üîç Cashier Debug - Cuota:",{dueDateStr:n,dueDate:i.toISOString().split("T")[0],today:g.toISOString().split("T")[0],gracePeriodDays:s,daysUntilDue:c,daysUntilGraceLimit:t,moraEnDias:Math.abs(t),usingServer:typeof p=="number"}),c<0&&t>=0&&s>0?e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:[e.jsx(y,{className:"w-3 h-3 mr-1"}),"Per√≠odo de Gracia (",t,"d)"]}):t<0?e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(D,{className:"w-3 h-3 mr-1"}),"Vencido con Mora (",Math.abs(t),"d)"]}):e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(y,{className:"w-3 h-3 mr-1"}),"Pendiente (",c>0?`${c}d`:"Vence hoy",")"]})}return e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[e.jsx(y,{className:"w-3 h-3 mr-1"}),"Desconocido"]})};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl max-w-6xl w-full max-h-[90vh] overflow-hidden shadow-2xl",children:[e.jsxs("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-600 px-8 py-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Cronograma de Pagos"}),e.jsxs("p",{className:"text-emerald-100 text-sm",children:[P.name," - ",P.enrollmentCode]})]}),e.jsx("button",{onClick:d,className:"text-white hover:bg-white/20 rounded-full p-2 transition-colors",children:e.jsx(D,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-8 overflow-y-auto max-h-[calc(90vh-200px)]",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-blue-600 font-semibold uppercase",children:"Total Plan"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-900 mt-1",children:["S/ ",((l.enrollment_fee||0)+(l.totalPending||0)+(l.totalPaid||0)).toFixed(2)]})]}),e.jsx(G,{className:"h-8 w-8 text-blue-600 opacity-50"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-green-600 font-semibold uppercase",children:"Pagado"}),e.jsxs("p",{className:"text-2xl font-bold text-green-900 mt-1",children:["S/ ",((l.enrollment_fee||0)+(l.totalPaid||0)).toFixed(2)]})]}),e.jsx(C,{className:"h-8 w-8 text-green-600 opacity-50"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl p-4 border border-yellow-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-yellow-600 font-semibold uppercase",children:"Pendiente"}),e.jsxs("p",{className:"text-2xl font-bold text-yellow-900 mt-1",children:["S/ ",(l.totalPending||0).toFixed(2)]})]}),e.jsx(y,{className:"h-8 w-8 text-yellow-600 opacity-50"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4 border border-purple-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-purple-600 font-semibold uppercase",children:"Progreso"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-900 mt-1",children:[(l.paymentProgress||0).toFixed(2),"%"]})]}),e.jsx(q,{className:"h-8 w-8 text-purple-600 opacity-50"})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Cuotas del Plan"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Cuota"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Fecha Vencimiento"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Monto Base"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Mora"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Total a Pagar"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Pagado"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Voucher"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:l.installments&&l.installments.length>0?l.installments.map(r=>{const n=r.installment_number||r.installmentNumber||0,i=r.due_date||r.dueDate||"";let u=new Date(i);if(typeof i=="string"&&i.includes("-")){const[t,a,x]=i.split("-").map(Number);u=new Date(t,(a||1)-1,x||1)}const g=r.paid_amount||r.paidAmount||0,o=r.late_fee||r.lateFee||0,p=r.total_due||r.totalDue||r.amount+o,c=r.verifiedBy||r.verified_by,s=r.vouchers||[];return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 font-semibold text-sm",children:n})}),e.jsxs("span",{className:"ml-3 text-sm font-medium text-gray-900",children:["Cuota ",n]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[e.jsx(I,{className:"w-4 h-4 mr-2 text-gray-400"}),u.toLocaleDateString("es-PE",{year:"numeric",month:"short",day:"numeric"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["S/ ",r.amount.toFixed(2)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o>0?e.jsxs("span",{className:"text-sm font-bold text-red-600",children:["+ S/ ",o.toFixed(2)]}):e.jsx("span",{className:"text-sm text-gray-400",children:"‚Äî"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:`text-sm font-bold ${o>0?"text-red-600":"text-gray-900"}`,children:["S/ ",p.toFixed(2)]}),o>0&&e.jsx("span",{className:"text-xs text-red-500 italic",children:"(incluye mora)"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:"text-sm font-semibold text-green-600",children:["S/ ",g.toFixed(2)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m(r)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s&&s.length>0?e.jsx("div",{className:"space-y-1",children:s.map(t=>{const a=t.status||"pending";return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("a",{href:t.voucher_url||"#",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:[e.jsx(H,{className:"w-4 h-4 mr-1"}),"Ver"]}),a==="approved"&&e.jsx("span",{className:"text-xs px-2 py-1 bg-green-100 text-green-800 rounded-full",children:"Aprobado"}),a==="pending"&&e.jsx("span",{className:"text-xs px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full animate-pulse",children:"Pendiente"}),a==="rejected"&&e.jsx("span",{className:"text-xs px-2 py-1 bg-red-100 text-red-800 rounded-full",children:"Rechazado"})]},t.id)})}):e.jsx("span",{className:"text-sm text-gray-400",children:"Sin voucher"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s&&s.length>0&&s.some(t=>t.status==="pending")?e.jsx("div",{className:"flex items-center space-x-2",children:s.filter(t=>t.status==="pending").map(t=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>N(t.id),disabled:b===t.id,className:"inline-flex items-center px-3 py-1.5 bg-emerald-600 hover:bg-emerald-700 text-white text-xs font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:b===t.id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin mr-1"}),"Procesando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"w-3 h-3 mr-1"}),"Aprobar"]})}),e.jsxs("button",{onClick:()=>S(t.id),disabled:b===t.id,className:"inline-flex items-center px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white text-xs font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(D,{className:"w-3 h-3 mr-1"}),"Rechazar"]})]},t.id))}):r.status==="verified"&&c?e.jsxs("div",{className:"text-xs text-gray-500",children:[e.jsx("div",{children:"Verificado por:"}),e.jsx("div",{className:"font-medium text-gray-700",children:c.name})]}):e.jsx("span",{className:"text-sm text-gray-400",children:"‚Äî"})})]},r.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"px-6 py-8 text-center text-gray-500",children:"No hay cuotas registradas"})})})]})})]})]}),e.jsx("div",{className:"bg-gray-50 px-8 py-4 border-t border-gray-200 flex justify-end",children:e.jsx("button",{onClick:d,className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-2.5 rounded-xl font-medium transition-colors",children:"Cerrar"})})]})})},fe=({students:P=[]})=>{const[l]=h.useState(P??[]),[d,j]=h.useState(null),[b,f]=h.useState(!1),[N,S]=h.useState(""),[m,r]=h.useState("all"),n=async s=>{try{console.log("üìã Abriendo cronograma para estudiante:",s.id,s.name);const t=await T.get(`/cashier/students/${s.id}/enrollment`);if(console.log("‚úÖ Respuesta del servidor:",t.data),t.data.success)j({...s,enrollment:t.data.enrollment}),f(!0);else throw new Error(t.data.message||"No se pudo cargar el cronograma")}catch(t){console.error("‚ùå Error al cargar cronograma:",t),console.error("Error response:",t.response?.data),await v.fire({title:"Error",text:t.response?.data?.message||"No se pudo cargar el cronograma de pagos",icon:"error",confirmButtonColor:"#ef4444"})}},i=async(s,t,a)=>{const x=t==="approve"?"¬øAprobar Voucher?":"¬øRechazar Voucher?",k=t==="approve"?"¬øConfirmas que el voucher de pago es v√°lido?":"El voucher ser√° rechazado y el estudiante deber√° subir uno nuevo.";if(!(t==="reject"&&a)){if(t==="approve"&&!(await v.fire({title:x,html:`
          <div class="text-left">
            <p class="text-gray-700 mb-3">${k}</p>
            <div class="bg-blue-50 border-l-4 border-blue-500 p-4 rounded">
              <p class="text-sm text-blue-800">
                <strong>Importante:</strong> Al aprobar este voucher:
              </p>
              <ul class="text-sm text-blue-700 mt-2 space-y-1 list-disc list-inside">
                <li>Se marcar√° el voucher como aprobado</li>
                <li>Se actualizar√° la cuota correspondiente</li>
                <li>Se registrar√° tu nombre como revisor</li>
              </ul>
            </div>
          </div>
        `,icon:"question",showCancelButton:!0,confirmButtonColor:"#10b981",cancelButtonColor:"#6b7280",confirmButtonText:"S√≠, Aprobar",cancelButtonText:"Cancelar",reverseButtons:!0})).isConfirmed)return}try{const w=await T.post(`/cashier/vouchers/${s}/verify`,{action:t,rejection_reason:a});if(w.data.success){if(d?.enrollment){const V=await T.get(`/cashier/students/${d.id}/enrollment`);V.data.success&&j({...d,enrollment:V.data.enrollment})}await v.fire({title:t==="approve"?"¬°Aprobado!":"Rechazado",text:w.data.message,icon:"success",confirmButtonColor:"#10b981",timer:2e3,timerProgressBar:!0})}}catch(w){console.error("Error al verificar voucher:",w),await v.fire({title:"Error",text:"No se pudo procesar la verificaci√≥n del voucher",icon:"error",confirmButtonColor:"#ef4444"})}},u=h.useMemo(()=>{let s=l.filter(t=>t.enrollmentVerified);return m==="pending"?s=s.filter(t=>t.enrollment&&(t.enrollment.paymentProgress||0)<100):m==="completed"&&(s=s.filter(t=>t.enrollment&&t.enrollment.paymentProgress===100)),s},[l,m]),g=h.useMemo(()=>[{headerName:"Estudiante",field:"name",minWidth:300,filter:"agTextColumnFilter",cellRenderer:s=>{const t=s.data;return e.jsxs("div",{className:"flex items-center py-2 w-full h-full",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-white text-sm font-semibold",children:t.name.split(" ").map(a=>a[0]).join("")})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name}),e.jsx("div",{className:"text-xs text-gray-500",children:t.email})]})]})}},{headerName:"C√≥digo",field:"enrollmentCode",width:150,filter:"agTextColumnFilter",cellRenderer:s=>e.jsx("div",{className:"flex items-center h-full",children:e.jsx("span",{className:"text-sm font-mono text-gray-900",children:s.value})})},{headerName:"Plan",width:200,filter:"agTextColumnFilter",cellRenderer:s=>{const t=s.data;return e.jsx("div",{className:"flex items-center h-full",children:e.jsx("span",{className:"text-sm text-gray-900",children:t.paymentPlan?.name||t.enrollment?.paymentPlan?.name||"Sin plan"})})}},{headerName:"Progreso de Pagos",width:250,cellRenderer:s=>{const t=s.data,a=t.enrollment?.paymentProgress||0;return e.jsxs("div",{className:"flex flex-col justify-center h-full space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs font-medium text-gray-600",children:[a.toFixed(0),"% completado"]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["S/ ",((t.enrollment?.totalPaid||0)+(t.enrollment?.enrollment_fee||0)).toFixed(2)]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all ${a===100?"bg-green-500":a>=50?"bg-blue-500":"bg-yellow-500"}`,style:{width:`${a}%`}})})]})}},{headerName:"Pendientes Pago",width:140,cellRenderer:s=>{const a=s.data.enrollment?.installments?.filter(x=>x.status==="pending"||x.status==="overdue").length||0;return e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${a===0?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:[a," ",a===1?"cuota":"cuotas"]})})}},{headerName:"Por Verificar",width:140,cellRenderer:s=>{const a=s.data.enrollment?.installments?.filter(x=>x.status==="paid").length||0;return e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${a===0?"bg-gray-100 text-gray-600":"bg-blue-100 text-blue-800 animate-pulse"}`,children:[e.jsx(F,{className:"w-3 h-3 mr-1"}),a," ",a===1?"voucher":"vouchers"]})})}},{headerName:"Acciones",width:120,sortable:!1,filter:!1,cellRenderer:s=>{const t=s.data;return e.jsx("div",{className:"flex items-center justify-center space-x-2 h-full",children:e.jsxs("button",{onClick:()=>n(t),className:"inline-flex items-center px-3 py-1.5 bg-emerald-600 hover:bg-emerald-700 text-white text-sm font-medium rounded-lg transition-colors",title:"Ver cronograma",children:[e.jsx(L,{className:"h-4 w-4 mr-1"}),"Cronograma"]})})}}],[]),o=l.filter(s=>s.enrollmentVerified),p=o.filter(s=>s.enrollment&&(s.enrollment.paymentProgress||0)<100),c=o.filter(s=>s.enrollment&&s.enrollment.paymentProgress===100);return e.jsxs(A,{children:[e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Control de Pagos"}),e.jsx("p",{className:"text-gray-600",children:"Gestiona y verifica los pagos de estudiantes matriculados"})]}),e.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 text-white px-6 py-3 rounded-xl shadow-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold",children:o.length}),e.jsx("div",{className:"text-sm opacity-90",children:"Estudiantes"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Total Estudiantes"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:o.length})]}),e.jsx(B,{className:"h-10 w-10 text-emerald-600"})]})}),e.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Pagos Pendientes"}),e.jsx("p",{className:"text-3xl font-bold text-yellow-600 mt-1",children:p.length})]}),e.jsx(y,{className:"h-10 w-10 text-yellow-600"})]})}),e.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Pagos Completos"}),e.jsx("p",{className:"text-3xl font-bold text-green-600 mt-1",children:c.length})]}),e.jsx(C,{className:"h-10 w-10 text-green-600"})]})}),e.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Por Verificar"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600 mt-1",children:l.reduce((s,t)=>s+(t.enrollment?.installments?.filter(a=>a.status==="paid").length||0),0)})]}),e.jsx(F,{className:"h-10 w-10 text-blue-600"})]})})]}),e.jsxs("div",{className:"relative",children:[e.jsx($,{type:"text",label:"Buscar por nombre, email, c√≥digo, plan...",value:N,onChange:s=>S(s.target.value),icon:e.jsx(U,{className:"w-4 h-4"}),className:"pr-10"}),N&&e.jsx("button",{onClick:()=>S(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors z-20",children:e.jsx(D,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-1 inline-flex",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>r("all"),className:`px-6 py-3 rounded-lg font-medium transition-all ${m==="all"?"bg-gradient-to-r from-emerald-500 to-teal-500 text-white shadow-md":"text-gray-600 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx("span",{children:"Todos"}),e.jsx("span",{className:"bg-white/20 px-2 py-0.5 rounded-full text-xs",children:o.length})]})}),e.jsx("button",{onClick:()=>r("pending"),className:`px-6 py-3 rounded-lg font-medium transition-all ${m==="pending"?"bg-gradient-to-r from-yellow-500 to-orange-500 text-white shadow-md":"text-gray-600 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(y,{className:"h-4 w-4"}),e.jsx("span",{children:"Con Pagos Pendientes"}),e.jsx("span",{className:"bg-white/20 px-2 py-0.5 rounded-full text-xs",children:p.length})]})}),e.jsx("button",{onClick:()=>r("completed"),className:`px-6 py-3 rounded-lg font-medium transition-all ${m==="completed"?"bg-gradient-to-r from-green-500 to-emerald-500 text-white shadow-md":"text-gray-600 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(C,{className:"h-4 w-4"}),e.jsx("span",{children:"Pagos Completos"}),e.jsx("span",{className:"bg-white/20 px-2 py-0.5 rounded-full text-xs",children:c.length})]})})]})}),e.jsx("div",{className:"ag-theme-quartz",style:{height:"600px",width:"100%"},children:e.jsx(R,{theme:M,rowData:u,columnDefs:g,quickFilterText:N,defaultColDef:{sortable:!0,filter:!0,resizable:!0,flex:1,minWidth:100},pagination:!0,paginationPageSize:10,paginationPageSizeSelector:[10,20,50,100],rowSelection:{mode:"singleRow"},animateRows:!0,domLayout:"normal",rowHeight:70,headerHeight:48,suppressCellFocus:!0,rowClass:"hover:bg-gray-50"})})]}),b&&d&&d.enrollment&&e.jsx(O,{student:d,enrollment:d.enrollment,onClose:()=>f(!1),onVerifyVoucher:i})]})};export{fe as default};
