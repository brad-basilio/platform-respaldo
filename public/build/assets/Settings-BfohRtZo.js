import{r as j,c as Qe,j as e,a as se,u as $,H as Je}from"./app-C6YE5T--.js";import{A as Ze}from"./AuthenticatedLayout-_rPooCV6.js";import{I as k,S as ea}from"./input-BvfI1Hj0.js";import{U as aa,t as N,f as Te,g as ta,h as Pe,i as ra,j as sa,k as na,l as ne,m as ia,d as U}from"./DocumentConfirmationModal-CZV_kU00.js";import{S as oa}from"./Select2-wH7_qfRm.js";import{c as he}from"./button-6tCHLMme.js";import{C as la}from"./circle-check-BGJojvxf.js";import{F as da}from"./file-image-DAyVmioI.js";import{X as Ne}from"./x-sHO0ZKp4.js";import{T as ca}from"./textarea-DoCIIMJM.js";import{C as ge}from"./credit-card-MlkR9AZT.js";import{P as De}from"./plus-CfEZEY2X.js";import{c as pa}from"./createLucideIcon-BGmV2zCp.js";import{T as qe}from"./trash-2-CnhkHnxh.js";import{B as fe}from"./building-2-DUXZIx2Z.js";import{S as Ae}from"./save-DRH0JRqc.js";/* empty css            */import"./dropdown-menu-uD6b7PPU.js";import"./index-BgNR7j3l.js";import"./index-CAKlQ3OI.js";import"./index-rSn7b1lN.js";import"./badge-DHSqOQzH.js";import"./triangle-alert-CK3NKnUG.js";import"./circle-check-big-WFnOe-g7.js";import"./clock-BWTYdOlS.js";import"./index-CnyDuYXe.js";import"./clsx-B-dksMZM.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],ze=pa("Pen",ua);var be={exports:{}},ve,Re;function ma(){if(Re)return ve;Re=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ve=n,ve}var ye,Me;function ha(){if(Me)return ye;Me=1;var n=ma();function a(){}function l(){}return l.resetWarningCache=a,ye=function(){function o(r,d,m,g,x,f){if(f!==n){var _=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw _.name="Invariant Violation",_}}o.isRequired=o;function c(){return o}var u={array:o,bigint:o,bool:o,func:o,number:o,object:o,string:o,symbol:o,any:o,arrayOf:c,element:o,elementType:o,instanceOf:c,node:o,objectOf:c,oneOf:c,oneOfType:c,shape:c,exact:c,checkPropTypes:l,resetWarningCache:a};return u.PropTypes=u,u},ye}var Ie;function xa(){return Ie||(Ie=1,be.exports=ha()()),be.exports}var s=xa(),we=function(){return we=Object.assign||function(n){for(var a,l=1,o=arguments.length;l<o;l++){a=arguments[l];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(n[c]=a[c])}return n},we.apply(this,arguments)},Ve={onActivate:s.func,onAddUndo:s.func,onBeforeAddUndo:s.func,onBeforeExecCommand:s.func,onBeforeGetContent:s.func,onBeforeRenderUI:s.func,onBeforeSetContent:s.func,onBeforePaste:s.func,onBlur:s.func,onChange:s.func,onClearUndos:s.func,onClick:s.func,onContextMenu:s.func,onCommentChange:s.func,onCompositionEnd:s.func,onCompositionStart:s.func,onCompositionUpdate:s.func,onCopy:s.func,onCut:s.func,onDblclick:s.func,onDeactivate:s.func,onDirty:s.func,onDrag:s.func,onDragDrop:s.func,onDragEnd:s.func,onDragGesture:s.func,onDragOver:s.func,onDrop:s.func,onExecCommand:s.func,onFocus:s.func,onFocusIn:s.func,onFocusOut:s.func,onGetContent:s.func,onHide:s.func,onInit:s.func,onInput:s.func,onKeyDown:s.func,onKeyPress:s.func,onKeyUp:s.func,onLoadContent:s.func,onMouseDown:s.func,onMouseEnter:s.func,onMouseLeave:s.func,onMouseMove:s.func,onMouseOut:s.func,onMouseOver:s.func,onMouseUp:s.func,onNodeChange:s.func,onObjectResizeStart:s.func,onObjectResized:s.func,onObjectSelected:s.func,onPaste:s.func,onPostProcess:s.func,onPostRender:s.func,onPreProcess:s.func,onProgressState:s.func,onRedo:s.func,onRemove:s.func,onReset:s.func,onSaveContent:s.func,onSelectionChange:s.func,onSetAttrib:s.func,onSetContent:s.func,onShow:s.func,onSubmit:s.func,onUndo:s.func,onVisualAid:s.func,onSkinLoadError:s.func,onThemeLoadError:s.func,onModelLoadError:s.func,onPluginLoadError:s.func,onIconsLoadError:s.func,onLanguageLoadError:s.func,onScriptsLoad:s.func,onScriptsLoadError:s.func},ga=we({apiKey:s.string,licenseKey:s.string,id:s.string,inline:s.bool,init:s.object,initialValue:s.string,onEditorChange:s.func,value:s.string,tagName:s.string,tabIndex:s.number,cloudChannel:s.string,plugins:s.oneOfType([s.string,s.array]),toolbar:s.oneOfType([s.string,s.array]),disabled:s.bool,readonly:s.bool,textareaName:s.string,tinymceScriptSrc:s.oneOfType([s.string,s.arrayOf(s.string),s.arrayOf(s.shape({src:s.string,async:s.bool,defer:s.bool}))]),rollback:s.oneOfType([s.number,s.oneOf([!1])]),scriptLoading:s.shape({async:s.bool,defer:s.bool,delay:s.number})},Ve),$e=function(n){var a=n;return a&&a.tinymce?a.tinymce:null},_e=function(n){return typeof n=="function"},Le=function(n){return n in Ve},Be=function(n){return n.substr(2)},fa=function(n,a,l,o,c,u,r){var d=Object.keys(c).filter(Le),m=Object.keys(u).filter(Le),g=d.filter(function(f){return u[f]===void 0}),x=m.filter(function(f){return c[f]===void 0});g.forEach(function(f){var _=Be(f),v=r[_];l(_,v),delete r[_]}),x.forEach(function(f){var _=o(n,f),v=Be(f);r[v]=_,a(v,_)})},ba=function(n,a,l,o,c){return fa(c,n.on.bind(n),n.off.bind(n),function(u,r){return function(d){var m;return(m=u(r))===null||m===void 0?void 0:m(d,n)}},a,l,o)},Oe=0,Ue=function(n){var a=Date.now(),l=Math.floor(Math.random()*1e9);return Oe++,n+"_"+l+Oe+String(a)},Fe=function(n){return n!==null&&(n.tagName.toLowerCase()==="textarea"||n.tagName.toLowerCase()==="input")},He=function(n){return typeof n>"u"||n===""?[]:Array.isArray(n)?n:n.split(" ")},va=function(n,a){return He(n).concat(He(a))},ya=function(){return window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"},_a=function(n){if(!("isConnected"in Node.prototype)){for(var a=n,l=n.parentNode;l!=null;)a=l,l=a.parentNode;return a===n.ownerDocument}return n.isConnected},Ye=function(n,a){n!==void 0&&(n.mode!=null&&typeof n.mode=="object"&&typeof n.mode.set=="function"?n.mode.set(a):n.setMode(a))},ja=function(n){var a=$e(n);if(!a)throw new Error("tinymce should have been loaded into global scope");return a},Ke=function(n){return n.options&&n.options.isRegistered("disabled")},Ce=function(){return Ce=Object.assign||function(n){for(var a,l=1,o=arguments.length;l<o;l++){a=arguments[l];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(n[c]=a[c])}return n},Ce.apply(this,arguments)},Na=function(n,a,l){var o,c,u=n.createElement("script");u.referrerPolicy="origin",u.type="application/javascript",u.id=a.id,u.src=a.src,u.async=(o=a.async)!==null&&o!==void 0?o:!1,u.defer=(c=a.defer)!==null&&c!==void 0?c:!1;var r=function(){u.removeEventListener("load",r),u.removeEventListener("error",d),l(a.src)},d=function(m){u.removeEventListener("load",r),u.removeEventListener("error",d),l(a.src,m)};u.addEventListener("load",r),u.addEventListener("error",d),n.head&&n.head.appendChild(u)},wa=function(n){var a={},l=function(r,d){var m=a[r];m.done=!0,m.error=d;for(var g=0,x=m.handlers;g<x.length;g++){var f=x[g];f(r,d)}m.handlers=[]},o=function(r,d,m){var g=function(B){return m!==void 0?m(B):console.error(B)};if(r.length===0){g(new Error("At least one script must be provided"));return}for(var x=0,f=!1,_=function(B,z){f||(z?(f=!0,g(z)):++x===r.length&&d())},v=0,y=r;v<y.length;v++){var p=y[v],S=a[p.src];if(S)S.done?_(p.src,S.error):S.handlers.push(_);else{var L=Ue("tiny-");a[p.src]={id:L,src:p.src,done:!1,error:null,handlers:[_]},Na(n,Ce({id:L},p),l)}}},c=function(){for(var r,d=0,m=Object.values(a);d<m.length;d++){var g=m[d],x=n.getElementById(g.id);x!=null&&x.tagName==="SCRIPT"&&((r=x.parentNode)===null||r===void 0||r.removeChild(x))}a={}},u=function(){return n};return{loadScripts:o,deleteScripts:c,getDocument:u}},Ca=function(){var n=[],a=function(c){var u=n.find(function(r){return r.getDocument()===c});return u===void 0&&(u=wa(c),n.push(u)),u},l=function(c,u,r,d,m){var g=function(){return a(c).loadScripts(u,d,m)};r>0?setTimeout(g,r):g()},o=function(){for(var c=n.pop();c!=null;c=n.pop())c.deleteScripts()};return{loadList:l,reinitialize:o}},ka=Ca(),Sa=(function(){var n=function(a,l){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,c){o.__proto__=c}||function(o,c){for(var u in c)Object.prototype.hasOwnProperty.call(c,u)&&(o[u]=c[u])},n(a,l)};return function(a,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");n(a,l);function o(){this.constructor=a}a.prototype=l===null?Object.create(l):(o.prototype=l.prototype,new o)}})(),ie=function(){return ie=Object.assign||function(n){for(var a,l=1,o=arguments.length;l<o;l++){a=arguments[l];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(n[c]=a[c])}return n},ie.apply(this,arguments)},je="change keyup compositionend setcontent CommentChange",xe=(function(n){Sa(a,n);function a(l){var o,c,u,r=n.call(this,l)||this;return r.rollbackTimer=void 0,r.valueCursor=void 0,r.rollbackChange=function(){var d=r.editor,m=r.props.value;d&&m&&m!==r.currentContent&&d.undoManager.ignore(function(){if(d.setContent(m),r.valueCursor&&(!r.inline||d.hasFocus()))try{d.selection.moveToBookmark(r.valueCursor)}catch{}}),r.rollbackTimer=void 0},r.handleBeforeInput=function(d){if(r.props.value!==void 0&&r.props.value===r.currentContent&&r.editor&&(!r.inline||r.editor.hasFocus()))try{r.valueCursor=r.editor.selection.getBookmark(3)}catch{}},r.handleBeforeInputSpecial=function(d){(d.key==="Enter"||d.key==="Backspace"||d.key==="Delete")&&r.handleBeforeInput(d)},r.handleEditorChange=function(d){var m=r.editor;if(m&&m.initialized){var g=m.getContent();r.props.value!==void 0&&r.props.value!==g&&r.props.rollback!==!1&&(r.rollbackTimer||(r.rollbackTimer=window.setTimeout(r.rollbackChange,typeof r.props.rollback=="number"?r.props.rollback:200))),g!==r.currentContent&&(r.currentContent=g,_e(r.props.onEditorChange)&&r.props.onEditorChange(g,m))}},r.handleEditorChangeSpecial=function(d){(d.key==="Backspace"||d.key==="Delete")&&r.handleEditorChange(d)},r.initialise=function(d){var m,g,x;d===void 0&&(d=0);var f=r.elementRef.current;if(f){if(!_a(f)){if(d===0)setTimeout(function(){return r.initialise(1)},1);else if(d<100)setTimeout(function(){return r.initialise(d+1)},100);else throw new Error("tinymce can only be initialised when in a document");return}var _=ja(r.view),v=ie(ie(ie(ie({},r.props.init),{selector:void 0,target:f,disabled:r.props.disabled,readonly:r.props.readonly,inline:r.inline,plugins:va((m=r.props.init)===null||m===void 0?void 0:m.plugins,r.props.plugins),toolbar:(g=r.props.toolbar)!==null&&g!==void 0?g:(x=r.props.init)===null||x===void 0?void 0:x.toolbar}),r.props.licenseKey?{license_key:r.props.licenseKey}:{}),{setup:function(y){r.editor=y,r.bindHandlers({}),r.inline&&!Fe(f)&&y.once("PostRender",function(p){y.setContent(r.getInitialValue(),{no_events:!0})}),r.props.init&&_e(r.props.init.setup)&&r.props.init.setup(y),r.props.disabled&&(Ke(r.editor)?r.editor.options.set("disabled",r.props.disabled):r.editor.mode.set("readonly"))},init_instance_callback:function(y){var p,S=r.getInitialValue();r.currentContent=(p=r.currentContent)!==null&&p!==void 0?p:y.getContent(),r.currentContent!==S&&(r.currentContent=S,y.setContent(S),y.undoManager.clear(),y.undoManager.add(),y.setDirty(!1)),r.props.init&&_e(r.props.init.init_instance_callback)&&r.props.init.init_instance_callback(y)}});r.inline||(f.style.visibility=""),Fe(f)&&(f.value=r.getInitialValue()),_.init(v)}},r.id=r.props.id||Ue("tiny-react"),r.elementRef=j.createRef(),r.inline=(u=(o=r.props.inline)!==null&&o!==void 0?o:(c=r.props.init)===null||c===void 0?void 0:c.inline)!==null&&u!==void 0?u:!1,r.boundHandlers={},r}return Object.defineProperty(a.prototype,"view",{get:function(){var l,o;return(o=(l=this.elementRef.current)===null||l===void 0?void 0:l.ownerDocument.defaultView)!==null&&o!==void 0?o:window},enumerable:!1,configurable:!0}),a.prototype.componentDidUpdate=function(l){var o=this,c,u;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(l),this.editor.initialized)){if(this.currentContent=(c=this.currentContent)!==null&&c!==void 0?c:this.editor.getContent(),typeof this.props.initialValue=="string"&&this.props.initialValue!==l.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if(typeof this.props.value=="string"&&this.props.value!==this.currentContent){var r=this.editor;r.undoManager.transact(function(){var m;if(!o.inline||r.hasFocus())try{m=r.selection.getBookmark(3)}catch{}var g=o.valueCursor;if(r.setContent(o.props.value),!o.inline||r.hasFocus())for(var x=0,f=[m,g];x<f.length;x++){var _=f[x];if(_)try{r.selection.moveToBookmark(_),o.valueCursor=_;break}catch{}}})}if(this.props.readonly!==l.readonly){var d=(u=this.props.readonly)!==null&&u!==void 0?u:!1;Ye(this.editor,d?"readonly":"design")}this.props.disabled!==l.disabled&&(Ke(this.editor)?this.editor.options.set("disabled",this.props.disabled):Ye(this.editor,this.props.disabled?"readonly":"design"))}},a.prototype.componentDidMount=function(){var l=this,o,c,u,r,d;if($e(this.view)!==null)this.initialise();else if(Array.isArray(this.props.tinymceScriptSrc)&&this.props.tinymceScriptSrc.length===0)(c=(o=this.props).onScriptsLoadError)===null||c===void 0||c.call(o,new Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array."));else if(!((u=this.elementRef.current)===null||u===void 0)&&u.ownerDocument){var m=function(){var x,f;(f=(x=l.props).onScriptsLoad)===null||f===void 0||f.call(x),l.initialise()},g=function(x){var f,_;(_=(f=l.props).onScriptsLoadError)===null||_===void 0||_.call(f,x)};ka.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),(d=(r=this.props.scriptLoading)===null||r===void 0?void 0:r.delay)!==null&&d!==void 0?d:0,m,g)}},a.prototype.componentWillUnmount=function(){var l=this,o=this.editor;o&&(o.off(je,this.handleEditorChange),o.off(this.beforeInputEvent(),this.handleBeforeInput),o.off("keypress",this.handleEditorChangeSpecial),o.off("keydown",this.handleBeforeInputSpecial),o.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach(function(c){o.off(c,l.boundHandlers[c])}),this.boundHandlers={},o.remove(),this.editor=void 0)},a.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},a.prototype.beforeInputEvent=function(){return ya()?"beforeinput SelectionChange":"SelectionChange"},a.prototype.renderInline=function(){var l=this.props.tagName,o=l===void 0?"div":l;return j.createElement(o,{ref:this.elementRef,id:this.id,tabIndex:this.props.tabIndex})},a.prototype.renderIframe=function(){return j.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id,tabIndex:this.props.tabIndex})},a.prototype.getScriptSources=function(){var l,o,c=(l=this.props.scriptLoading)===null||l===void 0?void 0:l.async,u=(o=this.props.scriptLoading)===null||o===void 0?void 0:o.defer;if(this.props.tinymceScriptSrc!==void 0)return typeof this.props.tinymceScriptSrc=="string"?[{src:this.props.tinymceScriptSrc,async:c,defer:u}]:this.props.tinymceScriptSrc.map(function(g){return typeof g=="string"?{src:g,async:c,defer:u}:g});var r=this.props.cloudChannel,d=this.props.apiKey?this.props.apiKey:"no-api-key",m="https://cdn.tiny.cloud/1/".concat(d,"/tinymce/").concat(r,"/tinymce.min.js");return[{src:m,async:c,defer:u}]},a.prototype.getInitialValue=function(){return typeof this.props.initialValue=="string"?this.props.initialValue:typeof this.props.value=="string"?this.props.value:""},a.prototype.bindHandlers=function(l){var o=this;if(this.editor!==void 0){ba(this.editor,l,this.props,this.boundHandlers,function(d){return o.props[d]});var c=function(d){return d.onEditorChange!==void 0||d.value!==void 0},u=c(l),r=c(this.props);!u&&r?(this.editor.on(je,this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):u&&!r&&(this.editor.off(je,this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},a.propTypes=ga,a.defaultProps={cloudChannel:"8"},a})(j.Component);const Ge=n=>{const a=Qe.c(54),{label:l,accept:o,maxSize:c,value:u,preview:r,onChange:d,onPreviewChange:m,required:g,helperText:x,error:f,disabled:_}=n,v=o===void 0?"image/*":o,y=c===void 0?5:c,p=_===void 0?!1:_,[S,L]=j.useState(!1),[B,z]=j.useState(null);let O;a[0]!==v||a[1]!==y||a[2]!==d||a[3]!==m?(O=q=>{z(null);const M=v.split(",").map(Ea),oe=q.type,le=`.${q.name.split(".").pop()}`;if(!M.some(I=>I==="image/*"?oe.startsWith("image/"):I.startsWith(".")?le===I:oe===I)){z(`Tipo de archivo no permitido. Solo se acepta: ${v}`);return}if(q.size/1048576>y){z(`El archivo es muy grande. Tamaño máximo: ${y}MB`);return}if(q.type.startsWith("image/")){const I=new FileReader;I.onloadend=()=>{m?.(I.result)},I.readAsDataURL(q)}d(q)},a[0]=v,a[1]=y,a[2]=d,a[3]=m,a[4]=O):O=a[4];const F=O;let ee;a[5]!==p||a[6]!==F?(ee=q=>{if(q.preventDefault(),L(!1),p)return;const M=q.dataTransfer.files;M&&M[0]&&F(M[0])},a[5]=p,a[6]=F,a[7]=ee):ee=a[7];const W=ee;let X;a[8]!==p?(X=q=>{q.preventDefault(),p||L(!0)},a[8]=p,a[9]=X):X=a[9];const Q=X;let J;a[10]===Symbol.for("react.memo_cache_sentinel")?(J=q=>{q.preventDefault(),L(!1)},a[10]=J):J=a[10];const te=J;let t;a[11]!==F?(t=q=>{const M=q.target.files;M&&M[0]&&F(M[0])},a[11]=F,a[12]=t):t=a[12];const h=t;let b;a[13]!==d||a[14]!==m?(b=()=>{d(null),m?.(null),z(null)},a[13]=d,a[14]=m,a[15]=b):b=a[15];const C=b,E=f||B;let P;a[16]!==g?(P=g&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"}),a[16]=g,a[17]=P):P=a[17];let A;a[18]!==l||a[19]!==P?(A=e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[l,P]}),a[18]=l,a[19]=P,a[20]=A):A=a[20];const D=S&&!p&&"border-[#073372] bg-blue-50 scale-[1.02]",R=!S&&!p&&"border-gray-300 hover:border-gray-400",H=E&&"border-red-300 bg-red-50",T=p&&"border-gray-200 bg-gray-50 cursor-not-allowed opacity-60",re=!p&&"cursor-pointer";let Y;a[21]!==D||a[22]!==R||a[23]!==H||a[24]!==T||a[25]!==re?(Y=he("relative border-2 border-dashed rounded-xl transition-all duration-200","min-h-[200px] flex flex-col items-center justify-center p-6",D,R,H,T,re),a[21]=D,a[22]=R,a[23]=H,a[24]=T,a[25]=re,a[26]=Y):Y=a[26];let K;a[27]!==v||a[28]!==p||a[29]!==E||a[30]!==C||a[31]!==x||a[32]!==S||a[33]!==h||a[34]!==r||a[35]!==u?(K=r||u?e.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center space-y-4",children:[r&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:r,alt:"Preview",className:"max-w-full max-h-48 rounded-lg shadow-lg border-4 border-white object-contain"}),e.jsx("div",{className:"absolute -top-2 -right-2 bg-green-500 text-white rounded-full p-1.5 shadow-lg",children:e.jsx(la,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex items-center gap-3 bg-white rounded-lg px-4 py-3 shadow-sm border border-gray-200",children:[e.jsx(da,{className:"w-5 h-5 text-[#073372]"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 max-w-xs truncate",children:u?.name||"Archivo seleccionado"}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",((u?.size||0)/1024).toFixed(1)," KB)"]})]}),!p&&e.jsxs("button",{type:"button",onClick:C,className:"inline-flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white text-sm font-medium rounded-lg transition-colors shadow-sm",children:[e.jsx(Ne,{className:"w-4 h-4"}),"Eliminar archivo"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:he("w-16 h-16 rounded-full flex items-center justify-center mb-4 transition-all duration-200",S?"bg-[#073372] scale-110":"bg-gray-100",E&&"bg-red-100"),children:e.jsx(aa,{className:he("w-8 h-8 transition-colors duration-200",S?"text-white":"text-gray-400",E&&"text-red-500")})}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:"text-base font-semibold text-gray-700",children:S?"¡Suelta el archivo aquí!":"Arrastra y suelta tu archivo aquí"}),e.jsx("p",{className:"text-sm text-gray-500",children:"o"}),e.jsxs("label",{className:he("inline-block px-6 py-2.5 bg-[#073372] hover:bg-[#17BC91] text-white font-medium rounded-lg transition-colors cursor-pointer shadow-sm",p&&"cursor-not-allowed opacity-50"),children:["Seleccionar archivo",e.jsx("input",{type:"file",className:"hidden",accept:v,onChange:h,disabled:p})]})]}),x&&!E&&e.jsx("p",{className:"text-xs text-gray-500 text-center mt-3",children:x})]}),a[27]=v,a[28]=p,a[29]=E,a[30]=C,a[31]=x,a[32]=S,a[33]=h,a[34]=r,a[35]=u,a[36]=K):K=a[36];let G;a[37]!==Q||a[38]!==W||a[39]!==Y||a[40]!==K?(G=e.jsx("div",{onDrop:W,onDragOver:Q,onDragLeave:te,className:Y,children:K}),a[37]=Q,a[38]=W,a[39]=Y,a[40]=K,a[41]=G):G=a[41];let V;a[42]!==E?(V=E&&e.jsxs("div",{className:"mt-2 px-3 text-xs flex items-start gap-1.5 text-red-600",children:[e.jsx("svg",{className:"w-4 h-4 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsx("span",{children:E})]}),a[42]=E,a[43]=V):V=a[43];let Z;a[44]!==v||a[45]!==E||a[46]!==x||a[47]!==y?(Z=!E&&!x&&e.jsxs("p",{className:"mt-2 px-3 text-xs text-gray-500",children:["Formatos aceptados: ",v," • Tamaño máximo: ",y,"MB"]}),a[44]=v,a[45]=E,a[46]=x,a[47]=y,a[48]=Z):Z=a[48];let ae;return a[49]!==A||a[50]!==G||a[51]!==V||a[52]!==Z?(ae=e.jsxs("div",{className:"w-full",children:[A,G,V,Z]}),a[49]=A,a[50]=G,a[51]=V,a[52]=Z,a[53]=ae):ae=a[53],ae};function Ea(n){return n.trim()}const Ta=()=>{const[n,a]=j.useState([]),[l,o]=j.useState([]),[c,u]=j.useState(!0),[r,d]=j.useState(!1),[m,g]=j.useState(!1),[x,f]=j.useState(null),[_,v]=j.useState(null),[y,p]=j.useState(""),[S,L]=j.useState(""),[B,z]=j.useState(""),[O,F]=j.useState(null),[ee,W]=j.useState(null),[X,Q]=j.useState(!0),[J,te]=j.useState(0),[t,h]=j.useState(""),[b,C]=j.useState(""),[E,P]=j.useState(""),[A,D]=j.useState(null),[R,H]=j.useState(null),[T,re]=j.useState(""),[Y,K]=j.useState(""),[G,V]=j.useState(""),[Z,ae]=j.useState("ahorros"),[q,M]=j.useState(!0),[oe,le]=j.useState(0),[de,ce]=j.useState(!1);j.useEffect(()=>{I()},[]);const I=async()=>{try{u(!0);const i=await se.get("/api/admin/payment-methods");a(i.data.yapes||[]),o(i.data.transfers||[])}catch(i){console.error("Error fetching payment methods:",i),N.error("Error al cargar métodos de pago")}finally{u(!1)}},ue=()=>{p(""),L(""),z(""),F(null),W(null),Q(!0),te(0),f(null)},me=()=>{h(""),C(""),P(""),D(null),H(null),re(""),K(""),V(""),ae("ahorros"),M(!0),le(0),v(null)},ke=i=>{i?(f(i),p(i.name),L(i.description||""),z(i.phone_number),W(i.qr_image_url),Q(i.is_active),te(i.display_order)):ue(),d(!0)},Se=i=>{i?(v(i),h(i.name),C(i.description||""),P(i.bank_name),H(i.bank_logo_url),re(i.account_holder),K(i.account_number),V(i.cci),ae(i.account_type),M(i.is_active),le(i.display_order)):me(),g(!0)},We=async i=>{if(i.preventDefault(),!y||!B){N.error("Por favor completa los campos requeridos");return}if(!x&&!O){N.error("Por favor sube una imagen del QR de Yape");return}try{ce(!0);const w=new FormData;w.append("name",y),w.append("description",S),w.append("phone_number",B),O&&w.append("qr_image",O),w.append("is_active",X?"1":"0"),w.append("display_order",J.toString()),x?(await se.post(`/api/admin/payment-methods/yape/${x.id}`,w,{headers:{"Content-Type":"multipart/form-data"}}),N.success("Método Yape actualizado exitosamente")):(await se.post("/api/admin/payment-methods/yape",w,{headers:{"Content-Type":"multipart/form-data"}}),N.success("Método Yape creado exitosamente")),d(!1),ue(),await I()}catch(w){console.error("Error submitting yape:",w);const pe=w;N.error(pe.response?.data?.message||"Error al guardar método Yape")}finally{ce(!1)}},Xe=async i=>{if(i.preventDefault(),!t||!E||!T||!Y||!G){N.error("Por favor completa los campos requeridos");return}try{ce(!0);const w=new FormData;w.append("name",t),w.append("description",b),w.append("bank_name",E),A&&w.append("bank_logo",A),w.append("account_holder",T),w.append("account_number",Y),w.append("cci",G),w.append("account_type",Z),w.append("is_active",q?"1":"0"),w.append("display_order",oe.toString()),_?(await se.post(`/api/admin/payment-methods/transfer/${_.id}`,w,{headers:{"Content-Type":"multipart/form-data"}}),N.success("Método de Transferencia actualizado exitosamente")):(await se.post("/api/admin/payment-methods/transfer",w,{headers:{"Content-Type":"multipart/form-data"}}),N.success("Método de Transferencia creado exitosamente")),g(!1),me(),await I()}catch(w){console.error("Error submitting transfer:",w);const pe=w;N.error(pe.response?.data?.message||"Error al guardar método de Transferencia")}finally{ce(!1)}},Ee=async(i,w)=>{if(confirm("¿Estás seguro de eliminar este método de pago?"))try{await se.delete(`/api/admin/payment-methods/${i}`),N.success("Método de pago eliminado"),await I()}catch(pe){console.error("Error deleting payment method:",pe),N.error("Error al eliminar método de pago")}};return c?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#17BC91]"})}):e.jsxs("div",{className:"space-y-10",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 via-pink-500 to-purple-600 rounded-2xl p-6 shadow-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-white/20 backdrop-blur-sm p-4 rounded-xl",children:e.jsx(ge,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:"Yape"}),e.jsx("p",{className:"text-purple-100",children:"Configura las cuentas Yape para pagos móviles"})]})]}),e.jsxs("button",{onClick:()=>ke(),className:"inline-flex items-center gap-2 px-6 py-3 bg-white text-purple-600 font-bold rounded-xl hover:bg-purple-50 transition-all shadow-lg hover:shadow-xl transform hover:scale-105",children:[e.jsx(De,{className:"w-5 h-5"}),"Agregar Yape"]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:n.length===0?e.jsx("div",{className:"col-span-full",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-dashed border-purple-200 rounded-2xl p-12 text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-purple-100 rounded-full mb-4",children:e.jsx(ge,{className:"w-8 h-8 text-purple-600"})}),e.jsx("p",{className:"text-lg font-medium text-purple-900 mb-2",children:"No hay métodos Yape configurados"}),e.jsx("p",{className:"text-sm text-purple-600",children:"Agrega tu primera cuenta Yape para comenzar"})]})}):n.map(i=>e.jsxs("div",{className:`group relative bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden transform hover:-translate-y-1 ${i.is_active?"ring-2 ring-purple-400 ring-offset-2":"opacity-60"}`,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-50 via-pink-50 to-white opacity-50"}),e.jsxs("div",{className:"relative p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg",children:e.jsx(ge,{className:"w-5 h-5 text-white"})}),e.jsx("h4",{className:"text-xl font-bold text-slate-900",children:i.name})]}),i.description&&e.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:i.description})]}),e.jsx("span",{className:`px-3 py-1.5 rounded-full text-xs font-bold ${i.is_active?"bg-gradient-to-r from-green-400 to-emerald-500 text-white shadow-md":"bg-gray-200 text-gray-600"}`,children:i.is_active?"● Activo":"○ Inactivo"})]}),i.qr_image_url&&e.jsx("div",{className:"flex justify-center py-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-400 to-pink-400 rounded-2xl blur-xl opacity-30"}),e.jsx("img",{src:i.qr_image_url,alt:"QR Code",className:"relative w-40 h-40 object-contain bg-white p-3 rounded-2xl shadow-xl border-4 border-white"})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-4 border border-purple-100",children:[e.jsx("p",{className:"text-xs font-semibold text-purple-600 mb-1",children:"NÚMERO DE TELÉFONO"}),e.jsx("p",{className:"text-lg font-bold text-purple-900",children:i.phone_number})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsxs("button",{onClick:()=>ke(i),className:"flex-1 inline-flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-semibold rounded-xl hover:from-blue-600 hover:to-blue-700 transition-all shadow-md hover:shadow-lg",children:[e.jsx(ze,{className:"w-4 h-4"}),"Editar"]}),e.jsx("button",{onClick:()=>Ee(i.id),className:"px-4 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white font-semibold rounded-xl hover:from-red-600 hover:to-red-700 transition-all shadow-md hover:shadow-lg",children:e.jsx(qe,{className:"w-4 h-4"})})]})]})]},i.id))})]}),e.jsxs("div",{className:"relative py-8",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t-2 border-gray-200"})}),e.jsx("div",{className:"relative flex justify-center",children:e.jsx("span",{className:"bg-white px-6 py-2 text-sm font-semibold text-gray-500 rounded-full border-2 border-gray-200",children:"Métodos de Pago Bancarios"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 via-cyan-500 to-blue-600 rounded-2xl p-6 shadow-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-white/20 backdrop-blur-sm p-4 rounded-xl",children:e.jsx(fe,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:"Transferencias Bancarias"}),e.jsx("p",{className:"text-blue-100",children:"Configura cuentas bancarias para recibir transferencias"})]})]}),e.jsxs("button",{onClick:()=>Se(),className:"inline-flex items-center gap-2 px-6 py-3 bg-white text-blue-600 font-bold rounded-xl hover:bg-blue-50 transition-all shadow-lg hover:shadow-xl transform hover:scale-105",children:[e.jsx(De,{className:"w-5 h-5"}),"Agregar Cuenta"]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:l.length===0?e.jsx("div",{className:"col-span-full",children:e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 border-2 border-dashed border-blue-200 rounded-2xl p-12 text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4",children:e.jsx(fe,{className:"w-8 h-8 text-blue-600"})}),e.jsx("p",{className:"text-lg font-medium text-blue-900 mb-2",children:"No hay cuentas bancarias configuradas"}),e.jsx("p",{className:"text-sm text-blue-600",children:"Agrega tu primera cuenta para recibir transferencias"})]})}):l.map(i=>e.jsxs("div",{className:`group relative bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden transform hover:-translate-y-1 ${i.is_active?"ring-2 ring-blue-400 ring-offset-2":"opacity-60"}`,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50 via-cyan-50 to-white opacity-50"}),e.jsxs("div",{className:"relative p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[i.bank_logo_url?e.jsx("div",{className:"bg-white p-3 rounded-xl shadow-sm border border-gray-100 mb-3 inline-block",children:e.jsx("img",{src:i.bank_logo_url,alt:i.bank_name,className:"h-10 object-contain"})}):e.jsx("div",{className:"inline-flex items-center gap-2 mb-3",children:e.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-lg",children:e.jsx(fe,{className:"w-5 h-5 text-white"})})}),e.jsx("h4",{className:"text-xl font-bold text-slate-900",children:i.name}),i.description&&e.jsx("p",{className:"text-sm text-slate-600 mt-1 leading-relaxed",children:i.description})]}),e.jsx("span",{className:`px-3 py-1.5 rounded-full text-xs font-bold ${i.is_active?"bg-gradient-to-r from-green-400 to-emerald-500 text-white shadow-md":"bg-gray-200 text-gray-600"}`,children:i.is_active?"● Activo":"○ Inactivo"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 rounded-xl p-3 border border-blue-100",children:[e.jsx("p",{className:"text-xs font-semibold text-blue-600 mb-1",children:"BANCO"}),e.jsx("p",{className:"text-base font-bold text-blue-900",children:i.bank_name})]}),e.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-gray-50 rounded-xl p-3 border border-gray-100",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-600 mb-1",children:"TITULAR"}),e.jsx("p",{className:"text-base font-bold text-slate-900",children:i.account_holder})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-white rounded-xl p-3 border-2 border-blue-100",children:[e.jsx("p",{className:"text-xs font-semibold text-blue-600 mb-1",children:"CUENTA"}),e.jsx("p",{className:"text-sm font-mono font-bold text-slate-900",children:i.account_number})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 border-2 border-cyan-100",children:[e.jsx("p",{className:"text-xs font-semibold text-cyan-600 mb-1",children:"TIPO"}),e.jsx("p",{className:"text-sm font-bold text-slate-900 capitalize",children:i.account_type})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-blue-50 rounded-xl p-3 border border-indigo-100",children:[e.jsx("p",{className:"text-xs font-semibold text-indigo-600 mb-1",children:"CCI (INTERBANCARIO)"}),e.jsx("p",{className:"text-sm font-mono font-bold text-indigo-900",children:i.cci})]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsxs("button",{onClick:()=>Se(i),className:"flex-1 inline-flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-semibold rounded-xl hover:from-blue-600 hover:to-blue-700 transition-all shadow-md hover:shadow-lg",children:[e.jsx(ze,{className:"w-4 h-4"}),"Editar"]}),e.jsx("button",{onClick:()=>Ee(i.id),className:"px-4 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white font-semibold rounded-xl hover:from-red-600 hover:to-red-700 transition-all shadow-md hover:shadow-lg",children:e.jsx(qe,{className:"w-4 h-4"})})]})]})]},i.id))})]}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 via-pink-500 to-purple-600 text-white px-8 py-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-bold",children:[x?"Editar":"Agregar"," Método Yape"]}),e.jsx("p",{className:"text-purple-100 text-sm mt-1",children:"Configura los detalles del método de pago Yape"})]}),e.jsx("button",{type:"button",onClick:()=>{d(!1),ue()},className:"text-white/80 hover:text-white hover:bg-white/10 rounded-lg p-2 transition-all",children:e.jsx(Ne,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:We,className:"flex flex-col flex-1 overflow-hidden",children:[e.jsxs("div",{className:"p-8 space-y-6 overflow-y-auto flex-1",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 pb-3 border-b-2 border-purple-200",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center font-bold",children:"1"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Información Básica"})]}),e.jsx(k,{label:"Nombre del Método",value:y,onChange:i=>p(i.target.value),placeholder:"Ej: Yape Principal, Yape Secundario",required:!0,helperText:"Nombre identificativo para este método de pago"}),e.jsx("div",{children:e.jsx(ca,{value:S,onChange:i=>L(i.target.value),label:"Descripción adicional (opcional)...",rows:3})}),e.jsx(k,{label:"Número de Teléfono",value:B,onChange:i=>z(i.target.value),placeholder:"987654321",required:!0,helperText:"Número de celular asociado a la cuenta Yape"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 pb-3 border-b-2 border-pink-200",children:[e.jsx("div",{className:"w-8 h-8 bg-pink-500 text-white rounded-full flex items-center justify-center font-bold",children:"2"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Código QR"})]}),e.jsx(Ge,{label:"Imagen del Código QR",accept:"image/*",maxSize:2,value:O,preview:ee,onChange:i=>F(i),onPreviewChange:i=>W(i),required:!x,helperText:"Sube la imagen del código QR de Yape. Los aprendices escanearán este código para realizar el pago."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 pb-3 border-b-2 border-purple-200",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center font-bold",children:"3"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Configuración"})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-purple-50 rounded-xl border border-purple-200",children:[e.jsx("input",{type:"checkbox",id:"yape-active",checked:X,onChange:i=>Q(i.target.checked),className:"w-5 h-5 mt-0.5 text-purple-600 focus:ring-purple-500 border-gray-300 rounded cursor-pointer"}),e.jsxs("label",{htmlFor:"yape-active",className:"flex-1 cursor-pointer",children:[e.jsx("span",{className:"block text-sm font-semibold text-gray-900",children:"Método activo"}),e.jsx("span",{className:"block text-sm text-gray-600 mt-1",children:"Si está activado, los aprendices  podrán ver y usar este método de pago"})]})]}),e.jsx(k,{label:"Orden de Visualización",type:"number",value:J.toString(),onChange:i=>te(parseInt(i.target.value)||0),min:"0",helperText:"Los métodos se mostrarán ordenados de menor a mayor"})]})]}),e.jsxs("div",{className:"px-8 py-6 bg-gray-50 border-t border-gray-200 flex gap-4",children:[e.jsx("button",{type:"button",onClick:()=>{d(!1),ue()},className:"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 font-semibold rounded-xl hover:bg-gray-100 transition-colors",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:de,className:"flex-1 inline-flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-500 text-white font-semibold rounded-xl hover:from-purple-700 hover:to-pink-600 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:de?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),"Guardando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"w-5 h-5"}),x?"Actualizar":"Guardar"," Método"]})})]})]})]})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 via-cyan-500 to-blue-600 text-white px-8 py-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-bold",children:[_?"Editar":"Agregar"," Cuenta Bancaria"]}),e.jsx("p",{className:"text-blue-100 text-sm mt-1",children:"Configura los detalles para transferencias bancarias"})]}),e.jsx("button",{type:"button",onClick:()=>{g(!1),me()},className:"text-white/80 hover:text-white hover:bg-white/10 rounded-lg p-2 transition-all",children:e.jsx(Ne,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:Xe,className:"flex flex-col flex-1 overflow-hidden",children:[e.jsxs("div",{className:"p-8 space-y-6 overflow-y-auto flex-1",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 pb-3 border-b-2 border-blue-200",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold",children:"1"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Información Básica"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(k,{label:"Nombre del Método",value:t,onChange:i=>h(i.target.value),placeholder:"Ej: BCP - Juan Pérez",required:!0,helperText:"Nombre identificativo para esta cuenta"}),e.jsx(k,{label:"Nombre del Banco",value:E,onChange:i=>P(i.target.value),placeholder:"Ej: BCP, Interbank, BBVA",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción"}),e.jsx("textarea",{value:b,onChange:i=>C(i.target.value),placeholder:"Descripción adicional (opcional)...",rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all resize-none"})]}),e.jsx(Ge,{label:"Logo del Banco",accept:"image/*,.svg",maxSize:1,value:A,preview:R,onChange:i=>D(i),onPreviewChange:i=>H(i),helperText:"Logo o imagen representativa del banco (opcional)"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 pb-3 border-b-2 border-cyan-200",children:[e.jsx("div",{className:"w-8 h-8 bg-cyan-500 text-white rounded-full flex items-center justify-center font-bold",children:"2"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Datos de la Cuenta"})]}),e.jsx(k,{label:"Titular de la Cuenta",value:T,onChange:i=>re(i.target.value),placeholder:"Nombre completo del titular",required:!0,helperText:"Nombre exacto como aparece en el banco"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(oa,{label:"Tipo de Cuenta",value:Z,onChange:i=>ae(i),options:[{value:"ahorros",label:"Ahorros"},{value:"corriente",label:"Corriente"}],isSearchable:!1,isClearable:!1,required:!0}),e.jsx(k,{label:"Número de Cuenta",value:Y,onChange:i=>K(i.target.value),placeholder:"0000-0000-0000000000",required:!0})]}),e.jsx(k,{label:"CCI (Código de Cuenta Interbancario)",value:G,onChange:i=>V(i.target.value),placeholder:"00200000000000000000",required:!0,helperText:"Código de 20 dígitos para transferencias interbancarias"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 pb-3 border-b-2 border-blue-200",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold",children:"3"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Configuración"})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-blue-50 rounded-xl border border-blue-200",children:[e.jsx("input",{type:"checkbox",id:"transfer-active",checked:q,onChange:i=>M(i.target.checked),className:"w-5 h-5 mt-0.5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded cursor-pointer"}),e.jsxs("label",{htmlFor:"transfer-active",className:"flex-1 cursor-pointer",children:[e.jsx("span",{className:"block text-sm font-semibold text-gray-900",children:"Método activo"}),e.jsx("span",{className:"block text-sm text-gray-600 mt-1",children:"Si está activado, los aprendices podrán ver y usar esta cuenta bancaria"})]})]}),e.jsx(k,{label:"Orden de Visualización",type:"number",value:oe.toString(),onChange:i=>le(parseInt(i.target.value)||0),min:"0",helperText:"Las cuentas se mostrarán ordenadas de menor a mayor"})]})]}),e.jsxs("div",{className:"px-8 py-6 bg-gray-50 border-t border-gray-200 flex gap-4",children:[e.jsx("button",{type:"button",onClick:()=>{g(!1),me()},className:"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 font-semibold rounded-xl hover:bg-gray-100 transition-colors",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:de,className:"flex-1 inline-flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-cyan-500 text-white font-semibold rounded-xl hover:from-blue-700 hover:to-cyan-600 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:de?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),"Guardando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"w-5 h-5"}),_?"Actualizar":"Guardar"," Cuenta"]})})]})]})]})})]})},rt=({settings:n})=>{const[a,l]=j.useState("mail"),[o,c]=j.useState("prospect_welcome"),u=[{key:"prospect_welcome",label:"Email de Bienvenida a Prospectos",variables:["nombre_estudiante","nombre_asesor","email_asesor","telefono_asesor","fecha_registro","url_plataforma"]},{key:"contract_email",label:"Email de Contrato de Matrícula (con PDF adjunto)",variables:["nombre_estudiante","codigo_matricula","nivel_academico","plan_pago","url_contrato","fecha_actual"]},{key:"contract_signed_student",label:"Email de Confirmación de Firma (Aprendiz)",variables:["nombre_estudiante","codigo_matricula","nivel_academico","plan_pago","fecha_actual"]},{key:"contract_signed_admin",label:"Notificación de Contrato Firmado (Admin)",variables:["nombre_estudiante","codigo_matricula","nivel_academico","plan_pago","asesor","fecha_firma"]},{key:"contract_signed_advisor",label:"Notificación de Contrato Firmado (Asesor)",variables:["nombre_asesor","nombre_estudiante","codigo_matricula","nivel_academico","plan_pago","fecha_firma"]},{key:"student_enrolled",label:"Email de Credenciales para Aprendices Matriculados",variables:["nombre_estudiante","codigo_matricula","email","contrasena","url_plataforma","nivel_academico","plan_pago"]},{key:"enrollment_verified",label:"Email de Matrícula Verificada",variables:["nombre_estudiante","codigo_matricula","email","nivel_academico","plan_pago","verificado_por","fecha_verificacion","cantidad_documentos","url_plataforma"]},{key:"payment_receipt_email",label:"Email de Comprobante de Pago",variables:["nombre_estudiante","tipo_documento","numero_documento","direccion_cliente","descripcion_servicio","precio_unitario","valor_venta","monto_pagado","fecha_pago","numero_cuota","codigo_operacion","metodo_pago","op_gravada","igv","importe_total","fecha_emision","numero_comprobante","fecha_autorizacion","hash_comprobante","url_plataforma"]}],r=$({settings:(n.mail||[]).reduce((t,h)=>(t[h.key]=h.content,t),{})}),d=$({contract_template:n.general?.find(t=>t.key==="contract_template")?.content||""}),m=$({payment_schedule_template:n.general?.find(t=>t.key==="payment_schedule_template")?.content||""}),g=$({payment_receipt_template:n.general?.find(t=>t.key==="payment_receipt_template")?.content||""}),x=$({whatsapp_number:n.whatsapp?.find(t=>t.key==="whatsapp_number")?.content||"",whatsapp_message:n.whatsapp?.find(t=>t.key==="whatsapp_message")?.content||""}),f=$({site_name:n.general?.find(t=>t.key==="site_name")?.content||"",site_description:n.general?.find(t=>t.key==="site_description")?.content||""}),_=$({support_email:n.contact?.find(t=>t.key==="support_email")?.content||""}),v=$({plan_change_deadline_days:n.payment?.find(t=>t.key==="plan_change_deadline_days")?.content||"7",allow_partial_payments:n.payment?.find(t=>t.key==="allow_partial_payments")?.content||"true"}),y=$({culqi_public_key:n.general?.find(t=>t.key==="culqi_public_key")?.content||"",culqi_api_key:n.general?.find(t=>t.key==="culqi_api_key")?.content||"",culqi_api_url:n.general?.find(t=>t.key==="culqi_api_url")?.content||"https://api.culqi.com"}),p=$({class_request_min_advance_hours:n.general?.find(t=>t.key==="class_request_min_advance_hours")?.content||"1",class_request_max_advance_hours:n.general?.find(t=>t.key==="class_request_max_advance_hours")?.content||"2",class_operation_start_hour:n.general?.find(t=>t.key==="class_operation_start_hour")?.content||"8",class_operation_end_hour:n.general?.find(t=>t.key==="class_operation_end_hour")?.content||"22",class_max_students:n.general?.find(t=>t.key==="class_max_students")?.content||"6",practice_min_required:n.general?.find(t=>t.key==="practice_min_required")?.content||"2",practice_max_allowed:n.general?.find(t=>t.key==="practice_max_allowed")?.content||"5",practice_max_students:n.general?.find(t=>t.key==="practice_max_students")?.content||"10"}),S=[{title:"General",items:[{id:"general",label:"General",icon:ta},{id:"contact",label:"Contacto",icon:Pe}]},{title:"Comunicación",items:[{id:"mail",label:"Templates Email",icon:Pe},{id:"whatsapp",label:"WhatsApp",icon:ra}]},{title:"Pagos y Facturación",items:[{id:"payment",label:"Configuración Pagos",icon:Te},{id:"payment_methods",label:"Métodos de Pago",icon:sa},{id:"kulki",label:"Pasarela Culqi",icon:na},{id:"schedule",label:"Cronograma",icon:ne},{id:"receipt",label:"Comprobantes",icon:ne}]},{title:"Académico y Legal",items:[{id:"classes",label:"Clases",icon:ia},{id:"contract",label:"Contrato",icon:ne}]}],L=t=>{t.preventDefault();const h=Object.entries(r.data.settings).map(([b,C])=>({key:b,content:C,type:"mail",description:te(b)}));r.transform(()=>({settings:h})),r.post("/admin/settings",{onSuccess:()=>{N.success("Configuración guardada",{description:"Los templates de email han sido actualizados",duration:4e3})},onError:()=>{N.error("Error",{description:"No se pudieron guardar las configuraciones",duration:4e3})}})},B=t=>{t.preventDefault();const h=[{key:"whatsapp_number",content:x.data.whatsapp_number,type:"whatsapp",description:"Número de WhatsApp para contacto"},{key:"whatsapp_message",content:x.data.whatsapp_message,type:"whatsapp",description:"Mensaje predeterminado de WhatsApp"}];x.transform(()=>({settings:h})),x.post("/admin/settings",{onSuccess:()=>{N.success("Configuración guardada",{description:"La configuración de WhatsApp ha sido actualizada",duration:4e3})}})},z=t=>{t.preventDefault();const h=[{key:"site_name",content:f.data.site_name,type:"general",description:"Nombre del sitio"},{key:"site_description",content:f.data.site_description,type:"general",description:"Descripción del sitio"}];f.transform(()=>({settings:h})),f.post("/admin/settings",{onSuccess:()=>{N.success("Configuración guardada",{description:"La configuración general ha sido actualizada",duration:4e3})}})},O=t=>{t.preventDefault();const h=[{key:"support_email",content:_.data.support_email,type:"contact",description:"Email de soporte técnico para aprendices"}];_.transform(()=>({settings:h})),_.post("/admin/settings",{onSuccess:()=>{N.success("Configuración guardada",{description:"El email de soporte ha sido actualizado",duration:4e3})}})},F=t=>{t.preventDefault();const h=[{key:"plan_change_deadline_days",content:v.data.plan_change_deadline_days,type:"payment",description:"Días límite desde la matrícula para cambiar de plan"},{key:"allow_partial_payments",content:v.data.allow_partial_payments,type:"payment",description:"Permitir pagos parciales de cualquier monto aplicados al total"}];v.transform(()=>({settings:h})),v.post("/admin/settings",{onSuccess:()=>{N.success("Configuración guardada",{description:"Las configuraciones de pago han sido actualizadas",duration:4e3})},onError:()=>{N.error("Error",{description:"No se pudieron guardar las configuraciones",duration:4e3})}})},ee=t=>{t.preventDefault();const h=[{key:"contract_template",content:d.data.contract_template,type:"general",description:"Plantilla de contrato digital para aprendices"}];d.transform(()=>({settings:h})),d.post("/admin/settings",{onSuccess:()=>{N.success("Configuración guardada",{description:"La plantilla de contrato ha sido actualizada",duration:4e3})},onError:()=>{N.error("Error",{description:"No se pudo guardar la plantilla de contrato",duration:4e3})}})},W=t=>{t.preventDefault();const h=[{key:"payment_schedule_template",content:m.data.payment_schedule_template,type:"general",description:"Plantilla de cronograma de pagos para aprendices"}];m.transform(()=>({settings:h})),m.post("/admin/settings",{onSuccess:()=>{N.success("Configuración guardada",{description:"La plantilla de cronograma de pagos ha sido actualizada",duration:4e3})},onError:()=>{N.error("Error",{description:"No se pudo guardar la plantilla de cronograma",duration:4e3})}})},X=t=>{t.preventDefault();const h=[{key:"payment_receipt_template",content:g.data.payment_receipt_template,type:"general",description:"Plantilla de comprobante de pago para aprendices"}];g.transform(()=>({settings:h})),g.post("/admin/settings",{onSuccess:()=>{N.success("Configuración guardada",{description:"La plantilla de comprobante ha sido actualizada",duration:4e3})},onError:()=>{N.error("Error",{description:"No se pudo guardar la plantilla de comprobante",duration:4e3})}})},Q=t=>{t.preventDefault();const h=[{key:"culqi_public_key",content:y.data.culqi_public_key,type:"general",description:"Clave pública de Culqi para tokenización en frontend"},{key:"culqi_api_key",content:y.data.culqi_api_key,type:"general",description:"Clave API secreta de Culqi"},{key:"culqi_api_url",content:y.data.culqi_api_url,type:"general",description:"URL de la API de Culqi"}];y.transform(()=>({settings:h})),y.post("/admin/settings",{onSuccess:()=>{N.success("Configuración guardada",{description:"La configuración de Culqi ha sido actualizada",duration:4e3})},onError:()=>{N.error("Error",{description:"No se pudo guardar la configuración de Culqi",duration:4e3})}})},J=t=>{t.preventDefault();const h=[{key:"class_request_min_advance_hours",content:p.data.class_request_min_advance_hours,type:"general",description:"Anticipación mínima en horas para solicitar clase"},{key:"class_request_max_advance_hours",content:p.data.class_request_max_advance_hours,type:"general",description:"Anticipación máxima en horas para solicitar clase"},{key:"class_operation_start_hour",content:p.data.class_operation_start_hour,type:"general",description:"Hora de inicio de operación para clases"},{key:"class_operation_end_hour",content:p.data.class_operation_end_hour,type:"general",description:"Hora de fin de operación para clases"},{key:"class_max_students",content:p.data.class_max_students,type:"general",description:"Número máximo de aprendices por clase"},{key:"practice_min_required",content:p.data.practice_min_required,type:"general",description:"Mínimo de prácticas requeridas antes de pasar al siguiente módulo"},{key:"practice_max_allowed",content:p.data.practice_max_allowed,type:"general",description:"Máximo de prácticas permitidas por módulo"},{key:"practice_max_students",content:p.data.practice_max_students,type:"general",description:"Número máximo de aprendices por práctica"}];p.transform(()=>({settings:h})),p.post("/admin/settings",{onSuccess:()=>{N.success("Configuración guardada",{description:"La configuración de clases ha sido actualizada",duration:4e3})},onError:()=>{N.error("Error",{description:"No se pudo guardar la configuración de clases",duration:4e3})}})},te=t=>({welcome_email:"Email de bienvenida para nuevos usuarios",payment_reminder:"Recordatorio de pago pendiente",enrollment_confirmation:"Confirmación de matrícula"})[t]||"";return e.jsxs(Ze,{children:[e.jsx(Je,{title:"Configuraciones"}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-[#073372] to-[#17BC91] rounded-xl shadow-lg",children:e.jsx(Te,{className:"h-7 w-7 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Configuraciones del Sistema"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Administra templates de email, WhatsApp y configuración general"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8 items-start",children:[e.jsx("div",{className:"lg:col-span-1 space-y-6 sticky top-6",children:S.map((t,h)=>e.jsxs("div",{children:[e.jsx("h3",{className:"px-3 text-xs font-bold text-gray-400 uppercase tracking-wider mb-2",children:t.title}),e.jsx("div",{className:"space-y-1",children:t.items.map(b=>{const C=b.icon;return e.jsxs("button",{onClick:()=>l(b.id),className:`w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200 group ${a===b.id?"bg-white text-[#073372] shadow-sm border border-gray-200":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(C,{className:`mr-3 h-5 w-5 transition-colors ${a===b.id?"text-[#17BC91]":"text-gray-400 group-hover:text-gray-500"}`}),b.label]},b.id)})})]},h))}),e.jsx("div",{className:"lg:col-span-3",children:e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden min-h-[600px]",children:e.jsxs("div",{className:"p-8",children:[a==="mail"&&e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[e.jsx("div",{children:e.jsx(ea,{label:"Seleccionar Template de Email",value:o,onChange:t=>c(t.target.value),required:!0,children:u.map(t=>e.jsx("option",{value:t.key,children:t.label},t.key))})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:u.find(t=>t.key===o)?.label})}),e.jsx(xe,{apiKey:"0nai4nwo1mc0dumfyzl8re1odbzzr1fz4gfwzpgu5ghdnu4n",value:r.data.settings[o]||"",onEditorChange:t=>{r.setData("settings",{...r.data.settings,[o]:t})},init:{height:500,menubar:"file edit view insert format tools table help",plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","help","wordcount","visualchars","pagebreak"],toolbar:"undo redo | formatselect | bold italic underline forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media | table tabledelete | code | removeformat | help",image_title:!0,image_advtab:!0,automatic_uploads:!0,paste_data_images:!0,file_picker_types:"image",images_upload_url:"/admin/upload-image",relative_urls:!1,remove_script_host:!1,convert_urls:!0,extended_valid_elements:"img[data-src|src|alt|style|width|height|class]",images_upload_handler:t=>new Promise((h,b)=>{(async()=>{try{await fetch("/sanctum/csrf-cookie",{credentials:"same-origin"});const C=new FormData;C.append("file",t.blob(),t.filename());const P=decodeURIComponent((R=>{const T=`; ${document.cookie}`.split(`; ${R}=`);return T.length===2?T.pop()?.split(";").shift():""})("XSRF-TOKEN")||""),D=await(await fetch("/admin/upload-image",{method:"POST",body:C,credentials:"same-origin",headers:{"X-XSRF-TOKEN":P}})).json();D.location?h(D.location):b("Error al subir imagen")}catch{b("Error al subir imagen")}})()}),content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }",setup:t=>{const h=b=>(b=b.replace(/src="[^"]*({{[^}]+}})"/g,'src="$1"'),b=b.replace(/src="[^"]*(https?:\/\/[^"}]+)"/g,'src="$1"'),b=b.replace(/href="[^"]*({{[^}]+}})"/g,'href="$1"'),b=b.replace(/href="[^"]*(https?:\/\/[^"}]+)"/g,'href="$1"'),b);t.on("BeforeSetContent",function(b){b.content&&typeof b.content=="string"&&(b.content=h(b.content))}),t.on("PostProcess",function(b){b.content&&typeof b.content=="string"&&(b.content=h(b.content))})}}},o),e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("p",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Variables disponibles para este template:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs text-blue-800",children:u.find(t=>t.key===o)?.variables.map(t=>e.jsx("code",{className:"bg-white px-2 py-1 rounded",children:`{{${t}}}`},t))})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",disabled:r.processing,className:"inline-flex items-center px-6 py-3 bg-[#073372] hover:bg-[#17BC91] text-white font-medium rounded-lg transition-all shadow-md hover:shadow-lg disabled:opacity-50",children:[e.jsx(U,{className:"h-5 w-5 mr-2"}),r.processing?"Guardando...":"Guardar Template"]})})]}),a==="whatsapp"&&e.jsxs("form",{onSubmit:B,className:"space-y-6",children:[e.jsx(k,{label:"Número de WhatsApp",type:"text",value:x.data.whatsapp_number,onChange:t=>x.setData("whatsapp_number",t.target.value),helperText:"Ejemplo: +51987654321",variant:"outlined"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mensaje Predeterminado"}),e.jsx("textarea",{value:x.data.whatsapp_message,onChange:t=>x.setData("whatsapp_message",t.target.value),rows:6,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#17BC91] focus:border-transparent transition-all",placeholder:"Hola! Estoy interesado en información sobre los cursos..."}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Este mensaje se usará como plantilla para contacto por WhatsApp"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",disabled:x.processing,className:"inline-flex items-center px-6 py-3 bg-[#073372] hover:bg-[#17BC91] text-white font-medium rounded-lg transition-all shadow-md hover:shadow-lg disabled:opacity-50",children:[e.jsx(U,{className:"h-5 w-5 mr-2"}),x.processing?"Guardando...":"Guardar Configuración"]})})]}),a==="contract"&&e.jsxs("form",{onSubmit:ee,className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 border-2 border-emerald-200 rounded-xl p-6 mb-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-2 flex items-center gap-2",children:[e.jsx(ne,{className:"w-6 h-6 text-emerald-600"}),"📄 Plantilla de Contrato Digital"]}),e.jsxs("p",{className:"text-sm text-slate-700",children:["Esta plantilla se genera automáticamente cuando un prospecto pasa de ",e.jsx("strong",{children:'"Reunión Realizada"'})," a ",e.jsx("strong",{children:'"Pago Por Verificar"'}),". El aprendiz recibirá un email con un enlace para revisar y aceptar el contrato digitalmente."]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Contenido de la Plantilla de Contrato"})}),e.jsx(xe,{apiKey:"0nai4nwo1mc0dumfyzl8re1odbzzr1fz4gfwzpgu5ghdnu4n",value:d.data.contract_template,onEditorChange:t=>{d.setData("contract_template",t)},init:{height:600,menubar:"file edit view insert format tools table help",plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","help","wordcount","visualchars","pagebreak"],toolbar:"undo redo | formatselect | bold italic underline forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media | table tabledelete | code | removeformat | help",automatic_uploads:!0,paste_data_images:!0,file_picker_types:"image",images_upload_url:"/admin/upload-image",relative_urls:!1,remove_script_host:!1,convert_urls:!0,images_upload_handler:t=>new Promise((h,b)=>{(async()=>{try{await fetch("/sanctum/csrf-cookie",{credentials:"same-origin"});const C=new FormData;C.append("file",t.blob(),t.filename());const P=decodeURIComponent((R=>{const T=`; ${document.cookie}`.split(`; ${R}=`);return T.length===2?T.pop()?.split(";").shift():""})("XSRF-TOKEN")||""),D=await(await fetch("/admin/upload-image",{method:"POST",body:C,credentials:"same-origin",headers:{"X-XSRF-TOKEN":P}})).json();D.location?h(D.location):b("Error al subir imagen")}catch{b("Error al subir imagen")}})()}),content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px; padding: 20px; }"}}),e.jsxs("div",{className:"p-4 bg-emerald-50 border-2 border-emerald-200 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-emerald-900 mb-2",children:"Variables Disponibles:"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 text-sm",children:[e.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{nombre_estudiante}}"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{documento_estudiante}}"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{email_estudiante}}"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{telefono_estudiante}}"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{nivel_academico}}"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{plan_pago}}"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{monto_total}}"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{fecha_matricula}}"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{codigo_matricula}}"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{usuario}}"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{contrasena}}"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{nombre_apoderado}}"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{documento_apoderado}}"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{fecha_actual}}"})]}),e.jsxs("p",{className:"text-sm text-emerald-800 mt-3",children:[e.jsx("strong",{children:"Nota:"})," Estas variables se reemplazarán automáticamente con los datos del aprendiz al generar el contrato."]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",disabled:d.processing,className:"inline-flex items-center px-6 py-3 bg-[#073372] hover:bg-[#17BC91] text-white font-medium rounded-lg transition-all shadow-md hover:shadow-lg disabled:opacity-50",children:[e.jsx(U,{className:"h-5 w-5 mr-2"}),d.processing?"Guardando...":"Guardar Plantilla de Contrato"]})})]}),a==="schedule"&&e.jsxs("form",{onSubmit:W,className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-200 rounded-xl p-6 mb-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-2 flex items-center gap-2",children:[e.jsx(ne,{className:"w-6 h-6 text-purple-600"}),"📅 Plantilla de Cronograma de Pagos"]}),e.jsx("p",{className:"text-sm text-slate-700",children:"Esta plantilla se genera automáticamente cuando se envían los documentos de verificación al aprendiz. El cronograma muestra todas las cuotas, fechas de vencimiento, estados de pago y montos."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Contenido de la Plantilla de Cronograma"})}),e.jsx(xe,{apiKey:"0nai4nwo1mc0dumfyzl8re1odbzzr1fz4gfwzpgu5ghdnu4n",value:m.data.payment_schedule_template,onEditorChange:t=>{m.setData("payment_schedule_template",t)},init:{height:600,menubar:"file edit view insert format tools table help",plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","help","wordcount","visualchars","pagebreak"],toolbar:"undo redo | formatselect | bold italic underline forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media | table tabledelete | code | removeformat | help",automatic_uploads:!0,paste_data_images:!0,file_picker_types:"image",images_upload_url:"/admin/upload-image",relative_urls:!1,remove_script_host:!1,convert_urls:!0,images_upload_handler:t=>new Promise((h,b)=>{(async()=>{try{await fetch("/sanctum/csrf-cookie",{credentials:"same-origin"});const C=new FormData;C.append("file",t.blob(),t.filename());const P=decodeURIComponent((R=>{const T=`; ${document.cookie}`.split(`; ${R}=`);return T.length===2?T.pop()?.split(";").shift():""})("XSRF-TOKEN")||""),D=await(await fetch("/admin/upload-image",{method:"POST",body:C,credentials:"same-origin",headers:{"X-XSRF-TOKEN":P}})).json();D.location?h(D.location):b("Error al subir imagen")}catch{b("Error al subir imagen")}})()}),content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px; padding: 20px; }"}}),e.jsxs("div",{className:"p-4 bg-purple-50 border-2 border-purple-200 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-purple-900 mb-2",children:"Variables Disponibles:"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 text-sm",children:[e.jsx("code",{className:"bg-white px-2 py-1 rounded border border-purple-300",children:"{{nombre_estudiante}}"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded border border-purple-300",children:"{{codigo_matricula}}"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded border border-purple-300",children:"{{nivel_academico}}"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded border border-purple-300",children:"{{plan_pago}}"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded border border-purple-300",children:"{{fecha_matricula}}"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded border border-purple-300",children:"{{monto_total}}"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded border border-purple-300",children:"{{total_pagado}}"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded border border-purple-300",children:"{{total_pendiente}}"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded border border-purple-300",children:"{{tabla_cuotas}}"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded border border-purple-300",children:"{{fecha_generacion}}"})]}),e.jsxs("p",{className:"text-sm text-purple-800 mt-3",children:[e.jsx("strong",{children:"Nota Especial:"})," La variable ",e.jsx("code",{className:"bg-white px-1 rounded",children:"{{tabla_cuotas}}"})," se reemplaza automáticamente con las filas de la tabla generadas dinámicamente por el sistema. Cada fila incluye: Cuota #, Monto, Fecha Vencimiento, Fecha Pago, Monto Pagado y Estado."]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",disabled:m.processing,className:"inline-flex items-center px-6 py-3 bg-[#073372] hover:bg-[#17BC91] text-white font-medium rounded-lg transition-all shadow-md hover:shadow-lg disabled:opacity-50",children:[e.jsx(U,{className:"h-5 w-5 mr-2"}),m.processing?"Guardando...":"Guardar Plantilla de Cronograma"]})})]}),a==="receipt"&&e.jsxs("form",{onSubmit:X,className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 border-2 border-blue-200 rounded-xl p-6 mb-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-2 flex items-center gap-2",children:[e.jsx(ne,{className:"w-6 h-6 text-blue-600"}),"📄 Plantilla de Comprobante de Pago"]}),e.jsx("p",{className:"text-sm text-slate-700",children:"Esta plantilla se utiliza para generar el PDF del comprobante de pago cuando un cajero verifica un pago. El aprendiz recibirá este comprobante por correo electrónico."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Contenido del Comprobante"})}),e.jsx(xe,{apiKey:"0nai4nwo1mc0dumfyzl8re1odbzzr1fz4gfwzpgu5ghdnu4n",value:g.data.payment_receipt_template,onEditorChange:t=>{g.setData("payment_receipt_template",t)},init:{height:600,menubar:"file edit view insert format tools table help",plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","help","wordcount","visualchars","pagebreak"],toolbar:"undo redo | formatselect | bold italic underline forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media | table tabledelete | code | removeformat | help",automatic_uploads:!0,paste_data_images:!0,file_picker_types:"image",images_upload_url:"/admin/upload-image",relative_urls:!1,remove_script_host:!1,convert_urls:!0,images_upload_handler:t=>new Promise((h,b)=>{(async()=>{try{await fetch("/sanctum/csrf-cookie",{credentials:"same-origin"});const C=new FormData;C.append("file",t.blob(),t.filename());const P=decodeURIComponent((R=>{const T=`; ${document.cookie}`.split(`; ${R}=`);return T.length===2?T.pop()?.split(";").shift():""})("XSRF-TOKEN")||""),D=await(await fetch("/admin/upload-image",{method:"POST",body:C,credentials:"same-origin",headers:{"X-XSRF-TOKEN":P}})).json();D.location?h(D.location):b("Error al subir imagen")}catch{b("Error al subir imagen")}})()}),content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px; padding: 20px; }"}}),e.jsxs("div",{className:"p-4 bg-blue-50 border-2 border-blue-200 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Variables Disponibles:"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 text-sm",children:[e.jsx("code",{className:"bg-white px-2 py-1 rounded border border-blue-300",children:"{{nombre_estudiante}}"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded border border-blue-300",children:"{{documento_estudiante}}"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded border border-blue-300",children:"{{monto_pagado}}"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded border border-blue-300",children:"{{metodo_pago}}"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded border border-blue-300",children:"{{fecha_pago}}"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded border border-blue-300",children:"{{numero_cuota}}"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded border border-blue-300",children:"{{concepto}}"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded border border-blue-300",children:"{{codigo_operacion}}"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded border border-blue-300",children:"{{fecha_emision}}"}),e.jsx("code",{className:"bg-white px-2 py-1 rounded border border-blue-300",children:"{{cajero}}"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",disabled:g.processing,className:"inline-flex items-center px-6 py-3 bg-[#073372] hover:bg-[#17BC91] text-white font-medium rounded-lg transition-all shadow-md hover:shadow-lg disabled:opacity-50",children:[e.jsx(U,{className:"h-5 w-5 mr-2"}),g.processing?"Guardando...":"Guardar Plantilla de Comprobante"]})})]}),a==="general"&&e.jsxs("form",{onSubmit:z,className:"space-y-6",children:[e.jsx(k,{label:"Nombre del Sitio",type:"text",value:f.data.site_name,onChange:t=>f.setData("site_name",t.target.value),variant:"outlined"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción del Sitio"}),e.jsx("textarea",{value:f.data.site_description,onChange:t=>f.setData("site_description",t.target.value),rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#17BC91] focus:border-transparent transition-all",placeholder:"Descripción breve del sitio..."})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",disabled:f.processing,className:"inline-flex items-center px-6 py-3 bg-[#073372] hover:bg-[#17BC91] text-white font-medium rounded-lg transition-all shadow-md hover:shadow-lg disabled:opacity-50",children:[e.jsx(U,{className:"h-5 w-5 mr-2"}),f.processing?"Guardando...":"Guardar Configuración"]})})]}),a==="contact"&&e.jsxs("form",{onSubmit:O,className:"space-y-6",children:[e.jsx(k,{label:"Email de Soporte",type:"email",value:_.data.support_email,onChange:t=>_.setData("support_email",t.target.value),helperText:"Email que se mostrará a los aprendices para soporte técnico",variant:"outlined"}),e.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("strong",{children:"Nota:"})," Este email se muestra en las notificaciones y modales de confirmación de documentos para que los aprendices puedan contactar con soporte."]})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",disabled:_.processing,className:"inline-flex items-center px-6 py-3 bg-[#073372] hover:bg-[#17BC91] text-white font-medium rounded-lg transition-all shadow-md hover:shadow-lg disabled:opacity-50",children:[e.jsx(U,{className:"h-5 w-5 mr-2"}),_.processing?"Guardando...":"Guardar Email"]})})]}),a==="payment"&&e.jsxs("form",{onSubmit:F,className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-xl p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"⚙️ Configuraciones de Sistema de Pagos"}),e.jsx("p",{className:"text-sm text-slate-700",children:"Estas configuraciones afectan el comportamiento del sistema de pagos y cambios de plan para todos los aprendices."})]}),e.jsxs("div",{children:[e.jsx(k,{label:"Días límite para cambiar de plan",type:"number",min:"0",max:"30",value:v.data.plan_change_deadline_days,onChange:t=>v.setData("plan_change_deadline_days",t.target.value),helperText:"Número de días desde la matrícula en que el aprendiz puede cambiar su plan de pago (ej: 7 días)",variant:"outlined"}),e.jsx("div",{className:"mt-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("p",{className:"text-xs text-yellow-900",children:[e.jsx("strong",{children:"⚠️ Importante:"})," Solo los aprendices que no tengan cuotas pagadas o verificadas podrán cambiar de plan, incluso dentro de este período."]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Permitir pagos parciales"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"allow_partial_payments",value:"true",checked:v.data.allow_partial_payments==="true",onChange:t=>v.setData("allow_partial_payments",t.target.value),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Sí, permitir pagos parciales"})]}),e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"allow_partial_payments",value:"false",checked:v.data.allow_partial_payments==="false",onChange:t=>v.setData("allow_partial_payments",t.target.value),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"No, solo pagos completos"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Si se habilita, los aprendices podrán pagar cualquier monto que deseen aplicado al total de su plan de pagos."})]}),e.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"📊 Resumen de Configuración Actual:"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600",children:"Días para cambiar plan:"}),e.jsxs("span",{className:"font-bold text-slate-900",children:[v.data.plan_change_deadline_days," días"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600",children:"Pagos parciales:"}),e.jsx("span",{className:`font-bold ${v.data.allow_partial_payments==="true"?"text-green-600":"text-red-600"}`,children:v.data.allow_partial_payments==="true"?"✓ Habilitados (monto libre)":"✗ Deshabilitados"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",disabled:v.processing,className:"inline-flex items-center px-6 py-3 bg-[#073372] hover:bg-[#17BC91] text-white font-medium rounded-lg transition-all shadow-md hover:shadow-lg disabled:opacity-50",children:[e.jsx(U,{className:"h-5 w-5 mr-2"}),v.processing?"Guardando...":"Guardar Configuración de Pagos"]})})]}),a==="classes"&&e.jsxs("form",{onSubmit:J,className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 border-2 border-purple-200 rounded-xl p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"📅 Configuración de Solicitud de Clases"}),e.jsx("p",{className:"text-sm text-slate-700",children:"Configura las reglas de anticipación y horarios de operación para que los aprendices regulares puedan solicitar clases."})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4 flex items-center gap-2",children:"⏱️ Reglas de Anticipación"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Define la ventana de tiempo en que un aprendiz regular puede solicitar una clase. Por ejemplo, si configuras ",e.jsx("strong",{children:"mínimo 1 hora"})," y ",e.jsx("strong",{children:"máximo 2 horas"}),", un aprendiz que solicite entre las 2pm y 3pm podrá inscribirse para la clase de las 4pm."]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(k,{label:"Anticipación mínima (horas)",type:"number",min:"1",max:"24",value:p.data.class_request_min_advance_hours,onChange:t=>p.setData("class_request_min_advance_hours",t.target.value),helperText:"Mínimo de horas antes de la clase",variant:"outlined"}),e.jsx(k,{label:"Anticipación máxima (horas)",type:"number",min:"1",max:"24",value:p.data.class_request_max_advance_hours,onChange:t=>p.setData("class_request_max_advance_hours",t.target.value),helperText:"Máximo de horas antes de la clase",variant:"outlined"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4 flex items-center gap-2",children:"🕐 Horario de Operación"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Define el rango de horas en que se pueden programar clases. Solo se mostrarán slots dentro de este horario."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hora de inicio"}),e.jsx("select",{value:p.data.class_operation_start_hour,onChange:t=>p.setData("class_operation_start_hour",t.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#17BC91] focus:border-transparent transition-all",children:Array.from({length:24},(t,h)=>e.jsxs("option",{value:h.toString(),children:[h.toString().padStart(2,"0"),":00 ",h<12?"AM":"PM"]},h))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hora de fin"}),e.jsx("select",{value:p.data.class_operation_end_hour,onChange:t=>p.setData("class_operation_end_hour",t.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#17BC91] focus:border-transparent transition-all",children:Array.from({length:24},(t,h)=>e.jsxs("option",{value:h.toString(),children:[h.toString().padStart(2,"0"),":00 ",h<12?"AM":"PM"]},h))})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4 flex items-center gap-2",children:"🎓 Capacidad y Reglas de Académicas"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h5",{className:"text-sm font-bold text-gray-700",children:"Sesiones Regulares"}),e.jsx(k,{label:"Máximo de Aprendices por Clase",type:"number",min:"1",max:"50",value:p.data.class_max_students,onChange:t=>p.setData("class_max_students",t.target.value),helperText:"Capacidad máxima sugerida para nuevas clases",variant:"outlined"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h5",{className:"text-sm font-bold text-gray-700",children:"Sesiones de Práctica"}),e.jsx(k,{label:"Máximo de Aprendices por Práctica",type:"number",min:"1",max:"50",value:p.data.practice_max_students,onChange:t=>p.setData("practice_max_students",t.target.value),helperText:"Capacidad máxima sugerida para nuevas prácticas",variant:"outlined"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(k,{label:"Prácticas Mínimas",type:"number",min:"0",max:"10",value:p.data.practice_min_required,onChange:t=>p.setData("practice_min_required",t.target.value),helperText:"Mínimo obligatorio"}),e.jsx(k,{label:"Prácticas Máximas",type:"number",min:"1",max:"20",value:p.data.practice_max_allowed,onChange:t=>p.setData("practice_max_allowed",t.target.value),helperText:"Máximo opcional"})]})]})]})]}),e.jsxs("div",{className:"p-4 bg-purple-50 border border-purple-200 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-semibold text-purple-900 mb-3",children:"📊 Resumen de Configuración:"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-purple-700",children:"Ventana de anticipación:"}),e.jsxs("span",{className:"font-bold text-purple-900",children:[p.data.class_request_min_advance_hours," - ",p.data.class_request_max_advance_hours," horas antes"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-purple-700",children:"Horario de operación:"}),e.jsxs("span",{className:"font-bold text-purple-900",children:[p.data.class_operation_start_hour.toString().padStart(2,"0"),":00 - ",p.data.class_operation_end_hour.toString().padStart(2,"0"),":00"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-purple-700",children:"Capacidad (Clase/Práctica):"}),e.jsxs("span",{className:"font-bold text-purple-900",children:[p.data.class_max_students," / ",p.data.practice_max_students," aprendices"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-purple-700",children:"Rango de Prácticas:"}),e.jsxs("span",{className:"font-bold text-purple-900",children:["Min: ",p.data.practice_min_required," - Max: ",p.data.practice_max_allowed]})]})]})]}),e.jsxs("div",{className:"p-4 bg-blue-50 border-2 border-blue-200 rounded-xl",children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-900 mb-3",children:"💡 Ejemplo de Funcionamiento:"}),e.jsxs("p",{className:"text-sm text-blue-800",children:["Con la configuración actual, si un aprendiz regular solicita una clase a las ",e.jsx("strong",{children:"2:30 PM"}),":"]}),e.jsxs("ul",{className:"text-sm text-blue-800 mt-2 space-y-1 list-disc list-inside",children:[e.jsxs("li",{children:["Se verifica que esté dentro del horario de operación (",p.data.class_operation_start_hour,":00 - ",p.data.class_operation_end_hour,":00)"]}),e.jsxs("li",{children:["Se calcula el slot disponible: 2:30 PM + ",p.data.class_request_max_advance_hours," horas = ",e.jsx("strong",{children:parseInt(p.data.class_operation_start_hour)<=14+parseInt(p.data.class_request_max_advance_hours)?`${14+parseInt(p.data.class_request_max_advance_hours)}:00`:"siguiente día"})]}),e.jsx("li",{children:"Se muestran los grupos existentes para ese horario o la opción de crear uno nuevo"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",disabled:p.processing,className:"inline-flex items-center px-6 py-3 bg-[#073372] hover:bg-[#17BC91] text-white font-medium rounded-lg transition-all shadow-md hover:shadow-lg disabled:opacity-50",children:[e.jsx(U,{className:"h-5 w-5 mr-2"}),p.processing?"Guardando...":"Guardar Configuración de Clases"]})})]}),a==="kulki"&&e.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-200 rounded-xl p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"💳 Configuración de Pasarela Culqi"}),e.jsx("p",{className:"text-sm text-slate-700",children:"Configura las credenciales de tu cuenta de Culqi para procesar pagos con tarjeta de crédito."})]}),e.jsx("div",{children:e.jsx(k,{label:"Clave Pública (Public Key)",type:"text",value:y.data.culqi_public_key,onChange:t=>y.setData("culqi_public_key",t.target.value),helperText:"Clave pública de Culqi para tokenización en el frontend. Comienza con 'pk_live_' o 'pk_test_'",variant:"outlined",placeholder:"pk_live_xxxxxxxxxxxxxxxxxx"})}),e.jsxs("div",{children:[e.jsx(k,{label:"Clave Secreta (API Key)",type:"password",value:y.data.culqi_api_key,onChange:t=>y.setData("culqi_api_key",t.target.value),helperText:"Clave secreta de Culqi para procesar cargos. Comienza con 'sk_live_' o 'sk_test_' - ¡NO COMPARTIR!",variant:"outlined",placeholder:"sk_live_xxxxxxxxxxxxxxxxxx"}),e.jsx("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("p",{className:"text-xs text-red-900",children:[e.jsx("strong",{children:"🔒 Seguridad:"})," Esta clave es confidencial y no debe ser compartida. Se utiliza solo en el servidor."]})})]}),e.jsx("div",{children:e.jsx(k,{label:"URL de API",type:"text",value:y.data.culqi_api_url,onChange:t=>y.setData("culqi_api_url",t.target.value),helperText:"URL base de la API de Culqi (generalmente https://api.culqi.com)",variant:"outlined",placeholder:"https://api.culqi.com"})}),e.jsxs("div",{className:"p-5 bg-blue-50 border-2 border-blue-200 rounded-xl",children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-900 mb-3",children:"📘 Cómo Funciona Culqi:"}),e.jsxs("div",{className:"text-sm text-blue-900 space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"1. Tokenización en Frontend:"})," Culqi Checkout captura los datos de la tarjeta del cliente y los convierte en un token seguro (sin exponer los datos)."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"2. Envío al Backend:"})," El token se envía a tu servidor donde se procesa el cargo usando tu clave secreta."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"3. Confirmación Instantánea:"})," Culqi responde inmediatamente si el pago fue aprobado o rechazado."]})]})]}),e.jsxs("div",{className:"p-5 bg-yellow-50 border-2 border-yellow-200 rounded-xl",children:[e.jsx("h4",{className:"text-sm font-semibold text-yellow-900 mb-3",children:"⚙️ Instrucciones de Configuración:"}),e.jsxs("ol",{className:"text-sm text-yellow-900 space-y-2 list-decimal list-inside",children:[e.jsxs("li",{children:["Crea una cuenta en ",e.jsx("a",{href:"https://culqi.com",target:"_blank",rel:"noopener noreferrer",className:"underline font-semibold",children:"culqi.com"})]}),e.jsx("li",{children:"Completa el proceso de KYC (verificación de identidad)"}),e.jsxs("li",{children:["Ve a ",e.jsx("strong",{children:"Desarrollo → API Keys"})," en tu panel de Culqi"]}),e.jsx("li",{children:"Copia tu clave pública (pk_test_...) y clave secreta (sk_test_...)"}),e.jsx("li",{children:"Pega las credenciales aquí y guarda"}),e.jsx("li",{children:"Para producción, usa las claves pk_live_... y sk_live_..."})]})]}),e.jsxs("div",{className:"p-5 bg-green-50 border-2 border-green-200 rounded-xl",children:[e.jsx("h4",{className:"text-sm font-semibold text-green-900 mb-3",children:"✅ Funcionalidades Habilitadas:"}),e.jsxs("ul",{className:"text-sm text-green-900 space-y-2",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:"💳"}),e.jsx("span",{children:"Pagos con tarjeta de crédito/débito (Visa, Mastercard, Amex, Diners)"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:"🔄"}),e.jsx("span",{children:"Pagos automáticos recurrentes (auto-cobro mensual)"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:"💾"}),e.jsx("span",{children:"Almacenamiento seguro de tarjetas tokenizadas"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:"⚡"}),e.jsx("span",{children:"Aprobación instantánea de pagos (sin esperar verificación manual)"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:"🔒"}),e.jsx("span",{children:"Seguridad PCI-DSS compliant (Culqi se encarga de la seguridad)"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",disabled:y.processing,className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-medium rounded-lg transition-all shadow-md hover:shadow-lg disabled:opacity-50",children:[e.jsx(U,{className:"h-5 w-5 mr-2"}),y.processing?"Guardando...":"Guardar Configuración de Culqi"]})})]}),a==="payment_methods"&&e.jsxs("div",{children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-xl p-6 mb-6",children:[e.jsx("h4",{className:"text-lg font-bold text-blue-900 mb-2",children:"📱 Configuración de Métodos de Pago Tradicionales"}),e.jsx("p",{className:"text-sm text-blue-800",children:"Configura los métodos de pago Yape y Transferencia Bancaria que estarán disponibles para los aprendices. Puedes agregar múltiples cuentas de cada tipo."})]}),e.jsx(Ta,{})]})]})})})]})]})]})};export{rt as default};
