import{c as lt,r as D,u as rt,j as t,H as at,b as it}from"./app-ClJUsqSx.js";import{a as Oe,r as ot,s as nt,t as F,u as ct,v as dt,w as Se,x as mt,y as Ie,z as Qe,B as We,A as ut}from"./AuthenticatedLayout-DIygWDIy.js";import{M as xt,a as ht,A as ft,t as pt}from"./index.esm-CnPHZ8b6.js";import{I as Ce}from"./input-CYWtnw0S.js";import{S as gt}from"./Select2-oPObnYGk.js";import{S as bt}from"./sweetalert2.esm.all-NNS-RXd7.js";import{S as jt}from"./search-BwFMXK5h.js";import{C as yt}from"./circle-x-CUbD2Ne7.js";/* empty css            */import"./button-CSX1AAlk.js";import"./clsx-B-dksMZM.js";import"./dropdown-menu-DxCnkdxt.js";import"./createLucideIcon-Bo2iwAkN.js";import"./index-BK1m-kF8.js";import"./index-OLbD6Ls4.js";import"./index-B_o8CQWM.js";import"./badge-CS_01u5j.js";import"./index-CnyDuYXe.js";xt.registerModules([ht]);const Yt=l=>{const e=lt.c(119),{users:r}=l,[Re,Ee]=D.useState(!1),[a,Be]=D.useState(null),[T,Pe]=D.useState(!1),[c,Ge]=D.useState(""),[i,$]=D.useState("all"),Xe=D.useRef(null);let V;e[0]===Symbol.for("react.memo_cache_sentinel")?(V={name:"",email:"",role:"sales_advisor",password:""},e[0]=V):V=e[0];const{data:m,setData:o,post:Ue,put:ke,processing:q,errors:u,reset:x}=rt(V);let H;e[1]===Symbol.for("react.memo_cache_sentinel")?(H=[{value:"admin",label:"Administrador"},{value:"sales_advisor",label:"Asesor de Ventas"},{value:"cashier",label:"Cajero"},{value:"verifier",label:"Verificador"}],e[1]=H):H=e[1];const Je=H,Ke=vt;let P;e[2]!==x?(P=()=>{Be(null),x(),Ee(!0)},e[2]=x,e[3]=P):P=e[3];const Ae=P;let G;e[4]!==o?(G=s=>{Be(s),o({name:s.name,email:s.email,role:s.role,password:""}),Ee(!0)},e[4]=o,e[5]=G):G=e[5];const ze=G;let O;e[6]!==x?(O=()=>{Ee(!1),Be(null),x(),Pe(!1)},e[6]=x,e[7]=O):O=e[7];const d=O;let I;e[8]!==d||e[9]!==a||e[10]!==Ue||e[11]!==ke?(I=s=>{s.preventDefault(),a?ke(`/admin/users/${a.id}`,{onSuccess:()=>{d(),F.success("Usuario actualizado",{description:"Los datos del usuario han sido actualizados exitosamente",duration:4e3})},onError:Nt}):Ue("/admin/users",{onSuccess:()=>{d(),F.success("Usuario creado",{description:"El nuevo usuario ha sido agregado al sistema",duration:4e3})},onError:wt})},e[8]=d,e[9]=a,e[10]=Ue,e[11]=ke,e[12]=I):I=e[12];const Q=I,Ye=St;let W;e[13]!==ze?(W=s=>{const n=s.data;return t.jsxs("div",{className:"flex items-center space-x-2 h-full",children:[t.jsx("button",{onClick:()=>ze(n),className:"text-[#073372] hover:text-[#17BC91] transition-colors p-1.5 hover:bg-[#17BC91]/10 rounded",title:"Editar",children:t.jsx(ct,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>Ye(n.id,n.name),className:"text-red-600 hover:text-red-800 transition-colors p-1.5 hover:bg-red-50 rounded",title:"Eliminar",children:t.jsx(dt,{className:"h-4 w-4"})})]})},e[13]=ze,e[14]=W):W=e[14];const Le=W;let X;e[15]===Symbol.for("react.memo_cache_sentinel")?(X=s=>t.jsx("div",{className:"flex items-center h-full",children:Ke(s.value)}),e[15]=X):X=e[15];const Ze=X,et=Rt;let J,K,Y;e[16]===Symbol.for("react.memo_cache_sentinel")?(Y={headerName:"Usuario",field:"name",minWidth:300,filter:"agTextColumnFilter",cellRenderer:Bt},J={headerName:"Rol",field:"role",width:200,cellRenderer:Ze,filter:"agTextColumnFilter"},K={headerName:"Fecha de Creación",field:"created_at",width:180,cellRenderer:et,filter:"agDateColumnFilter"},e[16]=J,e[17]=K,e[18]=Y):(J=e[16],K=e[17],Y=e[18]);let Z;e[19]!==Le?(Z=[Y,J,K,{headerName:"Acciones",cellRenderer:Le,width:120,sortable:!1,filter:!1,pinned:"right"}],e[19]=Le,e[20]=Z):Z=e[20];const Me=Z;let ee;e[21]===Symbol.for("react.memo_cache_sentinel")?(ee={sortable:!0,resizable:!0,filter:!0},e[21]=ee):ee=e[21];const tt=ee;let De;e:{if(i==="all"){De=r;break e}let s;if(e[22]!==i||e[23]!==r){let n;e[25]!==i?(n=st=>st.role===i,e[25]=i,e[26]=n):n=e[26],s=r.filter(n),e[22]=i,e[23]=r,e[24]=s}else s=e[24];De=s}const Fe=De;let te;e[27]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx(at,{title:"Gestión de Usuarios"}),e[27]=te):te=e[27];let se;e[28]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"p-3 bg-gradient-to-br from-[#073372] to-[#17BC91] rounded-xl shadow-lg",children:t.jsx(Se,{className:"h-7 w-7 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Gestión de Usuarios"}),t.jsx("p",{className:"text-sm text-slate-600",children:"Administra asesores, cajeros y verificadores del sistema"})]})]}),e[28]=se):se=e[28];let le;e[29]===Symbol.for("react.memo_cache_sentinel")?(le=t.jsx(mt,{className:"h-5 w-5 mr-2"}),e[29]=le):le=e[29];let h;e[30]!==Ae?(h=t.jsxs("div",{className:"flex items-center justify-between",children:[se,t.jsxs("button",{onClick:Ae,className:"inline-flex items-center px-4 py-2.5 bg-[#073372] hover:bg-[#17BC91] text-white text-sm font-medium rounded-lg transition-all shadow-md hover:shadow-lg",children:[le,"Nuevo Usuario"]})]}),e[30]=Ae,e[31]=h):h=e[31];let re;e[32]===Symbol.for("react.memo_cache_sentinel")?(re=s=>Ge(s.target.value),e[32]=re):re=e[32];let ae;e[33]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx(jt,{className:"w-4 h-4"}),e[33]=ae):ae=e[33];let f,p;e[34]!==c?(f=t.jsx(Ce,{type:"text",value:c,onChange:re,label:"Buscar por nombre, email o rol...",icon:ae,className:"pr-10"}),p=c&&t.jsx("button",{onClick:()=>Ge(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(yt,{className:"h-5 w-5"})}),e[34]=c,e[35]=f,e[36]=p):(f=e[35],p=e[36]);let g;e[37]!==f||e[38]!==p?(g=t.jsx("div",{className:"relative",children:t.jsxs("div",{className:"relative",children:[f,p]})}),e[37]=f,e[38]=p,e[39]=g):g=e[39];let ie;e[40]===Symbol.for("react.memo_cache_sentinel")?(ie=()=>$("all"),e[40]=ie):ie=e[40];const Te=`px-6 py-3 rounded-lg font-medium transition-all ${i==="all"?"bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-md":"text-gray-600 hover:bg-gray-50"}`;let oe,ne;e[41]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsx(Se,{className:"h-4 w-4"}),ne=t.jsx("span",{children:"Todos"}),e[41]=oe,e[42]=ne):(oe=e[41],ne=e[42]);let b;e[43]!==r.length?(b=t.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[oe,ne,t.jsx("span",{className:"bg-white/20 px-2 py-0.5 rounded-full text-xs",children:r.length})]}),e[43]=r.length,e[44]=b):b=e[44];let j;e[45]!==Te||e[46]!==b?(j=t.jsx("button",{onClick:ie,className:Te,children:b}),e[45]=Te,e[46]=b,e[47]=j):j=e[47];let ce;e[48]===Symbol.for("react.memo_cache_sentinel")?(ce=()=>$("admin"),e[48]=ce):ce=e[48];const $e=`px-6 py-3 rounded-lg font-medium transition-all ${i==="admin"?"bg-gradient-to-r from-[#F98613] to-orange-600 text-white shadow-md":"text-gray-600 hover:bg-gray-50"}`;let de,me;e[49]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsx(Se,{className:"h-4 w-4"}),me=t.jsx("span",{children:"Administradores"}),e[49]=de,e[50]=me):(de=e[49],me=e[50]);let y;e[51]!==r?(y=r.filter(Ut),e[51]=r,e[52]=y):y=e[52];let v;e[53]!==y.length?(v=t.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[de,me,t.jsx("span",{className:"bg-white/20 px-2 py-0.5 rounded-full text-xs",children:y.length})]}),e[53]=y.length,e[54]=v):v=e[54];let N;e[55]!==$e||e[56]!==v?(N=t.jsx("button",{onClick:ce,className:$e,children:v}),e[55]=$e,e[56]=v,e[57]=N):N=e[57];let ue;e[58]===Symbol.for("react.memo_cache_sentinel")?(ue=()=>$("sales_advisor"),e[58]=ue):ue=e[58];const qe=`px-6 py-3 rounded-lg font-medium transition-all ${i==="sales_advisor"?"bg-gradient-to-r from-purple-500 to-purple-600 text-white shadow-md":"text-gray-600 hover:bg-gray-50"}`;let xe,he;e[59]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsx(Ie,{className:"h-4 w-4"}),he=t.jsx("span",{children:"Asesores"}),e[59]=xe,e[60]=he):(xe=e[59],he=e[60]);let w;e[61]!==r?(w=r.filter(kt),e[61]=r,e[62]=w):w=e[62];let _;e[63]!==w.length?(_=t.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[xe,he,t.jsx("span",{className:"bg-white/20 px-2 py-0.5 rounded-full text-xs",children:w.length})]}),e[63]=w.length,e[64]=_):_=e[64];let C;e[65]!==qe||e[66]!==_?(C=t.jsx("button",{onClick:ue,className:qe,children:_}),e[65]=qe,e[66]=_,e[67]=C):C=e[67];let fe;e[68]===Symbol.for("react.memo_cache_sentinel")?(fe=()=>$("cashier"),e[68]=fe):fe=e[68];const Ve=`px-6 py-3 rounded-lg font-medium transition-all ${i==="cashier"?"bg-gradient-to-r from-cyan-500 to-cyan-600 text-white shadow-md":"text-gray-600 hover:bg-gray-50"}`;let pe,ge;e[69]===Symbol.for("react.memo_cache_sentinel")?(pe=t.jsx(Qe,{className:"h-4 w-4"}),ge=t.jsx("span",{children:"Cajeros"}),e[69]=pe,e[70]=ge):(pe=e[69],ge=e[70]);let S;e[71]!==r?(S=r.filter(At),e[71]=r,e[72]=S):S=e[72];let R;e[73]!==S.length?(R=t.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[pe,ge,t.jsx("span",{className:"bg-white/20 px-2 py-0.5 rounded-full text-xs",children:S.length})]}),e[73]=S.length,e[74]=R):R=e[74];let E;e[75]!==Ve||e[76]!==R?(E=t.jsx("button",{onClick:fe,className:Ve,children:R}),e[75]=Ve,e[76]=R,e[77]=E):E=e[77];let be;e[78]===Symbol.for("react.memo_cache_sentinel")?(be=()=>$("verifier"),e[78]=be):be=e[78];const He=`px-6 py-3 rounded-lg font-medium transition-all ${i==="verifier"?"bg-gradient-to-r from-[#17BC91] to-emerald-500 text-white shadow-md":"text-gray-600 hover:bg-gray-50"}`;let je,ye;e[79]===Symbol.for("react.memo_cache_sentinel")?(je=t.jsx(We,{className:"h-4 w-4"}),ye=t.jsx("span",{children:"Verificadores"}),e[79]=je,e[80]=ye):(je=e[79],ye=e[80]);let B;e[81]!==r?(B=r.filter(zt),e[81]=r,e[82]=B):B=e[82];let U;e[83]!==B.length?(U=t.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[je,ye,t.jsx("span",{className:"bg-white/20 px-2 py-0.5 rounded-full text-xs",children:B.length})]}),e[83]=B.length,e[84]=U):U=e[84];let k;e[85]!==He||e[86]!==U?(k=t.jsx("button",{onClick:be,className:He,children:U}),e[85]=He,e[86]=U,e[87]=k):k=e[87];let A;e[88]!==j||e[89]!==N||e[90]!==C||e[91]!==E||e[92]!==k?(A=t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-1 inline-flex",children:t.jsxs("div",{className:"flex space-x-2",children:[j,N,C,E,k]})}),e[88]=j,e[89]=N,e[90]=C,e[91]=E,e[92]=k,e[93]=A):A=e[93];let ve;e[94]===Symbol.for("react.memo_cache_sentinel")?(ve={height:"600px",width:"100%"},e[94]=ve):ve=e[94];let Ne;e[95]===Symbol.for("react.memo_cache_sentinel")?(Ne=[10,20,50,100],e[95]=Ne):Ne=e[95];let we;e[96]===Symbol.for("react.memo_cache_sentinel")?(we={mode:"singleRow"},e[96]=we):we=e[96];let z;e[97]!==Me||e[98]!==Fe||e[99]!==c?(z=t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:t.jsx("div",{className:"ag-theme-quartz",style:ve,children:t.jsx(ft,{ref:Xe,theme:pt,rowData:Fe,columnDefs:Me,defaultColDef:tt,quickFilterText:c,pagination:!0,paginationPageSize:20,paginationPageSizeSelector:Ne,animateRows:!0,rowSelection:we,domLayout:"normal",rowHeight:70,headerHeight:48,suppressCellFocus:!0,rowClass:"hover:bg-gray-50"})})}),e[97]=Me,e[98]=Fe,e[99]=c,e[100]=z):z=e[100];let L;e[101]!==h||e[102]!==g||e[103]!==A||e[104]!==z?(L=t.jsxs("div",{className:"p-6 space-y-6",children:[h,g,A,z]}),e[101]=h,e[102]=g,e[103]=A,e[104]=z,e[105]=L):L=e[105];let M;e[106]!==d||e[107]!==m||e[108]!==a||e[109]!==u||e[110]!==Q||e[111]!==Re||e[112]!==q||e[113]!==o||e[114]!==T?(M=Re&&t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[t.jsxs("div",{className:"bg-gradient-to-r from-[#073372] to-[#17BC91] px-8 py-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-white",children:a?"Editar Usuario":"Nuevo Usuario"}),t.jsx("p",{className:"text-white/80 text-sm mt-1",children:a?"Modifica los datos del usuario":"Completa los datos del nuevo usuario"})]}),t.jsx("div",{className:"p-8 overflow-y-auto max-h-[calc(90vh-200px)]",children:t.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[t.jsx(Ce,{label:"Nombre Completo",type:"text",value:m.name,onChange:s=>o("name",s.target.value),error:u.name,required:!0,variant:"outlined"}),t.jsx(Ce,{label:"Correo Electrónico",type:"email",value:m.email,onChange:s=>o("email",s.target.value),icon:t.jsx(Oe,{className:"w-5 h-5"}),error:u.email,required:!0,variant:"outlined"}),t.jsx("div",{children:t.jsx(gt,{label:"Rol del Usuario",options:Je,value:m.role,onChange:s=>o("role",s),placeholder:"Selecciona un rol",helperText:u.role})}),t.jsxs("div",{className:"relative",children:[t.jsx(Ce,{label:a?"Contraseña (opcional)":"Contraseña",type:T?"text":"password",value:m.password,onChange:s=>o("password",s.target.value),error:u.password,required:!a,variant:"outlined",helperText:a?"Dejar en blanco para mantener la contraseña actual":"Mínimo 8 caracteres"}),t.jsx("button",{type:"button",onClick:()=>Pe(!T),className:"absolute right-3 top-[18px] text-gray-400 hover:text-gray-600 transition-colors z-10",children:T?t.jsx(ot,{className:"h-5 w-5"}):t.jsx(nt,{className:"h-5 w-5"})})]})]})}),t.jsxs("div",{className:"bg-gray-50 px-8 py-4 border-t border-gray-200 flex justify-end space-x-3",children:[t.jsx("button",{type:"button",onClick:d,className:"px-6 py-2.5 text-sm font-medium text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",disabled:q,children:"Cancelar"}),t.jsx("button",{type:"submit",onClick:Q,className:"px-6 py-2.5 text-sm font-medium text-white bg-[#073372] hover:bg-[#17BC91] rounded-lg transition-colors shadow-md disabled:opacity-50 disabled:cursor-not-allowed",disabled:q,children:q?t.jsxs("span",{className:"flex items-center",children:[t.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Guardando..."]}):a?"Actualizar Usuario":"Crear Usuario"})]})]})}),e[106]=d,e[107]=m,e[108]=a,e[109]=u,e[110]=Q,e[111]=Re,e[112]=q,e[113]=o,e[114]=T,e[115]=M):M=e[115];let _e;return e[116]!==L||e[117]!==M?(_e=t.jsxs(ut,{children:[te,L,M]}),e[116]=L,e[117]=M,e[118]=_e):_e=e[118],_e};function vt(l){switch(l){case"admin":return t.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-[#F98613]/10 text-[#F98613] border border-[#F98613]/30",children:[t.jsx(Se,{className:"w-3 h-3 mr-1"}),"Administrador"]});case"sales_advisor":return t.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-50 text-purple-700 border border-purple-200",children:[t.jsx(Ie,{className:"w-3 h-3 mr-1"}),"Asesor de Ventas"]});case"cashier":return t.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-cyan-50 text-cyan-700 border border-cyan-200",children:[t.jsx(Qe,{className:"w-3 h-3 mr-1"}),"Cajero"]});case"verifier":return t.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-[#17BC91]/10 text-[#17BC91] border border-[#17BC91]/30",children:[t.jsx(We,{className:"w-3 h-3 mr-1"}),"Verificador"]});default:return l}}function Nt(){F.error("Error",{description:"No se pudo actualizar el usuario",duration:4e3})}function wt(){F.error("Error",{description:"No se pudo crear el usuario",duration:4e3})}function _t(){F.success("Usuario eliminado",{description:"El usuario ha sido eliminado del sistema",duration:4e3})}function Ct(){F.error("Error",{description:"No se pudo eliminar el usuario",duration:4e3})}async function St(l,e){(await bt.fire({title:"¿Eliminar Usuario?",html:`
        <div class="text-left">
          <p class="text-gray-700 mb-3">¿Estás seguro de que quieres eliminar a <strong>${e}</strong>?</p>
          <div class="bg-red-50 border-l-4 border-red-500 p-4 rounded">
            <p class="text-sm text-red-800">
              <strong>Advertencia:</strong> Esta acción no se puede deshacer.
            </p>
          </div>
        </div>
      `,icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#6b7280",confirmButtonText:'<i class="fas fa-trash"></i> Sí, Eliminar',cancelButtonText:"Cancelar",reverseButtons:!0})).isConfirmed&&it.delete(`/admin/users/${l}`,{onSuccess:_t,onError:Ct})}function Rt(l){if(!l.value)return"";const e=new Date(l.value);return t.jsx("div",{className:"flex items-center h-full",children:t.jsx("span",{className:"text-sm text-gray-600",children:e.toLocaleDateString("es-PE",{year:"numeric",month:"short",day:"numeric"})})})}function Et(l){return l[0]}function Bt(l){const e=l.data;return t.jsxs("div",{className:"flex items-center py-2 w-full h-full",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-[#073372] to-[#17BC91] rounded-full flex items-center justify-center flex-shrink-0",children:t.jsx("span",{className:"text-white text-sm font-semibold",children:e.name.split(" ").map(Et).join("").slice(0,2).toUpperCase()})}),t.jsxs("div",{className:"ml-3",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.name}),t.jsxs("div",{className:"text-xs text-gray-500 flex items-center",children:[t.jsx(Oe,{className:"w-3 h-3 mr-1"}),e.email]})]})]})}function Ut(l){return l.role==="admin"}function kt(l){return l.role==="sales_advisor"}function At(l){return l.role==="cashier"}function zt(l){return l.role==="verifier"}export{Yt as default};
