import{c as de,r as W,j as t,L as Y,b as Z}from"./app-DbGauczp.js";import{A as he}from"./AuthenticatedLayout-CcOpJFtm.js";import{t as w,F as xe}from"./DocumentConfirmationModal-CBO2LUiQ.js";import{I as fe}from"./input-DPgu5UPQ.js";import{S as le}from"./Select2-DqtznFgY.js";import{B as b}from"./button-CTq9rhy_.js";import{B as ee}from"./badge-FEcguR_G.js";import{M as pe,a as ue,A as je,t as ge}from"./index.esm-Dqm0Lr7K.js";/* empty css                       */import{E as _e}from"./eye-CxunpvO-.js";import{S as ve}from"./square-pen-B7uvwBtC.js";import{C as Ne}from"./copy-Bqd972xq.js";import{T as ye}from"./trash-2-KcsIx9MT.js";import{P as be}from"./plus-BRTndIVb.js";import{F as we}from"./filter-BZIp7BqY.js";import{S as Se}from"./search-CmqjFTFT.js";import{B as Ce}from"./book-open-YW8JKVgJ.js";import{F as Fe}from"./file-question-CzG_BT3P.js";import{V as Ee}from"./video-Yzpm6Av9.js";/* empty css            */import"./dropdown-menu-uHHtlmE_.js";import"./createLucideIcon-El5PEAiD.js";import"./index-BV3GPBJK.js";import"./index-Czsmbtr5.js";import"./index-Ced-36WD.js";import"./x-CaU8MqPZ.js";import"./triangle-alert-Bm1PLXca.js";import"./circle-check-big-DVBmLLUY.js";import"./clock-DUwasotU.js";import"./index-CnyDuYXe.js";import"./clsx-B-dksMZM.js";pe.registerModules([ue]);const bt=s=>{const e=de.c(63),{templates:y,academicLevels:J,filters:te}=s,[a]=W.useState(y),[i,ae]=W.useState(""),[r,ie]=W.useState(te.level_id||"all"),[n,re]=W.useState(te.modality||"all"),se=Re;let S;e[0]!==n?(S=l=>{ie(l),se(l,n)},e[0]=n,e[1]=S):S=e[1];const K=S;let C;e[2]!==r?(C=l=>{re(l),se(r,l)},e[2]=r,e[3]=C):C=e[3];const X=C,ne=Ae,ce=Be;let F,E,R,T,P,A,k;e[4]===Symbol.for("react.memo_cache_sentinel")?(F={headerName:"#",field:"session_number",width:80,cellRenderer:De},E={headerName:"Plantilla de Clase",field:"title",flex:1,minWidth:280,filter:"agTextColumnFilter",cellRenderer:Le},R={headerName:"Contenido",width:180,cellRenderer:Me},T={headerName:"Duración",field:"duration_minutes",width:100,cellRenderer:$e},P={headerName:"Examen",width:120,cellRenderer:qe},A={headerName:"Clases",field:"scheduled_classes_count",width:80,cellRenderer:Qe},k={headerName:"Estado",field:"is_active",width:100,cellRenderer:Ve},e[4]=F,e[5]=E,e[6]=R,e[7]=T,e[8]=P,e[9]=A,e[10]=k):(F=e[4],E=e[5],R=e[6],T=e[7],P=e[8],A=e[9],k=e[10]);let z;e[11]===Symbol.for("react.memo_cache_sentinel")?(z=[F,E,R,T,P,A,k,{headerName:"Acciones",width:160,pinned:"right",cellRenderer:l=>{const U=l.data;return t.jsxs("div",{className:"flex items-center gap-1 h-full",children:[t.jsx(Y,{href:`/admin/class-templates/${U.id}`,children:t.jsx(b,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Ver",children:t.jsx(_e,{className:"h-4 w-4"})})}),t.jsx(Y,{href:`/admin/class-templates/${U.id}/edit`,children:t.jsx(b,{variant:"ghost",size:"icon",className:"h-8 w-8 text-blue-600",title:"Editar",children:t.jsx(ve,{className:"h-4 w-4"})})}),t.jsx(b,{variant:"ghost",size:"icon",className:"h-8 w-8 text-purple-600",title:"Duplicar",onClick:()=>ce(U),children:t.jsx(Ne,{className:"h-4 w-4"})}),t.jsx(b,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-600",title:"Eliminar",onClick:()=>ne(U),children:t.jsx(ye,{className:"h-4 w-4"})})]})}}],e[11]=z):z=e[11];const me=z;let B;e[12]===Symbol.for("react.memo_cache_sentinel")?(B={sortable:!0,resizable:!0},e[12]=B):B=e[12];const oe=B;let D;e[13]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Plantillas de Clases"}),t.jsx("p",{className:"text-gray-500 mt-1",children:"Gestiona las plantillas de sesiones por nivel académico"})]}),e[13]=D):D=e[13];let L;e[14]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[D,t.jsx(Y,{href:"/admin/class-templates/create",children:t.jsxs(b,{className:"bg-[#073372] hover:bg-[#052555]",children:[t.jsx(be,{className:"w-4 h-4 mr-2"}),"Nueva Plantilla"]})})]}),e[14]=L):L=e[14];let M;e[15]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsxs("div",{className:"flex items-center gap-2 self-center",children:[t.jsx(we,{className:"w-4 h-4 text-gray-400"}),t.jsx("span",{className:"text-sm text-gray-600",children:"Filtros:"})]}),e[15]=M):M=e[15];let c;e[16]!==K?(c=l=>K(l),e[16]=K,e[17]=c):c=e[17];let $;e[18]===Symbol.for("react.memo_cache_sentinel")?($={value:"all",label:"Todos los niveles"},e[18]=$):$=e[18];let m;e[19]!==J?(m=[$,...J.map(Ge)],e[19]=J,e[20]=m):m=e[20];let o;e[21]!==r||e[22]!==c||e[23]!==m?(o=t.jsx("div",{className:"w-52",children:t.jsx(le,{label:"Nivel Académico",value:r,onChange:c,options:m,isSearchable:!1,isClearable:!1})}),e[21]=r,e[22]=c,e[23]=m,e[24]=o):o=e[24];let d;e[25]!==X?(d=l=>X(l),e[25]=X,e[26]=d):d=e[26];let q;e[27]===Symbol.for("react.memo_cache_sentinel")?(q=[{value:"all",label:"Todas"},{value:"theoretical",label:"Teórica"},{value:"practical",label:"Práctica"}],e[27]=q):q=e[27];let h;e[28]!==n||e[29]!==d?(h=t.jsx("div",{className:"w-44",children:t.jsx(le,{label:"Modalidad",value:n,onChange:d,options:q,isSearchable:!1,isClearable:!1})}),e[28]=n,e[29]=d,e[30]=h):h=e[30];let Q,V;e[31]===Symbol.for("react.memo_cache_sentinel")?(Q=l=>ae(l.target.value),V=t.jsx(Se,{className:"w-5 h-5"}),e[31]=Q,e[32]=V):(Q=e[31],V=e[32]);let x;e[33]!==i?(x=t.jsx("div",{className:"flex-1 max-w-md ml-auto",children:t.jsx(fe,{label:"Buscar plantillas",value:i,onChange:Q,icon:V})}),e[33]=i,e[34]=x):x=e[34];let f;e[35]!==o||e[36]!==h||e[37]!==x?(f=t.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-4",children:t.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[M,o,h,x]})}),e[35]=o,e[36]=h,e[37]=x,e[38]=f):f=e[38];let G;e[39]===Symbol.for("react.memo_cache_sentinel")?(G={height:"calc(100vh - 320px)",width:"100%"},e[39]=G):G=e[39];let p;e[40]!==i||e[41]!==a?(p=t.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:t.jsx("div",{className:"ag-theme-quartz",style:G,children:t.jsx(je,{rowData:a,columnDefs:me,defaultColDef:oe,quickFilterText:i,pagination:!0,paginationPageSize:20,rowHeight:60,theme:ge,animateRows:!0,suppressCellFocus:!0})})}),e[40]=i,e[41]=a,e[42]=p):p=e[42];let u;e[43]!==a.length?(u=t.jsxs("span",{children:["Total: ",a.length," plantillas"]}),e[43]=a.length,e[44]=u):u=e[44];let I;e[45]===Symbol.for("react.memo_cache_sentinel")?(I=t.jsx("span",{children:"•"}),e[45]=I):I=e[45];let j;e[46]!==a?(j=a.filter(Ie),e[46]=a,e[47]=j):j=e[47];let g;e[48]!==j.length?(g=t.jsxs("span",{children:["Activas: ",j.length]}),e[48]=j.length,e[49]=g):g=e[49];let H;e[50]===Symbol.for("react.memo_cache_sentinel")?(H=t.jsx("span",{children:"•"}),e[50]=H):H=e[50];let _;e[51]!==a?(_=a.filter(He),e[51]=a,e[52]=_):_=e[52];let v;e[53]!==_.length?(v=t.jsxs("span",{children:["Con examen: ",_.length]}),e[53]=_.length,e[54]=v):v=e[54];let N;e[55]!==u||e[56]!==g||e[57]!==v?(N=t.jsxs("div",{className:"mt-4 flex gap-4 text-sm text-gray-500",children:[u,I,g,H,v]}),e[55]=u,e[56]=g,e[57]=v,e[58]=N):N=e[58];let O;return e[59]!==f||e[60]!==p||e[61]!==N?(O=t.jsx(he,{children:t.jsxs("div",{className:"p-6",children:[L,f,p,N]})}),e[59]=f,e[60]=p,e[61]=N,e[62]=O):O=e[62],O};function Re(s,e){const y=new URLSearchParams;s&&s!=="all"&&y.set("level_id",s),e&&e!=="all"&&y.set("modality",e),Z.get(`/admin/class-templates?${y.toString()}`,{},{preserveState:!0,replace:!0})}function Te(){w.success("Plantilla eliminada exitosamente")}function Pe(){w.error("Error al eliminar plantilla")}function Ae(s){if(s.scheduled_classes_count>0){w.error("No se puede eliminar",{description:"Esta plantilla tiene clases programadas asociadas"});return}confirm(`¿Estás seguro de eliminar la plantilla "${s.title}"?`)&&Z.delete(`/admin/class-templates/${s.id}`,{onSuccess:Te,onError:Pe})}function ke(){w.success("Plantilla duplicada exitosamente")}function ze(){w.error("Error al duplicar plantilla")}function Be(s){Z.post(`/admin/class-templates/${s.id}/duplicate`,{},{onSuccess:ke,onError:ze})}function De(s){return t.jsx("div",{className:"flex items-center justify-center h-full",children:t.jsxs("span",{className:"text-sm font-bold text-gray-700",children:["S",s.value]})})}function Le(s){const e=s.data;return t.jsxs("div",{className:"flex items-center py-2 h-full gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0",style:{backgroundColor:e.academic_level?.color||"#3B82F6"},children:t.jsx(Ce,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:e.title}),t.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-2",children:[t.jsx("span",{children:e.academic_level?.name}),t.jsx(ee,{variant:e.modality==="theoretical"?"secondary":"default",className:"text-[10px] px-1.5 py-0",children:e.modality==="theoretical"?"Teórica":"Práctica"})]})]})]})}function Me(s){const e=s.data;return t.jsxs("div",{className:"flex items-center gap-3 h-full",children:[t.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-600",title:"Preguntas",children:[t.jsx(Fe,{className:"w-3.5 h-3.5"}),t.jsx("span",{children:e.questions_count})]}),t.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-600",title:"Recursos",children:[t.jsx(xe,{className:"w-3.5 h-3.5"}),t.jsx("span",{children:e.resources_count})]}),e.intro_video_url&&t.jsx("div",{className:"flex items-center gap-1 text-xs text-green-600",title:"Tiene video",children:t.jsx(Ee,{className:"w-3.5 h-3.5"})})]})}function $e(s){return t.jsx("div",{className:"flex items-center h-full",children:t.jsxs("span",{className:"text-sm text-gray-600",children:[s.value," min"]})})}function qe(s){const e=s.data;return e.has_exam?t.jsxs("div",{className:"flex flex-col h-full justify-center",children:[t.jsxs("span",{className:"text-xs text-gray-600",children:[e.exam_questions_count," preguntas"]}),t.jsxs("span",{className:"text-[10px] text-gray-400",children:["Aprobar: ",e.exam_passing_score,"%"]})]}):t.jsx("span",{className:"text-xs text-gray-400",children:"Sin examen"})}function Qe(s){return t.jsx("div",{className:"flex items-center justify-center h-full",children:t.jsx(ee,{variant:"outline",className:"text-xs",children:s.value})})}function Ve(s){return t.jsx("div",{className:"flex items-center h-full",children:t.jsx(ee,{variant:s.value?"default":"secondary",children:s.value?"Activo":"Inactivo"})})}function Ge(s){return{value:String(s.id),label:s.name}}function Ie(s){return s.is_active}function He(s){return s.has_exam}export{bt as default};
