import{r as i,a as g,j as e,H as x}from"./app-BvbNnLoR.js";import{A as h,D as N}from"./AuthenticatedLayout-NwZalSmh.js";import{F as n}from"./file-text-B1oH4mmZ.js";import{D as v}from"./dollar-sign-CqldXq0F.js";import{C as p}from"./circle-check-big-BlDS2xCF.js";import{C as y}from"./calendar-Bjm7q7cf.js";/* empty css            */import"./button-KJG7UIUs.js";import"./clsx-B-dksMZM.js";import"./dropdown-menu-DMhnqRYW.js";import"./createLucideIcon-NFFJKC7C.js";import"./index-Bv84iyJU.js";import"./index-CVFg8KXe.js";import"./index-DzTyH7oD.js";import"./badge-CI6O7n2i.js";import"./triangle-alert-DI2ZvdH-.js";import"./clock-DIEk3TwA.js";const _=()=>{const[a,j]=i.useState([]),[u,c]=i.useState(!0);i.useEffect(()=>{b()},[]);const b=async()=>{try{c(!0);const l=(await g.get("/api/student/enrollment")).data.enrollment;if(l&&l.installments){const m=[];l.installments.forEach(r=>{r.vouchers&&r.vouchers.length>0&&r.vouchers.forEach(t=>{t.status==="approved"&&m.push({id:t.id,voucherId:t.id,installmentNumber:r.installmentNumber,amount:t.declaredAmount,paymentDate:t.paymentDate,paymentMethod:t.paymentMethod,status:t.status,receiptUrl:t.receiptUrl||null})})}),j(m)}}catch(s){console.error("Error fetching invoices:",s)}finally{c(!1)}},d=s=>new Intl.NumberFormat("es-PE",{style:"currency",currency:"PEN"}).format(s),o=s=>new Date(s).toLocaleDateString("es-PE",{year:"numeric",month:"long",day:"numeric"}),f=s=>({card:"Tarjeta de Crédito",transfer:"Transferencia Bancaria",cash:"Efectivo",yape:"Yape",deposit:"Depósito"})[s]||s;return u?e.jsxs(h,{children:[e.jsx(x,{title:"Mi Facturación"}),e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Cargando historial de pagos..."})]})})]}):e.jsxs(h,{children:[e.jsx(x,{title:"Mi Facturación"}),e.jsxs("div",{className:"p-8 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 tracking-tight",children:"Mi Facturación"}),e.jsx("p",{className:"text-slate-600 mt-1",children:"Historial de pagos y comprobantes"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-slate-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(n,{className:"w-8 h-8 text-[#073372]"})}),e.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Total de Pagos"}),e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:a.length})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-slate-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(v,{className:"w-8 h-8 text-[#17BC91]"})}),e.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Total Pagado"}),e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:d(a.reduce((s,l)=>s+l.amount,0))})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-slate-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(p,{className:"w-8 h-8 text-green-600"})}),e.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Último Pago"}),e.jsx("p",{className:"text-lg font-bold text-slate-900",children:a.length>0?o(a[a.length-1].paymentDate):"-"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200",children:[e.jsxs("div",{className:"p-6 border-b border-slate-200",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Historial de Comprobantes"}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Todos tus pagos verificados y aprobados"})]}),a.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(n,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"No tienes pagos registrados aún"}),e.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"Tus pagos aprobados aparecerán aquí"})]}):e.jsx("div",{className:"divide-y divide-slate-200",children:a.map(s=>e.jsx("div",{className:"p-6 hover:bg-slate-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-[#073372] to-[#17BC91] flex-shrink-0",children:e.jsx(n,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900",children:["Cuota #",s.installmentNumber]}),e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:[e.jsx(p,{className:"w-3 h-3 mr-1"}),"Pagado"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500 mb-1",children:"Monto"}),e.jsx("p",{className:"font-bold text-slate-900",children:d(s.amount)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500 mb-1",children:"Fecha de Pago"}),e.jsxs("p",{className:"font-medium text-slate-900 flex items-center",children:[e.jsx(y,{className:"w-4 h-4 mr-1 text-blue-600"}),o(s.paymentDate)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500 mb-1",children:"Método de Pago"}),e.jsx("p",{className:"font-medium text-slate-900",children:f(s.paymentMethod)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500 mb-1",children:"Estado"}),e.jsx("p",{className:"font-medium text-green-600",children:"Verificado"})]})]})]})]}),e.jsx("div",{className:"flex items-center space-x-2 ml-4",children:s.receiptUrl&&e.jsx("a",{href:s.receiptUrl,target:"_blank",rel:"noopener noreferrer",className:"p-3 bg-blue-50 hover:bg-blue-100 text-blue-600 rounded-lg transition-colors",title:"Descargar comprobante",children:e.jsx(N,{className:"w-5 h-5"})})})]})},s.id))})]})]})]})};export{_ as default};
