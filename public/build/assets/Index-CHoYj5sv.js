import{c as Je,r as ee,j as t,b as u}from"./app-oasHVRGz.js";import{t as Z,A as Ke}from"./AuthenticatedLayout-DP5yr10U.js";import{I as d}from"./input-ufSqE6eA.js";import{B as Ie}from"./button-DbKfLmbi.js";import{D as Qe,a as Ve,b as We,c as Xe}from"./dialog-BHfAxvDE.js";import{L as r}from"./label-BxMIdpXB.js";import{T as Ye,S as Ze,a as et}from"./textarea-DRUJ3UqL.js";import{S as qe}from"./Select2-seEcANdh.js";import{C as Ae}from"./credit-card-D7_JkF1d.js";import{P as tt,T as st}from"./trash-2-BIw-k7N_.js";import{c as at}from"./createLucideIcon-Dvi7KTyo.js";/* empty css            */import"./graduation-cap-CCl922m_.js";import"./settings-C5QqYU0I.js";import"./video-D9LyvvWr.js";import"./chart-pie-BmgKQ4xa.js";import"./users-BoRF3clh.js";import"./book-open-Bn0t0qjO.js";import"./award-FTHGnkpe.js";import"./user-check-ChrUBq2M.js";import"./index-CIAZVRYu.js";import"./utils-D0Zg16Wk.js";import"./index-TG2-Z3TU.js";import"./index-BPGckCtN.js";import"./index-DsZIUVuz.js";import"./index-BjHyLgVB.js";import"./index-CFVWQUCX.js";import"./floating-ui.dom-l_pIkl4b.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],nt=at("TrendingUp",lt),Ut=n=>{const e=Je.c(144),{paymentPlans:Be,academicLevels:c,selectedLevelId:$e}=n,[te]=ee.useState(Be),[o,ze]=ee.useState($e),[De,p]=ee.useState(!1),[x,Me]=ee.useState(null);let se;e[0]===Symbol.for("react.memo_cache_sentinel")?(se={name:"",academic_level_id:void 0,installments_count:1,monthly_amount:0,total_amount:0,discount_percentage:0,duration_months:1,late_fee_percentage:5,grace_period_days:5,is_active:!0,description:""},e[0]=se):se=e[0];const[s,i]=ee.useState(se);let ae;e[1]!==te||e[2]!==o?(ae=o?te.filter(a=>a.academic_level_id===o):te,e[1]=te,e[2]=o,e[3]=ae):ae=e[3];const h=ae;let le;e[4]===Symbol.for("react.memo_cache_sentinel")?(le=a=>{const l=a===""||a===null?void 0:Number(a);ze(l),l?u.get(`/admin/payment-plans?academic_level_id=${l}`,{},{preserveState:!0,preserveScroll:!0}):u.get("/admin/payment-plans",{},{preserveState:!0,preserveScroll:!0})},e[4]=le):le=e[4];const Re=le;let ne;e[5]!==c[0]?.id||e[6]!==o?(ne=()=>{Me(null),i({name:"",academic_level_id:o||c[0]?.id,installments_count:1,monthly_amount:0,total_amount:0,discount_percentage:0,duration_months:1,late_fee_percentage:5,grace_period_days:5,is_active:!0,description:""}),p(!0)},e[5]=c[0]?.id,e[6]=o,e[7]=ne):ne=e[7];const Ee=ne;let ie;e[8]===Symbol.for("react.memo_cache_sentinel")?(ie=a=>{Me(a),i({name:a.name,academic_level_id:a.academic_level_id,installments_count:a.installments_count,monthly_amount:a.monthly_amount,total_amount:a.total_amount,discount_percentage:a.discount_percentage,duration_months:a.duration_months,late_fee_percentage:a.late_fee_percentage,grace_period_days:a.grace_period_days,is_active:a.is_active,description:a.description||""}),p(!0)},e[8]=ie):ie=e[8];const Ue=ie;let oe;e[9]!==x||e[10]!==s?(oe=a=>{a.preventDefault();const{academic_level:l,...Fe}=s;x?u.put(`/admin/payment-plans/${x.id}`,Fe,{onSuccess:()=>{Z.success("Plan de pago actualizado exitosamente"),p(!1),u.reload({only:["paymentPlans"]})},onError:it}):u.post("/admin/payment-plans",Fe,{onSuccess:()=>{Z.success("Plan de pago creado exitosamente"),p(!1),u.reload({only:["paymentPlans"]})},onError:ot})},e[9]=x,e[10]=s,e[11]=oe):oe=e[11];const Te=oe,Ge=mt;let re;e[12]!==s?(re=()=>{const a=s.monthly_amount||0,l=s.installments_count||1,Fe=s.discount_percentage||0,Oe=a*l*(1-Fe/100);i({...s,total_amount:Math.round(Oe*100)/100})},e[12]=s,e[13]=re):re=e[13];const m=re;let ce;e[14]===Symbol.for("react.memo_cache_sentinel")?(ce=t.jsxs("div",{children:[t.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[t.jsx(Ae,{className:"w-8 h-8 text-blue-600"}),"Planes de Pago"]}),t.jsx("p",{className:"text-gray-600 mt-1",children:"Configura los planes de pago por nivel académico"})]}),e[14]=ce):ce=e[14];let me;e[15]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx(tt,{className:"w-4 h-4"}),e[15]=me):me=e[15];let _;e[16]!==Ee?(_=t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[ce,t.jsxs(Ie,{onClick:Ee,className:"flex items-center gap-2",children:[me,"Nuevo Plan"]})]}),e[16]=Ee,e[17]=_):_=e[17];let de;e[18]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsx(r,{htmlFor:"level-filter",children:"Filtrar por Nivel Académico"}),e[18]=de):de=e[18];let ue;e[19]===Symbol.for("react.memo_cache_sentinel")?(ue=a=>Re(a),e[19]=ue):ue=e[19];let pe;e[20]===Symbol.for("react.memo_cache_sentinel")?(pe={value:"",label:"Todos los niveles"},e[20]=pe):pe=e[20];let f;e[21]!==c?(f=[pe,...c.map(dt)],e[21]=c,e[22]=f):f=e[22];let g;e[23]!==o||e[24]!==f?(g=t.jsxs("div",{className:"mb-6 max-w-xs",children:[de,t.jsx(qe,{id:"level-filter",value:o,onChange:ue,options:f})]}),e[23]=o,e[24]=f,e[25]=g):g=e[25];let v;if(e[26]!==h){let a;e[28]===Symbol.for("react.memo_cache_sentinel")?(a=l=>t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border-t-4",style:{borderTopColor:l.academic_level?.color||"#3B82F6"},children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"flex items-center gap-2 mb-2",children:t.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold",style:{backgroundColor:`${l.academic_level?.color}20`,color:l.academic_level?.color||"#3B82F6"},children:l.academic_level?.name})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900",children:l.name})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>Ue(l),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:t.jsx(et,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>Ge(l),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:t.jsx(st,{className:"w-4 h-4"})})]})]}),l.description&&t.jsx("p",{className:"text-gray-600 text-sm mb-4",children:l.description}),t.jsxs("div",{className:"space-y-2 mb-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-gray-600 text-sm",children:"Cuotas:"}),t.jsx("span",{className:"font-semibold",children:l.installments_count})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-gray-600 text-sm",children:"Mensualidad:"}),t.jsxs("span",{className:"font-semibold",children:["S/ ",l.monthly_amount.toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-gray-600 text-sm",children:"Total:"}),t.jsxs("span",{className:"font-bold text-lg",children:["S/ ",l.total_amount.toFixed(2)]})]}),l.discount_percentage>0&&t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("span",{className:"text-green-600 text-sm flex items-center gap-1",children:[t.jsx(nt,{className:"w-3 h-3"}),"Descuento:"]}),t.jsxs("span",{className:"font-semibold text-green-600",children:[l.discount_percentage,"%"]})]})]}),t.jsxs("div",{className:"pt-4 border-t space-y-2",children:[t.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-600",children:[t.jsx("span",{children:"Duración:"}),t.jsxs("span",{children:[l.duration_months," meses"]})]}),t.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-600",children:[t.jsx("span",{children:"Mora mensual:"}),t.jsxs("span",{children:[l.late_fee_percentage,"%"]})]}),t.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-600",children:[t.jsx("span",{children:"Período de gracia:"}),t.jsxs("span",{children:[l.grace_period_days," días"]})]}),t.jsx("div",{className:"flex justify-between items-center",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${l.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:l.is_active?"Activo":"Inactivo"})})]})]},l.id),e[28]=a):a=e[28],v=h.map(a),e[26]=h,e[27]=v}else v=e[27];let j;e[29]!==v?(j=t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v}),e[29]=v,e[30]=j):j=e[30];let y;e[31]!==h.length||e[32]!==o?(y=h.length===0&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Ae,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-500 text-lg",children:o?"No hay planes de pago para este nivel académico":"No hay planes de pago registrados"}),t.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Crea el primer plan para comenzar"})]}),e[31]=h.length,e[32]=o,e[33]=y):y=e[33];const Le=x?"Editar Plan de Pago":"Nuevo Plan de Pago";let b;e[34]!==Le?(b=t.jsx(Qe,{children:t.jsx(Ve,{children:Le})}),e[34]=Le,e[35]=b):b=e[35];let xe;e[36]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsx(r,{htmlFor:"name",children:"Nombre del Plan *"}),e[36]=xe):xe=e[36];let N;e[37]!==s?(N=a=>i({...s,name:a.target.value}),e[37]=s,e[38]=N):N=e[38];let S;e[39]!==s.name||e[40]!==N?(S=t.jsxs("div",{className:"col-span-2",children:[xe,t.jsx(d,{id:"name",value:s.name,onChange:N,placeholder:"Ej: Plan Premium, Plan Estándar",required:!0})]}),e[39]=s.name,e[40]=N,e[41]=S):S=e[41];let he;e[42]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsx(r,{htmlFor:"academic_level_id",children:"Nivel Académico *"}),e[42]=he):he=e[42];const He=s.academic_level_id;let C;e[43]!==s?(C=a=>i({...s,academic_level_id:a}),e[43]=s,e[44]=C):C=e[44];let P;e[45]!==c?(P=c.map(ut),e[45]=c,e[46]=P):P=e[46];let w;e[47]!==s.academic_level_id||e[48]!==C||e[49]!==P?(w=t.jsxs("div",{className:"col-span-2",children:[he,t.jsx(qe,{id:"academic_level_id",value:He,onChange:C,options:P,required:!0})]}),e[47]=s.academic_level_id,e[48]=C,e[49]=P,e[50]=w):w=e[50];let _e;e[51]===Symbol.for("react.memo_cache_sentinel")?(_e=t.jsx(r,{htmlFor:"installments_count",children:"Número de Cuotas *"}),e[51]=_e):_e=e[51];let F;e[52]!==s?(F=a=>i({...s,installments_count:parseInt(a.target.value)}),e[52]=s,e[53]=F):F=e[53];let D;e[54]!==m||e[55]!==s.installments_count||e[56]!==F?(D=t.jsxs("div",{children:[_e,t.jsx(d,{id:"installments_count",type:"number",value:s.installments_count,onChange:F,onBlur:m,min:1,max:12,required:!0})]}),e[54]=m,e[55]=s.installments_count,e[56]=F,e[57]=D):D=e[57];let fe;e[58]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsx(r,{htmlFor:"duration_months",children:"Duración (meses) *"}),e[58]=fe):fe=e[58];let E;e[59]!==s?(E=a=>i({...s,duration_months:parseInt(a.target.value)}),e[59]=s,e[60]=E):E=e[60];let T;e[61]!==s.duration_months||e[62]!==E?(T=t.jsxs("div",{children:[fe,t.jsx(d,{id:"duration_months",type:"number",value:s.duration_months,onChange:E,min:1,required:!0})]}),e[61]=s.duration_months,e[62]=E,e[63]=T):T=e[63];let ge;e[64]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsx(r,{htmlFor:"monthly_amount",children:"Monto Mensual (S/) *"}),e[64]=ge):ge=e[64];let L;e[65]!==s?(L=a=>i({...s,monthly_amount:parseFloat(a.target.value)}),e[65]=s,e[66]=L):L=e[66];let k;e[67]!==m||e[68]!==s.monthly_amount||e[69]!==L?(k=t.jsxs("div",{children:[ge,t.jsx(d,{id:"monthly_amount",type:"number",step:"0.01",value:s.monthly_amount,onChange:L,onBlur:m,min:0,required:!0})]}),e[67]=m,e[68]=s.monthly_amount,e[69]=L,e[70]=k):k=e[70];let ve;e[71]===Symbol.for("react.memo_cache_sentinel")?(ve=t.jsx(r,{htmlFor:"discount_percentage",children:"Descuento (%)"}),e[71]=ve):ve=e[71];let I;e[72]!==s?(I=a=>i({...s,discount_percentage:parseFloat(a.target.value)}),e[72]=s,e[73]=I):I=e[73];let M;e[74]!==m||e[75]!==s.discount_percentage||e[76]!==I?(M=t.jsxs("div",{children:[ve,t.jsx(d,{id:"discount_percentage",type:"number",step:"0.01",value:s.discount_percentage,onChange:I,onBlur:m,min:0,max:100})]}),e[74]=m,e[75]=s.discount_percentage,e[76]=I,e[77]=M):M=e[77];let je;e[78]===Symbol.for("react.memo_cache_sentinel")?(je=t.jsx(r,{htmlFor:"total_amount",children:"Monto Total (S/) *"}),e[78]=je):je=e[78];let q;e[79]!==s?(q=a=>i({...s,total_amount:parseFloat(a.target.value)}),e[79]=s,e[80]=q):q=e[80];let A;e[81]!==s.total_amount||e[82]!==q?(A=t.jsx(d,{id:"total_amount",type:"number",step:"0.01",value:s.total_amount,onChange:q,min:0,required:!0}),e[81]=s.total_amount,e[82]=q,e[83]=A):A=e[83];let ye;e[84]===Symbol.for("react.memo_cache_sentinel")?(ye=t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Se calcula automáticamente según cuotas y descuento"}),e[84]=ye):ye=e[84];let B;e[85]!==A?(B=t.jsxs("div",{children:[je,A,ye]}),e[85]=A,e[86]=B):B=e[86];let be;e[87]===Symbol.for("react.memo_cache_sentinel")?(be=t.jsx(r,{htmlFor:"late_fee_percentage",children:"Mora Mensual (%)"}),e[87]=be):be=e[87];let $;e[88]!==s?($=a=>i({...s,late_fee_percentage:parseFloat(a.target.value)}),e[88]=s,e[89]=$):$=e[89];let z;e[90]!==s.late_fee_percentage||e[91]!==$?(z=t.jsxs("div",{children:[be,t.jsx(d,{id:"late_fee_percentage",type:"number",step:"0.01",value:s.late_fee_percentage,onChange:$,min:0,max:100})]}),e[90]=s.late_fee_percentage,e[91]=$,e[92]=z):z=e[92];let Ne;e[93]===Symbol.for("react.memo_cache_sentinel")?(Ne=t.jsx(r,{htmlFor:"grace_period_days",children:"Período de Gracia (días)"}),e[93]=Ne):Ne=e[93];let R;e[94]!==s?(R=a=>i({...s,grace_period_days:parseInt(a.target.value)}),e[94]=s,e[95]=R):R=e[95];let U;e[96]!==s.grace_period_days||e[97]!==R?(U=t.jsxs("div",{children:[Ne,t.jsx(d,{id:"grace_period_days",type:"number",value:s.grace_period_days,onChange:R,min:0})]}),e[96]=s.grace_period_days,e[97]=R,e[98]=U):U=e[98];let Se;e[99]===Symbol.for("react.memo_cache_sentinel")?(Se=t.jsx(r,{htmlFor:"description",children:"Descripción"}),e[99]=Se):Se=e[99];let G;e[100]!==s?(G=a=>i({...s,description:a.target.value}),e[100]=s,e[101]=G):G=e[101];let H;e[102]!==s.description||e[103]!==G?(H=t.jsxs("div",{className:"col-span-2",children:[Se,t.jsx(Ye,{id:"description",value:s.description,onChange:G,placeholder:"Descripción opcional del plan",rows:3})]}),e[102]=s.description,e[103]=G,e[104]=H):H=e[104];let O;e[105]!==s?(O=a=>i({...s,is_active:a}),e[105]=s,e[106]=O):O=e[106];let J;e[107]!==s.is_active||e[108]!==O?(J=t.jsx(Ze,{id:"is_active",checked:s.is_active,onCheckedChange:O}),e[107]=s.is_active,e[108]=O,e[109]=J):J=e[109];let Ce;e[110]===Symbol.for("react.memo_cache_sentinel")?(Ce=t.jsx(r,{htmlFor:"is_active",children:"Plan activo"}),e[110]=Ce):Ce=e[110];let K;e[111]!==J?(K=t.jsxs("div",{className:"col-span-2 flex items-center gap-2",children:[J,Ce]}),e[111]=J,e[112]=K):K=e[112];let Q;e[113]!==S||e[114]!==w||e[115]!==D||e[116]!==T||e[117]!==k||e[118]!==M||e[119]!==B||e[120]!==z||e[121]!==U||e[122]!==H||e[123]!==K?(Q=t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[S,w,D,T,k,M,B,z,U,H,K]}),e[113]=S,e[114]=w,e[115]=D,e[116]=T,e[117]=k,e[118]=M,e[119]=B,e[120]=z,e[121]=U,e[122]=H,e[123]=K,e[124]=Q):Q=e[124];let Pe;e[125]===Symbol.for("react.memo_cache_sentinel")?(Pe=t.jsx(Ie,{type:"button",variant:"outline",onClick:()=>p(!1),children:"Cancelar"}),e[125]=Pe):Pe=e[125];const ke=x?"Actualizar":"Crear";let V;e[126]!==ke?(V=t.jsxs("div",{className:"flex gap-2 justify-end pt-4 border-t",children:[Pe,t.jsx(Ie,{type:"submit",children:ke})]}),e[126]=ke,e[127]=V):V=e[127];let W;e[128]!==Te||e[129]!==Q||e[130]!==V?(W=t.jsxs("form",{onSubmit:Te,className:"space-y-4",children:[Q,V]}),e[128]=Te,e[129]=Q,e[130]=V,e[131]=W):W=e[131];let X;e[132]!==b||e[133]!==W?(X=t.jsxs(We,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[b,W]}),e[132]=b,e[133]=W,e[134]=X):X=e[134];let Y;e[135]!==De||e[136]!==X?(Y=t.jsx(Xe,{open:De,onOpenChange:p,children:X}),e[135]=De,e[136]=X,e[137]=Y):Y=e[137];let we;return e[138]!==_||e[139]!==g||e[140]!==j||e[141]!==y||e[142]!==Y?(we=t.jsx(Ke,{children:t.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[_,g,j,y,Y]})}),e[138]=_,e[139]=g,e[140]=j,e[141]=y,e[142]=Y,e[143]=we):we=e[143],we};function it(n){console.error(n),Z.error("Error al actualizar plan de pago")}function ot(n){console.error(n),Z.error("Error al crear plan de pago")}function rt(){Z.success("Plan de pago eliminado exitosamente"),u.reload({only:["paymentPlans"]})}function ct(){Z.error("Error al eliminar plan de pago")}function mt(n){confirm(`¿Estás seguro de eliminar el plan "${n.name}"?`)&&u.delete(`/admin/payment-plans/${n.id}`,{onSuccess:rt,onError:ct})}function dt(n){return{value:n.id,label:n.name}}function ut(n){return{value:n.id,label:n.name}}export{Ut as default};
