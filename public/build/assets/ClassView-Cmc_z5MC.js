import{r as N,c as me,j as t,b as _e}from"./app-Cfyhsxht.js";import{F as pe,D as he,t as fe,A as we}from"./AuthenticatedLayout-Dj17dz-p.js";import{c as je,B as Q}from"./button-ZKxXViWz.js";import{B as U}from"./badge-BLod1Xc0.js";import{a as ee,C as se,c as te,d as ae,b as de}from"./card-uoLVRnKB.js";import{P as ye}from"./progress-BDB6NR7O.js";import{L as Ce}from"./label-B_SJ4zAf.js";import{C as Se}from"./circle-check-big-DgHgvXFW.js";import{V as xe}from"./video-Bmak_coq.js";import{C as Ee}from"./chevron-up-BNbuk3XJ.js";import{C as ke}from"./chevron-down-na_oklSD.js";import{F as oe}from"./file-question-fOGa2ThC.js";import{A as Ve}from"./award-Cb3j59NO.js";import{P as ue}from"./play-DhiopfPJ.js";import{B as $e}from"./book-open-DPysh_-N.js";import{C as Ae}from"./clock-DF0U2L8u.js";/* empty css            */import"./dropdown-menu-DPcp8apS.js";import"./createLucideIcon-B282NP-J.js";import"./index-BqFrHW47.js";import"./index-C6thcnQc.js";import"./index-BHS6CGCm.js";import"./x-B2p3vTuZ.js";import"./triangle-alert-Dm1jxi9x.js";import"./clsx-B-dksMZM.js";const ge=N.createContext({}),be=N.forwardRef((n,e)=>{const s=me.c(27);let l,x,g,u,c,r,o,p;s[0]!==n?({className:x,value:p,onValueChange:r,defaultValue:g,disabled:u,name:c,children:l,...o}=n,s[0]=n,s[1]=l,s[2]=x,s[3]=g,s[4]=u,s[5]=c,s[6]=r,s[7]=o,s[8]=p):(l=s[1],x=s[2],g=s[3],u=s[4],c=s[5],r=s[6],o=s[7],p=s[8]);const[i,b]=N.useState(g),h=p!==void 0?p:i;let j;s[9]!==r||s[10]!==p?(j=M=>{p===void 0&&b(M),r?.(M)},s[9]=r,s[10]=p,s[11]=j):j=s[11];const a=j;let m;s[12]!==h||s[13]!==u||s[14]!==a||s[15]!==c?(m={value:h,onValueChange:a,name:c,disabled:u},s[12]=h,s[13]=u,s[14]=a,s[15]=c,s[16]=m):m=s[16];let d;s[17]!==x?(d=je("grid gap-2",x),s[17]=x,s[18]=d):d=s[18];let f;s[19]!==l||s[20]!==o||s[21]!==e||s[22]!==d?(f=t.jsx("div",{ref:e,role:"radiogroup",className:d,...o,children:l}),s[19]=l,s[20]=o,s[21]=e,s[22]=d,s[23]=f):f=s[23];let v;return s[24]!==m||s[25]!==f?(v=t.jsx(ge.Provider,{value:m,children:f}),s[24]=m,s[25]=f,s[26]=v):v=s[26],v});be.displayName="RadioGroup";const Ne=N.forwardRef((n,e)=>{const s=me.c(30);let l,x,g,u,c;s[0]!==n?({className:l,value:c,id:x,disabled:g,...u}=n,s[0]=n,s[1]=l,s[2]=x,s[3]=g,s[4]=u,s[5]=c):(l=s[1],x=s[2],g=s[3],u=s[4],c=s[5]);const r=N.useContext(ge),o=r.value===c,p=g||r.disabled,i=x||`radio-${c}`;let b;s[6]!==r||s[7]!==c?(b=()=>r.onValueChange?.(c),s[6]=r,s[7]=c,s[8]=b):b=s[8];let h;s[9]!==r.name||s[10]!==i||s[11]!==o||s[12]!==p||s[13]!==u||s[14]!==e||s[15]!==b||s[16]!==c?(h=t.jsx("input",{ref:e,type:"radio",id:i,name:r.name,value:c,checked:o,disabled:p,onChange:b,className:"sr-only peer",...u}),s[9]=r.name,s[10]=i,s[11]=o,s[12]=p,s[13]=u,s[14]=e,s[15]=b,s[16]=c,s[17]=h):h=s[17];const j=o&&"border-[#073372]";let a;s[18]!==l||s[19]!==j?(a=je("aspect-square h-4 w-4 rounded-full border border-gray-300 cursor-pointer","flex items-center justify-center","ring-offset-white transition-all duration-200","focus-within:ring-2 focus-within:ring-[#073372] focus-within:ring-offset-2","peer-disabled:cursor-not-allowed peer-disabled:opacity-50",j,l),s[18]=l,s[19]=j,s[20]=a):a=s[20];let m;s[21]!==o?(m=o&&t.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-[#073372] animate-in zoom-in-50 duration-200"}),s[21]=o,s[22]=m):m=s[22];let d;s[23]!==i||s[24]!==a||s[25]!==m?(d=t.jsx("label",{htmlFor:i,className:a,children:m}),s[23]=i,s[24]=a,s[25]=m,s[26]=d):d=s[26];let f;return s[27]!==h||s[28]!==d?(f=t.jsxs("div",{className:"relative flex items-center",children:[h,d]}),s[27]=h,s[28]=d,s[29]=f):f=s[29],f});Ne.displayName="RadioGroupItem";const cs=n=>{const e=me.c(79),{enrollment:s,examQuestions:l}=n,[x,g]=N.useState(!0),[u,c]=N.useState(!1),[r,o]=N.useState(0);let p;e[0]===Symbol.for("react.memo_cache_sentinel")?(p={},e[0]=p):p=e[0];const[i,b]=N.useState(p),[,h]=N.useState(!1),{scheduled_class:j}=s,{template:a}=j,m=j.recording_url||a.intro_video_url,d=!!j.recording_url,f=Re;let v;e[1]===Symbol.for("react.memo_cache_sentinel")?(v=()=>{c(!0),o(0),b({}),h(!1)},e[1]=v):v=e[1];const M=v;let H;e[2]===Symbol.for("react.memo_cache_sentinel")?(H=(_,w)=>{b(ce=>({...ce,[_]:w}))},e[2]=H):H=e[2];const ve=H;let Y;e[3]!==i||e[4]!==s.id||e[5]!==l?(Y=()=>{if(!l)return;const _=l.map((w,ce)=>i[ce]||null);_e.post(`/student/class-enrollments/${s.id}/submit-exam`,{answers:_},{onSuccess:()=>{fe.success("Examen enviado"),h(!0)},onError:De})},e[3]=i,e[4]=s.id,e[5]=l,e[6]=Y):Y=e[6];const le=Y;let J;e[7]!==i||e[8]!==l?(J=l?Math.round(Object.keys(i).length/l.length*100):0,e[7]=i,e[8]=l,e[9]=J):J=e[9];const re=J,ne=a.academic_level?.color||"#3B82F6";let y;e[10]!==ne?(y={backgroundColor:ne},e[10]=ne,e[11]=y):y=e[11];let K;e[12]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsx($e,{className:"w-7 h-7 text-white"}),e[12]=K):K=e[12];let C;e[13]!==y?(C=t.jsx("div",{className:"w-14 h-14 rounded-xl flex items-center justify-center",style:y,children:K}),e[13]=y,e[14]=C):C=e[14];let S;e[15]!==a.title?(S=t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:a.title}),e[15]=a.title,e[16]=S):S=e[16];let E;e[17]!==a.academic_level.name?(E=t.jsx(U,{variant:"outline",children:a.academic_level.name}),e[17]=a.academic_level.name,e[18]=E):E=e[18];let k;e[19]!==a.session_number?(k=t.jsxs(U,{variant:"secondary",children:["Sesi贸n ",a.session_number]}),e[19]=a.session_number,e[20]=k):k=e[20];let V;e[21]!==s.attended?(V=s.attended&&t.jsxs(U,{variant:"default",className:"bg-green-600",children:[t.jsx(Se,{className:"w-3 h-3 mr-1"}),"Asisti贸"]}),e[21]=s.attended,e[22]=V):V=e[22];let $;e[23]!==E||e[24]!==k||e[25]!==V?($=t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[E,k,V]}),e[23]=E,e[24]=k,e[25]=V,e[26]=$):$=e[26];let A;e[27]!==S||e[28]!==$?(A=t.jsxs("div",{children:[S,$]}),e[27]=S,e[28]=$,e[29]=A):A=e[29];let R;e[30]!==A||e[31]!==C?(R=t.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[C,A]}),e[30]=A,e[31]=C,e[32]=R):R=e[32];let D;e[33]!==a.description?(D=a.description&&t.jsx("p",{className:"text-gray-600 mt-3",children:a.description}),e[33]=a.description,e[34]=D):D=e[34];let F;e[35]!==R||e[36]!==D?(F=t.jsxs("div",{className:"mb-6",children:[R,D]}),e[35]=R,e[36]=D,e[37]=F):F=e[37];let W;e[38]===Symbol.for("react.memo_cache_sentinel")?(W=t.jsx(xe,{className:"h-5 w-5"}),e[38]=W):W=e[38];const ie=d?"Grabaci贸n de tu Clase":"Video Introductorio";let B;e[39]!==ie?(B=t.jsxs(ae,{className:"flex items-center gap-2",children:[W,ie]}),e[39]=ie,e[40]=B):B=e[40];let I;e[41]!==d?(I=d&&t.jsxs(U,{variant:"default",className:"bg-purple-600",children:[t.jsx(ue,{className:"w-3 h-3 mr-1"}),"Tu sesi贸n grabada"]}),e[41]=d,e[42]=I):I=e[42];let P;e[43]!==B||e[44]!==I?(P=t.jsx(te,{className:"pb-3",children:t.jsxs("div",{className:"flex items-center justify-between",children:[B,I]})}),e[43]=B,e[44]=I,e[45]=P):P=e[45];let G;e[46]!==m?(G=t.jsx(ee,{children:m?t.jsx("div",{className:"aspect-video rounded-lg overflow-hidden bg-black",children:t.jsx("iframe",{src:f(m),className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):t.jsx("div",{className:"aspect-video rounded-lg bg-gray-100 flex items-center justify-center",children:t.jsxs("div",{className:"text-center text-gray-500",children:[t.jsx(xe,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),t.jsx("p",{children:"El video estar谩 disponible pronto"})]})})}),e[46]=m,e[47]=G):G=e[47];let O;e[48]!==P||e[49]!==G?(O=t.jsxs(se,{className:"mb-6",children:[P,G]}),e[48]=P,e[49]=G,e[50]=O):O=e[50];let T;e[51]!==x||e[52]!==a.content||e[53]!==a.objectives?(T=a.content&&t.jsxs(se,{className:"mb-6",children:[t.jsx(te,{className:"cursor-pointer",onClick:()=>g(!x),children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs(ae,{className:"flex items-center gap-2",children:[t.jsx(pe,{className:"h-5 w-5"}),"Desarrollo de la Clase"]}),x?t.jsx(Ee,{className:"h-5 w-5"}):t.jsx(ke,{className:"h-5 w-5"})]})}),x&&t.jsxs(ee,{children:[a.objectives&&t.jsxs("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:[t.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:" Objetivos de Aprendizaje"}),t.jsx("div",{className:"text-blue-800 whitespace-pre-line",children:a.objectives})]}),t.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:a.content}})]})]}),e[51]=x,e[52]=a.content,e[53]=a.objectives,e[54]=T):T=e[54];let q;e[55]!==a.resources?(q=a.resources.length>0&&t.jsxs(se,{className:"mb-6",children:[t.jsxs(te,{children:[t.jsxs(ae,{className:"flex items-center gap-2",children:[t.jsx(he,{className:"h-5 w-5"}),"Material Descargable"]}),t.jsx(de,{children:"Descarga estos recursos para complementar tu aprendizaje"})]}),t.jsx(ee,{children:t.jsx("div",{className:"grid grid-cols-2 gap-4",children:a.resources.map(Fe)})})]}),e[55]=a.resources,e[56]=q):q=e[56];let z;e[57]!==i||e[58]!==r||e[59]!==s.exam_completed||e[60]!==s.latest_exam_attempt||e[61]!==re||e[62]!==l||e[63]!==le||e[64]!==u||e[65]!==a.exam_passing_score||e[66]!==a.exam_questions_count||e[67]!==a.has_exam?(z=a.has_exam&&t.jsxs(se,{children:[t.jsxs(te,{children:[t.jsxs(ae,{className:"flex items-center gap-2",children:[t.jsx(oe,{className:"h-5 w-5"}),"Evaluaci贸n de la Sesi贸n"]}),t.jsxs(de,{children:["Responde las preguntas para completar esta sesi贸n. Necesitas ",a.exam_passing_score,"% para aprobar."]})]}),t.jsx(ee,{children:s.exam_completed&&s.latest_exam_attempt?t.jsxs("div",{className:"text-center py-6",children:[t.jsx("div",{className:`w-24 h-24 mx-auto rounded-full flex items-center justify-center mb-4 ${s.latest_exam_attempt.passed?"bg-green-100":"bg-red-100"}`,children:s.latest_exam_attempt.passed?t.jsx(Ve,{className:"w-12 h-12 text-green-600"}):t.jsx(oe,{className:"w-12 h-12 text-red-600"})}),t.jsx("h3",{className:"text-xl font-bold mb-2",children:s.latest_exam_attempt.passed?"隆Felicitaciones!":"Sigue intentando"}),t.jsxs("p",{className:"text-gray-600 mb-4",children:["Obtuviste ",s.latest_exam_attempt.score," de ",s.latest_exam_attempt.total_points," puntos"]}),t.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-full",children:[t.jsxs("span",{className:`text-2xl font-bold ${s.latest_exam_attempt.passed?"text-green-600":"text-red-600"}`,children:[s.latest_exam_attempt.percentage,"%"]}),t.jsx(U,{variant:s.latest_exam_attempt.passed?"default":"destructive",children:s.latest_exam_attempt.passed?"Aprobado":"No aprobado"})]}),!s.latest_exam_attempt.passed&&t.jsx(Q,{className:"mt-6",onClick:M,children:"Intentar de nuevo"})]}):u&&l?t.jsxs("div",{children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("span",{className:"text-sm text-gray-600",children:["Pregunta ",r+1," de ",l.length]}),t.jsxs("span",{className:"text-sm text-gray-600",children:[Object.keys(i).length," respondidas"]})]}),t.jsx(ye,{value:re,className:"h-2"})]}),t.jsxs("div",{className:"p-6 bg-gray-50 rounded-lg mb-6",children:[t.jsx("p",{className:"text-lg font-medium mb-4",children:l[r].question}),t.jsx(be,{value:i[r]||"",onValueChange:_=>ve(r,_),children:l[r].options.map(Be)})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(Q,{variant:"outline",onClick:()=>o(Ie),disabled:r===0,children:"Anterior"}),t.jsx("div",{className:"flex gap-1",children:l.map((_,w)=>t.jsx("button",{onClick:()=>o(w),className:`w-8 h-8 rounded text-sm font-medium transition ${w===r?"bg-blue-600 text-white":i[w]?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:w+1},w))}),r===l.length-1?t.jsx(Q,{onClick:le,disabled:Object.keys(i).length<l.length,children:"Enviar Examen"}):t.jsx(Q,{onClick:()=>o(_=>Math.min(l.length-1,_+1)),children:"Siguiente"})]})]}):t.jsxs("div",{className:"text-center py-8",children:[t.jsx(oe,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"驴Listo para la evaluaci贸n?"}),t.jsxs("p",{className:"text-gray-600 mb-6",children:["Tendr谩s ",a.exam_questions_count," preguntas aleatorias.",t.jsx("br",{}),"Necesitas ",a.exam_passing_score,"% para aprobar."]}),t.jsxs(Q,{size:"lg",onClick:M,children:[t.jsx(ue,{className:"w-4 h-4 mr-2"}),"Comenzar Evaluaci贸n"]})]})})]}),e[57]=i,e[58]=r,e[59]=s.exam_completed,e[60]=s.latest_exam_attempt,e[61]=re,e[62]=l,e[63]=le,e[64]=u,e[65]=a.exam_passing_score,e[66]=a.exam_questions_count,e[67]=a.has_exam,e[68]=z):z=e[68];let X;e[69]===Symbol.for("react.memo_cache_sentinel")?(X=t.jsx(Ae,{className:"w-4 h-4"}),e[69]=X):X=e[69];let L;e[70]!==a.duration_minutes?(L=t.jsxs("div",{className:"mt-6 flex items-center justify-center gap-2 text-sm text-gray-500",children:[X,t.jsxs("span",{children:["Duraci贸n estimada: ",a.duration_minutes," minutos"]})]}),e[70]=a.duration_minutes,e[71]=L):L=e[71];let Z;return e[72]!==F||e[73]!==O||e[74]!==T||e[75]!==q||e[76]!==z||e[77]!==L?(Z=t.jsx(we,{children:t.jsxs("div",{className:"max-w-5xl mx-auto p-6",children:[F,O,T,q,z,L]})}),e[72]=F,e[73]=O,e[74]=T,e[75]=q,e[76]=z,e[77]=L,e[78]=Z):Z=e[78],Z};function Re(n){if(!n)return"";const e=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,s=n.match(e);return s&&s[2].length===11?`https://www.youtube.com/embed/${s[2]}`:n}function De(){fe.error("Error al enviar el examen")}function Fe(n){return t.jsxs("a",{href:`/storage/${n.file_path}`,download:!0,className:"flex items-center gap-3 p-4 border rounded-lg hover:bg-gray-50 transition group",children:[t.jsx("div",{className:"w-12 h-12 rounded-lg bg-blue-100 flex items-center justify-center group-hover:bg-blue-200 transition",children:t.jsx(pe,{className:"w-6 h-6 text-blue-600"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-medium text-gray-900 truncate",children:n.name}),t.jsx("p",{className:"text-sm text-gray-500",children:n.file_type.toUpperCase()})]}),t.jsx(he,{className:"w-5 h-5 text-gray-400 group-hover:text-blue-600"})]},n.id)}function Be(n,e){return t.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-white rounded-lg mb-2 hover:bg-blue-50 transition",children:[t.jsx(Ne,{value:n.text,id:`option-${e}`}),t.jsx(Ce,{htmlFor:`option-${e}`,className:"flex-1 cursor-pointer",children:n.text})]},e)}function Ie(n){return Math.max(0,n-1)}export{cs as default};
