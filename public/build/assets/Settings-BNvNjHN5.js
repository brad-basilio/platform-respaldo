import{r as S,u as C,j as t,H as ce}from"./app-BMO9C2Ar.js";import{A as de}from"./AuthenticatedLayout-Bk5jCDBo.js";import{S as ue,I as R}from"./input-CiBL6Pqq.js";import{e as G,f as V,g as W,h as pe,i as me,d as N,t as j}from"./DocumentConfirmationModal-BUWrLga5.js";/* empty css            */import"./button-Zwe6i80q.js";import"./clsx-B-dksMZM.js";import"./dropdown-menu-QNth83iw.js";import"./createLucideIcon-Ln3AbR0m.js";import"./index-Dz28Ues4.js";import"./index-DsdQKkrg.js";import"./index-DKDsphHz.js";import"./badge-yB9TWn40.js";import"./file-text-HrvCTCfV.js";import"./triangle-alert-DM_Mnhis.js";import"./circle-check-big-CAdvzbmF.js";import"./clock-BFxZDaQO.js";var B={exports:{}},A,q;function fe(){if(q)return A;q=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return A=n,A}var F,U;function he(){if(U)return F;U=1;var n=fe();function r(){}function s(){}return s.resetWarningCache=r,F=function(){function i(e,c,u,m,f,p){if(p!==n){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}i.isRequired=i;function l(){return i}var d={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:l,element:i,elementType:i,instanceOf:l,node:i,objectOf:l,oneOf:l,oneOfType:l,shape:l,exact:l,checkPropTypes:s,resetWarningCache:r};return d.PropTypes=d,d},F}var $;function ge(){return $||($=1,B.exports=he()()),B.exports}var a=ge(),H=function(){return H=Object.assign||function(n){for(var r,s=1,i=arguments.length;s<i;s++){r=arguments[s];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(n[l]=r[l])}return n},H.apply(this,arguments)},ne={onActivate:a.func,onAddUndo:a.func,onBeforeAddUndo:a.func,onBeforeExecCommand:a.func,onBeforeGetContent:a.func,onBeforeRenderUI:a.func,onBeforeSetContent:a.func,onBeforePaste:a.func,onBlur:a.func,onChange:a.func,onClearUndos:a.func,onClick:a.func,onContextMenu:a.func,onCommentChange:a.func,onCompositionEnd:a.func,onCompositionStart:a.func,onCompositionUpdate:a.func,onCopy:a.func,onCut:a.func,onDblclick:a.func,onDeactivate:a.func,onDirty:a.func,onDrag:a.func,onDragDrop:a.func,onDragEnd:a.func,onDragGesture:a.func,onDragOver:a.func,onDrop:a.func,onExecCommand:a.func,onFocus:a.func,onFocusIn:a.func,onFocusOut:a.func,onGetContent:a.func,onHide:a.func,onInit:a.func,onInput:a.func,onKeyDown:a.func,onKeyPress:a.func,onKeyUp:a.func,onLoadContent:a.func,onMouseDown:a.func,onMouseEnter:a.func,onMouseLeave:a.func,onMouseMove:a.func,onMouseOut:a.func,onMouseOver:a.func,onMouseUp:a.func,onNodeChange:a.func,onObjectResizeStart:a.func,onObjectResized:a.func,onObjectSelected:a.func,onPaste:a.func,onPostProcess:a.func,onPostRender:a.func,onPreProcess:a.func,onProgressState:a.func,onRedo:a.func,onRemove:a.func,onReset:a.func,onSaveContent:a.func,onSelectionChange:a.func,onSetAttrib:a.func,onSetContent:a.func,onShow:a.func,onSubmit:a.func,onUndo:a.func,onVisualAid:a.func,onSkinLoadError:a.func,onThemeLoadError:a.func,onModelLoadError:a.func,onPluginLoadError:a.func,onIconsLoadError:a.func,onLanguageLoadError:a.func,onScriptsLoad:a.func,onScriptsLoadError:a.func},be=H({apiKey:a.string,licenseKey:a.string,id:a.string,inline:a.bool,init:a.object,initialValue:a.string,onEditorChange:a.func,value:a.string,tagName:a.string,tabIndex:a.number,cloudChannel:a.string,plugins:a.oneOfType([a.string,a.array]),toolbar:a.oneOfType([a.string,a.array]),disabled:a.bool,readonly:a.bool,textareaName:a.string,tinymceScriptSrc:a.oneOfType([a.string,a.arrayOf(a.string),a.arrayOf(a.shape({src:a.string,async:a.bool,defer:a.bool}))]),rollback:a.oneOfType([a.number,a.oneOf([!1])]),scriptLoading:a.shape({async:a.bool,defer:a.bool,delay:a.number})},ne),re=function(n){var r=n;return r&&r.tinymce?r.tinymce:null},M=function(n){return typeof n=="function"},X=function(n){return n in ne},J=function(n){return n.substr(2)},ve=function(n,r,s,i,l,d,e){var c=Object.keys(l).filter(X),u=Object.keys(d).filter(X),m=c.filter(function(p){return d[p]===void 0}),f=u.filter(function(p){return l[p]===void 0});m.forEach(function(p){var g=J(p),y=e[g];s(g,y),delete e[g]}),f.forEach(function(p){var g=i(n,p),y=J(p);e[y]=g,r(y,g)})},ye=function(n,r,s,i,l){return ve(l,n.on.bind(n),n.off.bind(n),function(d,e){return function(c){var u;return(u=d(e))===null||u===void 0?void 0:u(c,n)}},r,s,i)},Y=0,ie=function(n){var r=Date.now(),s=Math.floor(Math.random()*1e9);return Y++,n+"_"+s+Y+String(r)},Q=function(n){return n!==null&&(n.tagName.toLowerCase()==="textarea"||n.tagName.toLowerCase()==="input")},Z=function(n){return typeof n>"u"||n===""?[]:Array.isArray(n)?n:n.split(" ")},xe=function(n,r){return Z(n).concat(Z(r))},_e=function(){return window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"},je=function(n){if(!("isConnected"in Node.prototype)){for(var r=n,s=n.parentNode;s!=null;)r=s,s=r.parentNode;return r===n.ownerDocument}return n.isConnected},ee=function(n,r){n!==void 0&&(n.mode!=null&&typeof n.mode=="object"&&typeof n.mode.set=="function"?n.mode.set(r):n.setMode(r))},we=function(n){var r=re(n);if(!r)throw new Error("tinymce should have been loaded into global scope");return r},te=function(n){return n.options&&n.options.isRegistered("disabled")},K=function(){return K=Object.assign||function(n){for(var r,s=1,i=arguments.length;s<i;s++){r=arguments[s];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(n[l]=r[l])}return n},K.apply(this,arguments)},Ce=function(n,r,s){var i,l,d=n.createElement("script");d.referrerPolicy="origin",d.type="application/javascript",d.id=r.id,d.src=r.src,d.async=(i=r.async)!==null&&i!==void 0?i:!1,d.defer=(l=r.defer)!==null&&l!==void 0?l:!1;var e=function(){d.removeEventListener("load",e),d.removeEventListener("error",c),s(r.src)},c=function(u){d.removeEventListener("load",e),d.removeEventListener("error",c),s(r.src,u)};d.addEventListener("load",e),d.addEventListener("error",c),n.head&&n.head.appendChild(d)},Ne=function(n){var r={},s=function(e,c){var u=r[e];u.done=!0,u.error=c;for(var m=0,f=u.handlers;m<f.length;m++){var p=f[m];p(e,c)}u.handlers=[]},i=function(e,c,u){var m=function(k){return u!==void 0?u(k):console.error(k)};if(e.length===0){m(new Error("At least one script must be provided"));return}for(var f=0,p=!1,g=function(k,O){p||(O?(p=!0,m(O)):++f===e.length&&c())},y=0,v=e;y<v.length;y++){var x=v[y],_=r[x.src];if(_)_.done?g(x.src,_.error):_.handlers.push(g);else{var P=ie("tiny-");r[x.src]={id:P,src:x.src,done:!1,error:null,handlers:[g]},Ce(n,K({id:P},x),s)}}},l=function(){for(var e,c=0,u=Object.values(r);c<u.length;c++){var m=u[c],f=n.getElementById(m.id);f!=null&&f.tagName==="SCRIPT"&&((e=f.parentNode)===null||e===void 0||e.removeChild(f))}r={}},d=function(){return n};return{loadScripts:i,deleteScripts:l,getDocument:d}},Se=function(){var n=[],r=function(l){var d=n.find(function(e){return e.getDocument()===l});return d===void 0&&(d=Ne(l),n.push(d)),d},s=function(l,d,e,c,u){var m=function(){return r(l).loadScripts(d,c,u)};e>0?setTimeout(m,e):m()},i=function(){for(var l=n.pop();l!=null;l=n.pop())l.deleteScripts()};return{loadList:s,reinitialize:i}},Ee=Se(),ke=(function(){var n=function(r,s){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,l){i.__proto__=l}||function(i,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(i[d]=l[d])},n(r,s)};return function(r,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");n(r,s);function i(){this.constructor=r}r.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)}})(),E=function(){return E=Object.assign||function(n){for(var r,s=1,i=arguments.length;s<i;s++){r=arguments[s];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(n[l]=r[l])}return n},E.apply(this,arguments)},z="change keyup compositionend setcontent CommentChange",ae=(function(n){ke(r,n);function r(s){var i,l,d,e=n.call(this,s)||this;return e.rollbackTimer=void 0,e.valueCursor=void 0,e.rollbackChange=function(){var c=e.editor,u=e.props.value;c&&u&&u!==e.currentContent&&c.undoManager.ignore(function(){if(c.setContent(u),e.valueCursor&&(!e.inline||c.hasFocus()))try{c.selection.moveToBookmark(e.valueCursor)}catch{}}),e.rollbackTimer=void 0},e.handleBeforeInput=function(c){if(e.props.value!==void 0&&e.props.value===e.currentContent&&e.editor&&(!e.inline||e.editor.hasFocus()))try{e.valueCursor=e.editor.selection.getBookmark(3)}catch{}},e.handleBeforeInputSpecial=function(c){(c.key==="Enter"||c.key==="Backspace"||c.key==="Delete")&&e.handleBeforeInput(c)},e.handleEditorChange=function(c){var u=e.editor;if(u&&u.initialized){var m=u.getContent();e.props.value!==void 0&&e.props.value!==m&&e.props.rollback!==!1&&(e.rollbackTimer||(e.rollbackTimer=window.setTimeout(e.rollbackChange,typeof e.props.rollback=="number"?e.props.rollback:200))),m!==e.currentContent&&(e.currentContent=m,M(e.props.onEditorChange)&&e.props.onEditorChange(m,u))}},e.handleEditorChangeSpecial=function(c){(c.key==="Backspace"||c.key==="Delete")&&e.handleEditorChange(c)},e.initialise=function(c){var u,m,f;c===void 0&&(c=0);var p=e.elementRef.current;if(p){if(!je(p)){if(c===0)setTimeout(function(){return e.initialise(1)},1);else if(c<100)setTimeout(function(){return e.initialise(c+1)},100);else throw new Error("tinymce can only be initialised when in a document");return}var g=we(e.view),y=E(E(E(E({},e.props.init),{selector:void 0,target:p,disabled:e.props.disabled,readonly:e.props.readonly,inline:e.inline,plugins:xe((u=e.props.init)===null||u===void 0?void 0:u.plugins,e.props.plugins),toolbar:(m=e.props.toolbar)!==null&&m!==void 0?m:(f=e.props.init)===null||f===void 0?void 0:f.toolbar}),e.props.licenseKey?{license_key:e.props.licenseKey}:{}),{setup:function(v){e.editor=v,e.bindHandlers({}),e.inline&&!Q(p)&&v.once("PostRender",function(x){v.setContent(e.getInitialValue(),{no_events:!0})}),e.props.init&&M(e.props.init.setup)&&e.props.init.setup(v),e.props.disabled&&(te(e.editor)?e.editor.options.set("disabled",e.props.disabled):e.editor.mode.set("readonly"))},init_instance_callback:function(v){var x,_=e.getInitialValue();e.currentContent=(x=e.currentContent)!==null&&x!==void 0?x:v.getContent(),e.currentContent!==_&&(e.currentContent=_,v.setContent(_),v.undoManager.clear(),v.undoManager.add(),v.setDirty(!1)),e.props.init&&M(e.props.init.init_instance_callback)&&e.props.init.init_instance_callback(v)}});e.inline||(p.style.visibility=""),Q(p)&&(p.value=e.getInitialValue()),g.init(y)}},e.id=e.props.id||ie("tiny-react"),e.elementRef=S.createRef(),e.inline=(d=(i=e.props.inline)!==null&&i!==void 0?i:(l=e.props.init)===null||l===void 0?void 0:l.inline)!==null&&d!==void 0?d:!1,e.boundHandlers={},e}return Object.defineProperty(r.prototype,"view",{get:function(){var s,i;return(i=(s=this.elementRef.current)===null||s===void 0?void 0:s.ownerDocument.defaultView)!==null&&i!==void 0?i:window},enumerable:!1,configurable:!0}),r.prototype.componentDidUpdate=function(s){var i=this,l,d;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(s),this.editor.initialized)){if(this.currentContent=(l=this.currentContent)!==null&&l!==void 0?l:this.editor.getContent(),typeof this.props.initialValue=="string"&&this.props.initialValue!==s.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if(typeof this.props.value=="string"&&this.props.value!==this.currentContent){var e=this.editor;e.undoManager.transact(function(){var u;if(!i.inline||e.hasFocus())try{u=e.selection.getBookmark(3)}catch{}var m=i.valueCursor;if(e.setContent(i.props.value),!i.inline||e.hasFocus())for(var f=0,p=[u,m];f<p.length;f++){var g=p[f];if(g)try{e.selection.moveToBookmark(g),i.valueCursor=g;break}catch{}}})}if(this.props.readonly!==s.readonly){var c=(d=this.props.readonly)!==null&&d!==void 0?d:!1;ee(this.editor,c?"readonly":"design")}this.props.disabled!==s.disabled&&(te(this.editor)?this.editor.options.set("disabled",this.props.disabled):ee(this.editor,this.props.disabled?"readonly":"design"))}},r.prototype.componentDidMount=function(){var s=this,i,l,d,e,c;if(re(this.view)!==null)this.initialise();else if(Array.isArray(this.props.tinymceScriptSrc)&&this.props.tinymceScriptSrc.length===0)(l=(i=this.props).onScriptsLoadError)===null||l===void 0||l.call(i,new Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array."));else if(!((d=this.elementRef.current)===null||d===void 0)&&d.ownerDocument){var u=function(){var f,p;(p=(f=s.props).onScriptsLoad)===null||p===void 0||p.call(f),s.initialise()},m=function(f){var p,g;(g=(p=s.props).onScriptsLoadError)===null||g===void 0||g.call(p,f)};Ee.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),(c=(e=this.props.scriptLoading)===null||e===void 0?void 0:e.delay)!==null&&c!==void 0?c:0,u,m)}},r.prototype.componentWillUnmount=function(){var s=this,i=this.editor;i&&(i.off(z,this.handleEditorChange),i.off(this.beforeInputEvent(),this.handleBeforeInput),i.off("keypress",this.handleEditorChangeSpecial),i.off("keydown",this.handleBeforeInputSpecial),i.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach(function(l){i.off(l,s.boundHandlers[l])}),this.boundHandlers={},i.remove(),this.editor=void 0)},r.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},r.prototype.beforeInputEvent=function(){return _e()?"beforeinput SelectionChange":"SelectionChange"},r.prototype.renderInline=function(){var s=this.props.tagName,i=s===void 0?"div":s;return S.createElement(i,{ref:this.elementRef,id:this.id,tabIndex:this.props.tabIndex})},r.prototype.renderIframe=function(){return S.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id,tabIndex:this.props.tabIndex})},r.prototype.getScriptSources=function(){var s,i,l=(s=this.props.scriptLoading)===null||s===void 0?void 0:s.async,d=(i=this.props.scriptLoading)===null||i===void 0?void 0:i.defer;if(this.props.tinymceScriptSrc!==void 0)return typeof this.props.tinymceScriptSrc=="string"?[{src:this.props.tinymceScriptSrc,async:l,defer:d}]:this.props.tinymceScriptSrc.map(function(m){return typeof m=="string"?{src:m,async:l,defer:d}:m});var e=this.props.cloudChannel,c=this.props.apiKey?this.props.apiKey:"no-api-key",u="https://cdn.tiny.cloud/1/".concat(c,"/tinymce/").concat(e,"/tinymce.min.js");return[{src:u,async:l,defer:d}]},r.prototype.getInitialValue=function(){return typeof this.props.initialValue=="string"?this.props.initialValue:typeof this.props.value=="string"?this.props.value:""},r.prototype.bindHandlers=function(s){var i=this;if(this.editor!==void 0){ye(this.editor,s,this.props,this.boundHandlers,function(c){return i.props[c]});var l=function(c){return c.onEditorChange!==void 0||c.value!==void 0},d=l(s),e=l(this.props);!d&&e?(this.editor.on(z,this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):d&&!e&&(this.editor.off(z,this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},r.propTypes=be,r.defaultProps={cloudChannel:"8"},r})(S.Component);const qe=({settings:n})=>{const[r,s]=S.useState("mail"),[i,l]=S.useState("prospect_welcome"),d=[{key:"prospect_welcome",label:"Email de Bienvenida a Prospectos",variables:["nombre_estudiante","nombre_asesor","email_asesor","telefono_asesor","fecha_registro","url_plataforma"]},{key:"contract_email",label:"Email de Contrato de MatrÃ­cula (con PDF adjunto)",variables:["nombre_estudiante","codigo_matricula","nivel_academico","plan_pago","url_contrato","fecha_actual"]},{key:"contract_signed_student",label:"Email de ConfirmaciÃ³n de Firma (Estudiante)",variables:["nombre_estudiante","codigo_matricula","nivel_academico","plan_pago","fecha_actual"]},{key:"contract_signed_admin",label:"NotificaciÃ³n de Contrato Firmado (Admin)",variables:["nombre_estudiante","codigo_matricula","nivel_academico","plan_pago","asesor","fecha_firma"]},{key:"contract_signed_advisor",label:"NotificaciÃ³n de Contrato Firmado (Asesor)",variables:["nombre_asesor","nombre_estudiante","codigo_matricula","nivel_academico","plan_pago","fecha_firma"]},{key:"student_enrolled",label:"Email de Credenciales para Estudiantes Matriculados",variables:["nombre_estudiante","codigo_matricula","email","contrasena","url_plataforma","nivel_academico","plan_pago"]},{key:"enrollment_verified",label:"Email de MatrÃ­cula Verificada",variables:["nombre_estudiante","codigo_matricula","email","nivel_academico","plan_pago","verificado_por","fecha_verificacion","cantidad_documentos","url_plataforma"]}],e=C({settings:(n.mail||[]).reduce((o,b)=>(o[b.key]=b.content,o),{})}),c=C({contract_template:n.general?.find(o=>o.key==="contract_template")?.content||""}),u=C({whatsapp_number:n.whatsapp?.find(o=>o.key==="whatsapp_number")?.content||"",whatsapp_message:n.whatsapp?.find(o=>o.key==="whatsapp_message")?.content||""}),m=C({site_name:n.general?.find(o=>o.key==="site_name")?.content||"",site_description:n.general?.find(o=>o.key==="site_description")?.content||""}),f=C({support_email:n.contact?.find(o=>o.key==="support_email")?.content||""}),p=C({plan_change_deadline_days:n.payment?.find(o=>o.key==="plan_change_deadline_days")?.content||"7",allow_partial_payments:n.payment?.find(o=>o.key==="allow_partial_payments")?.content||"true"}),g=[{id:"mail",label:"Templates de Email",icon:V},{id:"contract",label:"Plantilla de Contrato",icon:W},{id:"whatsapp",label:"ConfiguraciÃ³n WhatsApp",icon:pe},{id:"payment",label:"ConfiguraciÃ³n de Pagos",icon:G},{id:"general",label:"ConfiguraciÃ³n General",icon:me},{id:"contact",label:"InformaciÃ³n de Contacto",icon:V}],y=o=>{o.preventDefault();const b=Object.entries(e.data.settings).map(([h,w])=>({key:h,content:w,type:"mail",description:O(h)}));e.transform(()=>({settings:b})),e.post("/admin/settings",{onSuccess:()=>{j.success("ConfiguraciÃ³n guardada",{description:"Los templates de email han sido actualizados",duration:4e3})},onError:()=>{j.error("Error",{description:"No se pudieron guardar las configuraciones",duration:4e3})}})},v=o=>{o.preventDefault();const b=[{key:"whatsapp_number",content:u.data.whatsapp_number,type:"whatsapp",description:"NÃºmero de WhatsApp para contacto"},{key:"whatsapp_message",content:u.data.whatsapp_message,type:"whatsapp",description:"Mensaje predeterminado de WhatsApp"}];u.transform(()=>({settings:b})),u.post("/admin/settings",{onSuccess:()=>{j.success("ConfiguraciÃ³n guardada",{description:"La configuraciÃ³n de WhatsApp ha sido actualizada",duration:4e3})}})},x=o=>{o.preventDefault();const b=[{key:"site_name",content:m.data.site_name,type:"general",description:"Nombre del sitio"},{key:"site_description",content:m.data.site_description,type:"general",description:"DescripciÃ³n del sitio"}];m.transform(()=>({settings:b})),m.post("/admin/settings",{onSuccess:()=>{j.success("ConfiguraciÃ³n guardada",{description:"La configuraciÃ³n general ha sido actualizada",duration:4e3})}})},_=o=>{o.preventDefault();const b=[{key:"support_email",content:f.data.support_email,type:"contact",description:"Email de soporte tÃ©cnico para estudiantes"}];f.transform(()=>({settings:b})),f.post("/admin/settings",{onSuccess:()=>{j.success("ConfiguraciÃ³n guardada",{description:"El email de soporte ha sido actualizado",duration:4e3})}})},P=o=>{o.preventDefault();const b=[{key:"plan_change_deadline_days",content:p.data.plan_change_deadline_days,type:"payment",description:"DÃ­as lÃ­mite desde la matrÃ­cula para cambiar de plan"},{key:"allow_partial_payments",content:p.data.allow_partial_payments,type:"payment",description:"Permitir pagos parciales de cualquier monto aplicados al total"}];p.transform(()=>({settings:b})),p.post("/admin/settings",{onSuccess:()=>{j.success("ConfiguraciÃ³n guardada",{description:"Las configuraciones de pago han sido actualizadas",duration:4e3})},onError:()=>{j.error("Error",{description:"No se pudieron guardar las configuraciones",duration:4e3})}})},k=o=>{o.preventDefault();const b=[{key:"contract_template",content:c.data.contract_template,type:"general",description:"Plantilla de contrato digital para estudiantes"}];c.transform(()=>({settings:b})),c.post("/admin/settings",{onSuccess:()=>{j.success("ConfiguraciÃ³n guardada",{description:"La plantilla de contrato ha sido actualizada",duration:4e3})},onError:()=>{j.error("Error",{description:"No se pudo guardar la plantilla de contrato",duration:4e3})}})},O=o=>({welcome_email:"Email de bienvenida para nuevos usuarios",payment_reminder:"Recordatorio de pago pendiente",enrollment_confirmation:"ConfirmaciÃ³n de matrÃ­cula"})[o]||"";return t.jsxs(de,{children:[t.jsx(ce,{title:"Configuraciones"}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"p-3 bg-gradient-to-br from-[#073372] to-[#17BC91] rounded-xl shadow-lg",children:t.jsx(G,{className:"h-7 w-7 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Configuraciones del Sistema"}),t.jsx("p",{className:"text-sm text-slate-600",children:"Administra templates de email, WhatsApp y configuraciÃ³n general"})]})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[t.jsx("div",{className:"border-b border-gray-200",children:t.jsx("div",{className:"flex space-x-1 p-2",children:g.map(o=>{const b=o.icon;return t.jsxs("button",{onClick:()=>s(o.id),className:`flex items-center px-6 py-3 rounded-lg font-medium transition-all ${r===o.id?"bg-gradient-to-r from-[#073372] to-[#17BC91] text-white shadow-md":"text-gray-600 hover:bg-gray-50"}`,children:[t.jsx(b,{className:"h-5 w-5 mr-2"}),o.label]},o.id)})})}),t.jsxs("div",{className:"p-8",children:[r==="mail"&&t.jsxs("form",{onSubmit:y,className:"space-y-6",children:[t.jsx("div",{children:t.jsx(ue,{label:"Seleccionar Template de Email",value:i,onChange:o=>l(o.target.value),required:!0,children:d.map(o=>t.jsx("option",{value:o.key,children:o.label},o.key))})}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:d.find(o=>o.key===i)?.label})}),t.jsx(ae,{apiKey:"0nai4nwo1mc0dumfyzl8re1odbzzr1fz4gfwzpgu5ghdnu4n",value:e.data.settings[i]||"",onEditorChange:o=>{e.setData("settings",{...e.data.settings,[i]:o})},init:{height:500,menubar:"file edit view insert format tools table help",plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","help","wordcount","visualchars","pagebreak"],toolbar:"undo redo | formatselect | bold italic underline forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media | table tabledelete | code | removeformat | help",image_title:!0,image_advtab:!0,automatic_uploads:!0,paste_data_images:!0,file_picker_types:"image",images_upload_url:"/admin/upload-image",relative_urls:!1,remove_script_host:!1,convert_urls:!0,extended_valid_elements:"img[data-src|src|alt|style|width|height|class]",images_upload_handler:o=>new Promise((b,h)=>{(async()=>{try{await fetch("/sanctum/csrf-cookie",{credentials:"same-origin"});const w=new FormData;w.append("file",o.blob(),o.filename());const L=decodeURIComponent((I=>{const D=`; ${document.cookie}`.split(`; ${I}=`);return D.length===2?D.pop()?.split(";").shift():""})("XSRF-TOKEN")||""),T=await(await fetch("/admin/upload-image",{method:"POST",body:w,credentials:"same-origin",headers:{"X-XSRF-TOKEN":L}})).json();T.location?b(T.location):h("Error al subir imagen")}catch{h("Error al subir imagen")}})()}),content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }",setup:o=>{const b=h=>(h=h.replace(/src="[^"]*({{[^}]+}})"/g,'src="$1"'),h=h.replace(/src="[^"]*(https?:\/\/[^"}]+)"/g,'src="$1"'),h=h.replace(/href="[^"]*({{[^}]+}})"/g,'href="$1"'),h=h.replace(/href="[^"]*(https?:\/\/[^"}]+)"/g,'href="$1"'),h);o.on("BeforeSetContent",function(h){h.content&&typeof h.content=="string"&&(h.content=b(h.content))}),o.on("PostProcess",function(h){h.content&&typeof h.content=="string"&&(h.content=b(h.content))})}}},i),t.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[t.jsx("p",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Variables disponibles para este template:"}),t.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs text-blue-800",children:d.find(o=>o.key===i)?.variables.map(o=>t.jsx("code",{className:"bg-white px-2 py-1 rounded",children:`{{${o}}}`},o))})]})]}),t.jsx("div",{className:"flex justify-end",children:t.jsxs("button",{type:"submit",disabled:e.processing,className:"inline-flex items-center px-6 py-3 bg-[#073372] hover:bg-[#17BC91] text-white font-medium rounded-lg transition-all shadow-md hover:shadow-lg disabled:opacity-50",children:[t.jsx(N,{className:"h-5 w-5 mr-2"}),e.processing?"Guardando...":"Guardar Template"]})})]}),r==="whatsapp"&&t.jsxs("form",{onSubmit:v,className:"space-y-6",children:[t.jsx(R,{label:"NÃºmero de WhatsApp",type:"text",value:u.data.whatsapp_number,onChange:o=>u.setData("whatsapp_number",o.target.value),helperText:"Ejemplo: +51987654321",variant:"outlined"}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mensaje Predeterminado"}),t.jsx("textarea",{value:u.data.whatsapp_message,onChange:o=>u.setData("whatsapp_message",o.target.value),rows:6,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#17BC91] focus:border-transparent transition-all",placeholder:"Hola! Estoy interesado en informaciÃ³n sobre los cursos..."}),t.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Este mensaje se usarÃ¡ como plantilla para contacto por WhatsApp"})]}),t.jsx("div",{className:"flex justify-end",children:t.jsxs("button",{type:"submit",disabled:u.processing,className:"inline-flex items-center px-6 py-3 bg-[#073372] hover:bg-[#17BC91] text-white font-medium rounded-lg transition-all shadow-md hover:shadow-lg disabled:opacity-50",children:[t.jsx(N,{className:"h-5 w-5 mr-2"}),u.processing?"Guardando...":"Guardar ConfiguraciÃ³n"]})})]}),r==="contract"&&t.jsxs("form",{onSubmit:k,className:"space-y-6",children:[t.jsxs("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 border-2 border-emerald-200 rounded-xl p-6 mb-6",children:[t.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-2 flex items-center gap-2",children:[t.jsx(W,{className:"w-6 h-6 text-emerald-600"}),"ðŸ“„ Plantilla de Contrato Digital"]}),t.jsxs("p",{className:"text-sm text-slate-700",children:["Esta plantilla se genera automÃ¡ticamente cuando un prospecto pasa de ",t.jsx("strong",{children:'"ReuniÃ³n Realizada"'})," a ",t.jsx("strong",{children:'"Pago Por Verificar"'}),". El estudiante recibirÃ¡ un email con un enlace para revisar y aceptar el contrato digitalmente."]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Contenido de la Plantilla de Contrato"})}),t.jsx(ae,{apiKey:"0nai4nwo1mc0dumfyzl8re1odbzzr1fz4gfwzpgu5ghdnu4n",value:c.data.contract_template,onEditorChange:o=>{c.setData("contract_template",o)},init:{height:600,menubar:"file edit view insert format tools table help",plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","help","wordcount","visualchars","pagebreak"],toolbar:"undo redo | formatselect | bold italic underline forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media | table tabledelete | code | removeformat | help",automatic_uploads:!0,paste_data_images:!0,file_picker_types:"image",images_upload_url:"/admin/upload-image",relative_urls:!1,remove_script_host:!1,convert_urls:!0,images_upload_handler:o=>new Promise((b,h)=>{(async()=>{try{await fetch("/sanctum/csrf-cookie",{credentials:"same-origin"});const w=new FormData;w.append("file",o.blob(),o.filename());const L=decodeURIComponent((I=>{const D=`; ${document.cookie}`.split(`; ${I}=`);return D.length===2?D.pop()?.split(";").shift():""})("XSRF-TOKEN")||""),T=await(await fetch("/admin/upload-image",{method:"POST",body:w,credentials:"same-origin",headers:{"X-XSRF-TOKEN":L}})).json();T.location?b(T.location):h("Error al subir imagen")}catch{h("Error al subir imagen")}})()}),content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px; padding: 20px; }"}}),t.jsxs("div",{className:"p-4 bg-emerald-50 border-2 border-emerald-200 rounded-lg",children:[t.jsx("h4",{className:"font-semibold text-emerald-900 mb-2",children:"Variables Disponibles:"}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 text-sm",children:[t.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{nombre_estudiante}}"}),t.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{documento_estudiante}}"}),t.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{email_estudiante}}"}),t.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{telefono_estudiante}}"}),t.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{nivel_academico}}"}),t.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{plan_pago}}"}),t.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{monto_total}}"}),t.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{fecha_matricula}}"}),t.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{codigo_matricula}}"}),t.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{usuario}}"}),t.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{contrasena}}"}),t.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{nombre_apoderado}}"}),t.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{documento_apoderado}}"}),t.jsx("code",{className:"bg-white px-2 py-1 rounded border border-emerald-300",children:"{{fecha_actual}}"})]}),t.jsxs("p",{className:"text-sm text-emerald-800 mt-3",children:[t.jsx("strong",{children:"Nota:"})," Estas variables se reemplazarÃ¡n automÃ¡ticamente con los datos del estudiante al generar el contrato."]})]})]}),t.jsx("div",{className:"flex justify-end",children:t.jsxs("button",{type:"submit",disabled:c.processing,className:"inline-flex items-center px-6 py-3 bg-[#073372] hover:bg-[#17BC91] text-white font-medium rounded-lg transition-all shadow-md hover:shadow-lg disabled:opacity-50",children:[t.jsx(N,{className:"h-5 w-5 mr-2"}),c.processing?"Guardando...":"Guardar Plantilla de Contrato"]})})]}),r==="general"&&t.jsxs("form",{onSubmit:x,className:"space-y-6",children:[t.jsx(R,{label:"Nombre del Sitio",type:"text",value:m.data.site_name,onChange:o=>m.setData("site_name",o.target.value),variant:"outlined"}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"DescripciÃ³n del Sitio"}),t.jsx("textarea",{value:m.data.site_description,onChange:o=>m.setData("site_description",o.target.value),rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#17BC91] focus:border-transparent transition-all",placeholder:"DescripciÃ³n breve del sitio..."})]}),t.jsx("div",{className:"flex justify-end",children:t.jsxs("button",{type:"submit",disabled:m.processing,className:"inline-flex items-center px-6 py-3 bg-[#073372] hover:bg-[#17BC91] text-white font-medium rounded-lg transition-all shadow-md hover:shadow-lg disabled:opacity-50",children:[t.jsx(N,{className:"h-5 w-5 mr-2"}),m.processing?"Guardando...":"Guardar ConfiguraciÃ³n"]})})]}),r==="contact"&&t.jsxs("form",{onSubmit:_,className:"space-y-6",children:[t.jsx(R,{label:"Email de Soporte",type:"email",value:f.data.support_email,onChange:o=>f.setData("support_email",o.target.value),helperText:"Email que se mostrarÃ¡ a los estudiantes para soporte tÃ©cnico",variant:"outlined"}),t.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:t.jsxs("p",{className:"text-sm text-blue-900",children:[t.jsx("strong",{children:"Nota:"})," Este email se muestra en las notificaciones y modales de confirmaciÃ³n de documentos para que los estudiantes puedan contactar con soporte."]})}),t.jsx("div",{className:"flex justify-end",children:t.jsxs("button",{type:"submit",disabled:f.processing,className:"inline-flex items-center px-6 py-3 bg-[#073372] hover:bg-[#17BC91] text-white font-medium rounded-lg transition-all shadow-md hover:shadow-lg disabled:opacity-50",children:[t.jsx(N,{className:"h-5 w-5 mr-2"}),f.processing?"Guardando...":"Guardar Email"]})})]}),r==="payment"&&t.jsxs("form",{onSubmit:P,className:"space-y-6",children:[t.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-xl p-6 mb-6",children:[t.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"âš™ï¸ Configuraciones de Sistema de Pagos"}),t.jsx("p",{className:"text-sm text-slate-700",children:"Estas configuraciones afectan el comportamiento del sistema de pagos y cambios de plan para todos los estudiantes."})]}),t.jsxs("div",{children:[t.jsx(R,{label:"DÃ­as lÃ­mite para cambiar de plan",type:"number",min:"0",max:"30",value:p.data.plan_change_deadline_days,onChange:o=>p.setData("plan_change_deadline_days",o.target.value),helperText:"NÃºmero de dÃ­as desde la matrÃ­cula en que el estudiante puede cambiar su plan de pago (ej: 7 dÃ­as)",variant:"outlined"}),t.jsx("div",{className:"mt-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:t.jsxs("p",{className:"text-xs text-yellow-900",children:[t.jsx("strong",{children:"âš ï¸ Importante:"})," Solo los estudiantes que no tengan cuotas pagadas o verificadas podrÃ¡n cambiar de plan, incluso dentro de este perÃ­odo."]})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Permitir pagos parciales"}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[t.jsx("input",{type:"radio",name:"allow_partial_payments",value:"true",checked:p.data.allow_partial_payments==="true",onChange:o=>p.setData("allow_partial_payments",o.target.value),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:"SÃ­, permitir pagos parciales"})]}),t.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[t.jsx("input",{type:"radio",name:"allow_partial_payments",value:"false",checked:p.data.allow_partial_payments==="false",onChange:o=>p.setData("allow_partial_payments",o.target.value),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:"No, solo pagos completos"})]})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Si se habilita, los estudiantes podrÃ¡n pagar cualquier monto que deseen aplicado al total de su plan de pagos."})]}),t.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-lg",children:[t.jsx("h4",{className:"text-sm font-semibold text-slate-900 mb-3",children:"ðŸ“Š Resumen de ConfiguraciÃ³n Actual:"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-600",children:"DÃ­as para cambiar plan:"}),t.jsxs("span",{className:"font-bold text-slate-900",children:[p.data.plan_change_deadline_days," dÃ­as"]})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-slate-600",children:"Pagos parciales:"}),t.jsx("span",{className:`font-bold ${p.data.allow_partial_payments==="true"?"text-green-600":"text-red-600"}`,children:p.data.allow_partial_payments==="true"?"âœ“ Habilitados (monto libre)":"âœ— Deshabilitados"})]})]})]}),t.jsx("div",{className:"flex justify-end",children:t.jsxs("button",{type:"submit",disabled:p.processing,className:"inline-flex items-center px-6 py-3 bg-[#073372] hover:bg-[#17BC91] text-white font-medium rounded-lg transition-all shadow-md hover:shadow-lg disabled:opacity-50",children:[t.jsx(N,{className:"h-5 w-5 mr-2"}),p.processing?"Guardando...":"Guardar ConfiguraciÃ³n de Pagos"]})})]})]})]})]})]})};export{qe as default};
