import{r as n,j as e,H as $,a as y}from"./app-CQeM4NTb.js";import{A as F}from"./AuthenticatedLayout-OG1PzA-V.js";import{t as r}from"./DocumentConfirmationModal-CydVsQCm.js";import{I as G}from"./input-SaJXeJeY.js";import{B as N}from"./button-BKXWnkj-.js";import{C as v,c as w,d as C,a as k}from"./card-BihcEj9B.js";import{S}from"./switch-DA1cmBgL.js";import{S as U}from"./save-DQnMokce.js";import{L as _}from"./link-2-B-qP0eCI.js";import{C as q}from"./copy-B_bRsKUp.js";import{C as z}from"./circle-alert-BclH6o7i.js";import{C as J}from"./circle-check-big-DrsNThf7.js";import{C as P}from"./clock-CVkQKfJ0.js";/* empty css            */import"./dropdown-menu-Op_UaWhc.js";import"./createLucideIcon-tB2FwKGp.js";import"./index-It-Ttbr5.js";import"./index-D6_jR_BQ.js";import"./index-C4O0F4F3.js";import"./badge-CKsZe3hD.js";import"./x-BdSfRFNn.js";import"./index-BgTr9QC4.js";import"./triangle-alert-DNn7VdNb.js";import"./clsx-B-dksMZM.js";import"./index-CAsqRJnA.js";const D=["Lunes","Martes","Miércoles","Jueves","Viernes","Sábado","Domingo"],ue=({teacher:i,settings:g})=>{const[d,V]=n.useState(i.meet_url||""),[a,A]=n.useState(i.not_available_today),h=s=>(s.includes(":")?s.split(":")[0]:s).padStart(2,"0")+":00",c=h(g?.operation_start_hour||"08"),m=h(g?.operation_end_hour||"22"),[o,f]=n.useState(i.time_slots&&i.time_slots.length>0?Array.from(new Set(i.time_slots.map(s=>s.day_of_week))):D),[x,b]=n.useState(!1),[L,u]=n.useState(!1),E=s=>{o.includes(s)?f(o.filter(t=>t!==s)):f([...o,s])},B=async()=>{b(!0);try{await y.put("/teacher/availability",{meet_url:d||null,time_slots:o.map(s=>({day_of_week:s,start_time:c,end_time:m}))}),r.success("Configuración guardada exitosamente")}catch{r.error("Error al guardar la configuración")}finally{b(!1)}},M=async()=>{u(!0);try{const s=await y.post("/teacher/toggle-availability");A(s.data.not_available_today),s.data.not_available_today?r.warning("Marcado como NO DISPONIBLE por hoy"):r.success("Marcado como DISPONIBLE hoy")}catch{r.error("Error al cambiar disponibilidad")}finally{u(!1)}},T=()=>{d&&(navigator.clipboard.writeText(d),r.success("Link copiado al portapapeles"))},H=s=>({Lunes:"#073372",Martes:"#0ea5e9",Miércoles:"#17BC91",Jueves:"#8b5cf6",Viernes:"#ec4899",Sábado:"#f59e0b",Domingo:"#ef4444"})[s]||"#64748b";return e.jsxs(F,{children:[e.jsx($,{title:"Mi Disponibilidad"}),e.jsxs("div",{className:"bg-gray-50 min-h-screen pb-12",children:[e.jsx("div",{className:"bg-white border-b sticky top-0 z-30 shadow-sm",children:e.jsx("div",{className:"w-full px-6 py-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Mi Disponibilidad"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Administra tus días de trabajo (Horario fijo de ",c," a ",m,")"]})]}),e.jsx("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:e.jsxs(N,{onClick:B,disabled:x,className:"bg-[#073372] hover:bg-[#062b61] text-white flex-1 sm:w-48",children:[x?"Guardando...":"Guardar Cambios",!x&&e.jsx(U,{className:"w-4 h-4 ml-2"})]})})]})})}),e.jsxs("div",{className:"w-full px-6 py-8 space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(v,{className:"md:col-span-2 shadow-sm border-gray-200",children:[e.jsx(w,{className:"pb-3",children:e.jsxs(C,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 bg-blue-100 rounded-lg",children:e.jsx(_,{className:"w-4 h-4 text-blue-700"})}),"Link de Google Meet"]})}),e.jsx(k,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"relative flex-1",children:e.jsx(G,{readOnly:!0,placeholder:"https://meet.google.com/...",value:d,className:"font-mono text-sm bg-gray-50 text-gray-500 cursor-not-allowed",icon:e.jsx(_,{className:"w-4 h-4"})})}),e.jsx(N,{variant:"outline",size:"icon",onClick:T,title:"Copiar Link",className:"shrink-0",children:e.jsx(q,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Este enlace es asignado administrativamente y no puede ser modificado."})]})})]}),e.jsxs(v,{className:`shadow-sm border transition-colors ${a?"border-red-200 bg-red-50/50":"border-emerald-200 bg-emerald-50/50"}`,children:[e.jsx(w,{className:"pb-3",children:e.jsxs(C,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx("div",{className:`p-1.5 rounded-lg ${a?"bg-red-100":"bg-emerald-100"}`,children:a?e.jsx(z,{className:"w-4 h-4 text-red-700"}):e.jsx(J,{className:"w-4 h-4 text-emerald-700"})}),"Estado de Hoy"]})}),e.jsx(k,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-sm font-medium ${a?"text-red-700":"text-emerald-700"}`,children:a?"NO Disponible":"Disponible"}),e.jsx(S,{checked:!a,onCheckedChange:M,disabled:L,className:"data-[state=checked]:bg-[#17BC91]"})]}),e.jsx("p",{className:"text-xs text-gray-500 leading-tight",children:a?"Has indicado que no puedes atender hoy. No recibirás nuevas asignaciones por el resto del día.":"Estás disponible para recibir clases hoy según tus horarios configurados."})]})})]})]}),e.jsxs("div",{className:"hidden",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(P,{className:"w-5 h-5 text-gray-400"}),"Días de Disponibilidad Semanal"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:D.map(s=>{const t=o.includes(s),I=H(s),O=new Date().toLocaleDateString("es-ES",{weekday:"long"}),p=s.toLowerCase()===O.toLowerCase(),l=p&&a,j=t&&!l;return e.jsxs("div",{className:`flex flex-col rounded-xl shadow-sm border transition-all duration-300 overflow-hidden ${j?"bg-white border-gray-200":l?"bg-red-50/50 border-red-200":"bg-gray-100/50 border-gray-200 grayscale opacity-70"}`,children:[e.jsxs("div",{className:`px-4 py-3 border-b flex items-center justify-between ${l?"bg-red-100/30":"bg-gray-50/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center font-bold text-white shadow-sm text-sm transition-transform ${p?"scale-110 ring-2 ring-offset-2 ring-blue-400":""}`,style:{backgroundColor:l?"#ef4444":I},children:s.substring(0,3).toUpperCase()}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-bold text-gray-900 leading-tight",children:s}),p&&e.jsx("span",{className:"text-[10px] text-blue-600 font-bold uppercase",children:"Hoy"})]})]}),e.jsx(S,{checked:t,onCheckedChange:()=>E(s),className:"data-[state=checked]:bg-[#17BC91]"})]}),e.jsx("div",{className:"p-5 flex flex-col items-center justify-center text-center space-y-2",children:j?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-lg font-mono font-bold text-[#073372]",children:[c," - ",m]}),e.jsx("span",{className:"text-[10px] uppercase tracking-wider font-bold text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full",children:"Disponible"})]}):l?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-lg font-mono font-bold text-red-400 line-through decoration-2",children:[c," - ",m]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-wider font-bold text-red-600 bg-red-100 px-2 py-0.5 rounded-full",children:"Inactivo por Hoy"}),e.jsx("span",{className:"text-[9px] text-red-500 mt-1 font-medium italic",children:"Bloqueado por estado diario"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-lg font-mono font-bold text-gray-400",children:"-- : --"}),e.jsx("span",{className:"text-[10px] uppercase tracking-wider font-bold text-gray-400 bg-gray-200 px-2 py-0.5 rounded-full",children:"No Laboral"})]})})]},s)})})]})]})]})]})};export{ue as default};
