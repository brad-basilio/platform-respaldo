import{r as o,U as se,a as te,j as e,H as ae,L as j,b as re}from"./app-BSCs73iu.js";import{A as le}from"./AuthenticatedLayout-BULKmhwG.js";import{F as we,t as E}from"./DocumentConfirmationModal-Cx3ClTaN.js";import{B as k}from"./badge-CnmvEnyg.js";import{C as q,a as B}from"./card-TC-PmA3b.js";import{B as c}from"./button-CQzIhtQi.js";import{T as _e}from"./textarea-P8O3yp6U.js";import{C as ie}from"./circle-alert-BMr_xr5F.js";import{B as ne}from"./book-open-ZbxO_AoR.js";import{Z as D}from"./zap-BuXrqNqj.js";import{C as u}from"./clock-C0A0e5cJ.js";import{F as ce}from"./file-question-DAAA4I8Z.js";import{V}from"./video-BOtxsXdw.js";import{E as N}from"./eye-CpAgQ1Bk.js";import{T as Ce}from"./trophy-DK6-jKwQ.js";import{L as oe}from"./lock-wL9nY7xg.js";import{c as Se}from"./createLucideIcon-ATIGfkH1.js";import{C as ke}from"./chevron-right-B85nuryn.js";import{L as qe}from"./loader-circle-vJCAxy0Q.js";import{S as De}from"./send-C-pKFDuI.js";import{C as de}from"./circle-check-big-C9Au-5zO.js";import{T as Le}from"./target-DFmwLHyO.js";/* empty css            */import"./dropdown-menu-BkwvcB8D.js";import"./index-BbLdlY2d.js";import"./index-5YbuVTRz.js";import"./index-kzhX1O1z.js";import"./x-OZ46HI4z.js";import"./index-CGsBlBii.js";import"./triangle-alert-C5woxyQB.js";import"./clsx-B-dksMZM.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]],me=Se("CirclePlay",Ae),ds=({templates:L,sessionStats:d,studentInfo:g,academicLevel:xe,practiceSettings:f,message:I})=>{const[y,A]=o.useState(!1),[$,ue]=o.useState("regular"),[m,he]=o.useState(null),[U,O]=o.useState(""),[W,Y]=o.useState(!1),[R,pe]=o.useState(null),[z,ge]=o.useState([]),[fe,Q]=o.useState(!1),[h,H]=o.useState(null),[M,G]=o.useState(""),v=o.useMemo(()=>[...L].sort((s,t)=>{const a=parseInt(s.session_number)||0,r=parseInt(t.session_number)||0;return a-r}),[L]),Z=s=>{const t=d[s];return!t||!t.regular_completed?!1:t.practice_completed_count>=f.min_required},be=s=>{const t=parseInt(s.session_number)||0;if(t<=1)return!0;const a=v.find(r=>(parseInt(r.session_number)||0)===t-1);return a?Z(a.id):!0},T=Object.values(d).filter(s=>s.regular_completed&&s.practice_completed_count>=f.min_required).length,b=L.length,J=b>0?Math.round(T/b*100):0,i=o.useMemo(()=>{for(const s of v)if(!Z(s.id))return s;return null},[v,d]),p=g.studentType==="regular"&&g.isVerified,w=g.studentType==="daily"&&g.isVerified,_=g.studentType==="weekly"&&g.isVerified,C=o.useMemo(()=>{if(!R)return null;const s=new Date,{min_advance_hours:t,operation_start_hour:a,operation_end_hour:r}=R;let l=s.getHours()+t;s.getMinutes()>0&&(l+=1);const n=new Date(s);return n.setHours(l,0,0,0),n.getHours()>=r&&(n.setDate(n.getDate()+1),n.setHours(a,0,0,0)),n.getHours()<a&&n.setHours(a,0,0,0),n},[R]),K=s=>{const t=s.getFullYear(),a=String(s.getMonth()+1).padStart(2,"0"),r=String(s.getDate()).padStart(2,"0"),l=String(s.getHours()).padStart(2,"0"),n=String(s.getMinutes()).padStart(2,"0"),F=String(s.getSeconds()).padStart(2,"0");return`${t}-${a}-${r}T${l}:${n}:${F}`};se.useEffect(()=>{y&&(p||w||_)&&te.get("/api/student/class-config").then(s=>pe(s.data)).catch(s=>console.error("Error loading class config:",s))},[y,p,w,_]),se.useEffect(()=>{y&&p&&C&&m&&(Q(!0),te.get(`/api/student/available-classes/${m.id}`,{params:{datetime:K(C)}}).then(s=>{const t=s.data.classes||[];ge(t);const a=t.find(r=>r.available_spots>0);a&&H(a.id)}).finally(()=>Q(!1)))},[y,p,C,m]);const X=(s,t="regular")=>{he(s),ue(t),O(""),H(null),G(""),A(!0)},je=()=>{if(!m)return;Y(!0);let s=null,t=null;p?h?(s=z.find(r=>r.id===h)?.scheduled_at||null,t=h):C&&(s=K(C)):(w||_)&&M&&(s=M,h&&(t=h)),re.post("/student/class-requests",{class_template_id:m.id,type:$,message:U,requested_datetime:s,target_scheduled_class_id:t},{onSuccess:()=>{E.success(t?"¬°Inscripci√≥n exitosa!":"Solicitud enviada exitosamente"),A(!1)},onError:a=>{const r=Object.values(a)[0]||"Error al enviar solicitud";E.error(r)},onFinish:()=>Y(!1)})},Ne=s=>{confirm("¬øEst√°s seguro de cancelar esta solicitud?")&&re.delete(`/student/class-requests/${s}`,{onSuccess:()=>E.success("Solicitud cancelada"),onError:()=>E.error("Error al cancelar")})},ye=s=>{const t=d[s.id];if(!be(s))return{type:"locked",label:"Bloqueada",color:"bg-gray-300",icon:oe};if(t){if(t.regular_completed&&t.practice_completed_count>=f.min_required)return{type:"completed",label:"Completada",color:"bg-emerald-500",icon:de};if(t.regular_completed)return{type:"practices_pending",label:`Pr√°cticas (${t.practice_completed_count}/${f.min_required})`,color:"bg-cyan-500",icon:D};if(t.regular_enrolled&&!t.regular_completed)return t.regular_status==="in_progress"?{type:"in_progress",label:"En curso",color:"bg-blue-500",icon:me}:{type:"scheduled",label:"Programada",color:"bg-violet-500",icon:u};if(t.pending_request){const r=t.pending_request;if(r.status==="pending")return{type:"request_pending",label:"En revisi√≥n",color:"bg-orange-500",icon:u};if(r.status==="approved")return{type:"request_approved",label:"Aprobada",color:"bg-cyan-500",icon:de}}}return{type:"available",label:"Disponible",color:"bg-gray-400",icon:Le}};return I?e.jsxs(le,{children:[e.jsx(ae,{title:"Mis Clases"}),e.jsx("div",{className:"max-w-5xl mx-auto p-6",children:e.jsx(q,{children:e.jsxs(B,{className:"py-12 text-center",children:[e.jsx(ie,{className:"w-16 h-16 mx-auto mb-4 text-yellow-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:I}),e.jsx("p",{className:"text-gray-600",children:"Contacta con tu asesor para m√°s informaci√≥n."})]})})})]}):e.jsxs(le,{children:[e.jsx(ae,{title:"Mis Clases"}),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50",children:[e.jsx("div",{className:"bg-gradient-to-r  text-primary",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-white/20 backdrop-blur-sm flex items-center justify-center",children:e.jsx(ne,{className:"w-8 h-8 text-[#073372]"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Mi Ruta de Aprendizaje"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(k,{className:"bg-white/20 hover:bg-white/30 text-[#073372] border-0",children:xe?.name||"Sin nivel asignado"}),e.jsxs("span",{className:"text-[#073372] text-sm",children:["‚Ä¢ ",b," sesiones en total"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold",children:T}),e.jsx("div",{className:"text-[#073372] text-sm",children:"Completadas"})]}),e.jsx("div",{className:"w-px h-12 bg-white/30"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold",children:b-T}),e.jsx("div",{className:"text-[#073372] text-sm",children:"Pendientes"})]}),e.jsx("div",{className:"w-px h-12 bg-black/30"}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"relative w-20 h-20",children:[e.jsxs("svg",{className:"w-20 h-20 transform -rotate-90",children:[e.jsx("circle",{cx:"40",cy:"40",r:"35",stroke:"rgba(0,115,114,0.2)",strokeWidth:"6",fill:"none"}),e.jsx("circle",{cx:"40",cy:"40",r:"35",stroke:"#073372",strokeWidth:"6",fill:"none",strokeDasharray:`${J*2.2} 220`,strokeLinecap:"round"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"text-lg font-bold",children:[J,"%"]})})]})})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i&&!Z(i.id)&&e.jsx("div",{className:"mb-8",children:e.jsx(q,{className:"border-2 border-[#17BC91] bg-gradient-to-r from-emerald-50 to-teal-50 overflow-hidden",children:e.jsx(B,{className:"p-0",children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsxs("div",{className:"flex-1 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(D,{className:"w-5 h-5 text-[#17BC91]"}),e.jsx("span",{className:"text-sm font-semibold text-[#17BC91] uppercase tracking-wide",children:"Tu siguiente paso"})]}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:d[i.id]?.regular_completed?`Refuerzo: Pr√°cticas de Sesi√≥n ${i.session_number}`:`Sesi√≥n ${i.session_number}: ${i.title}`}),d[i.id]?.regular_completed&&e.jsx("div",{className:"mb-4 p-3 bg-cyan-100/50 rounded-lg border border-cyan-200",children:e.jsxs("p",{className:"text-sm text-cyan-800 font-medium",children:["Has completado la teor√≠a. Ahora debes realizar al menos ",f.min_required," pr√°cticas para avanzar a la siguiente sesi√≥n.",e.jsxs("span",{className:"block mt-1 font-bold",children:["Llevas: ",d[i.id].practice_completed_count," / ",f.min_required]})]})}),i.description&&!d[i.id]?.regular_completed&&e.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:i.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-4",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(u,{className:"w-4 h-4"}),i.duration_minutes," min"]}),i.has_exam&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ce,{className:"w-4 h-4"}),i.exam_questions_count," preguntas"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(()=>{const s=new Date().toLocaleDateString("en-CA",{timeZone:"America/Lima"}),t=d[i.id],a=t?.practice_sessions.find(l=>new Date(l.scheduled_at).toLocaleDateString("en-CA",{timeZone:"America/Lima"})===s&&l.status==="scheduled"),r=t?.pending_request?.type==="practice"&&t.pending_request.requested_datetime&&new Date(t.pending_request.requested_datetime).toLocaleDateString("en-CA",{timeZone:"America/Lima"})===s;return t?.regular_completed?a?e.jsxs("div",{className:"w-full bg-cyan-50 rounded-xl border-2 border-cyan-200 p-4 animate-pulse-subtle",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4 text-cyan-600"}),e.jsx("span",{className:"text-xs font-bold text-cyan-700 uppercase tracking-wider",children:"Pr√°ctica para hoy"})]}),e.jsx(k,{className:"bg-cyan-500 text-white border-0 text-[10px]",children:"Confirmado"})]}),e.jsxs("p",{className:"text-gray-900 font-bold text-sm mb-3",children:[new Date(a.scheduled_at).toLocaleTimeString("es-PE",{hour:"2-digit",minute:"2-digit"}),a.teacher?.name&&` - Prof. ${a.teacher.name}`]}),a.meet_url?e.jsxs(c,{className:"w-full bg-[#17BC91] hover:bg-[#14a77f] text-white font-bold h-12 shadow-md shadow-emerald-100",onClick:()=>window.open(a.meet_url,"_blank"),children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"ENTRAR A PR√ÅCTICA"]}):e.jsx("p",{className:"text-[10px] text-cyan-600 italic bg-white/50 p-2 rounded border border-cyan-100",children:"* Link de acceso disponible pronto"})]}):r?e.jsxs("div",{className:"w-full bg-orange-50 rounded-xl border border-orange-200 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(u,{className:"w-4 h-4 text-orange-500"}),e.jsx("span",{className:"text-xs font-bold text-orange-700 uppercase",children:"Solicitud en Revisi√≥n"})]}),e.jsx("p",{className:"text-[11px] text-orange-800",children:"Ya solicitaste una pr√°ctica para hoy. Un instructor la revisar√° pronto."})]}):e.jsxs(c,{className:"bg-cyan-600 hover:bg-cyan-700 shadow-md shadow-cyan-600/20",onClick:()=>X(i,"practice"),children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Programar Pr√°ctica"]}):e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(j,{href:`/student/class-templates/${i.id}`,children:e.jsxs(c,{className:"bg-[#073372] hover:bg-[#052555]",children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Ver contenido"]})}),(()=>{const l=t?.regular_session;return l?.meet_url&&l.status==="scheduled"&&new Date(l.scheduled_at).toLocaleDateString("en-CA",{timeZone:"America/Lima"})===s?e.jsxs(c,{className:"bg-[#17BC91] hover:bg-[#14a77f]",onClick:()=>window.open(l.meet_url,"_blank"),children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Unirse a Clase"]}):null})()]})})()})]}),e.jsx("div",{className:"hidden md:flex items-center justify-center w-48 bg-gradient-to-br from-[#17BC91] to-[#14a77f] text-white",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl font-bold opacity-90",children:i.session_number}),e.jsx("div",{className:"text-sm opacity-75",children:"Sesi√≥n"})]})})]})})})}),T===b&&b>0&&e.jsx("div",{className:"mb-8",children:e.jsx(q,{className:"border-2 border-yellow-400 bg-gradient-to-r from-yellow-50 to-amber-50 overflow-hidden",children:e.jsxs(B,{className:"p-6 text-center",children:[e.jsx(Ce,{className:"w-16 h-16 mx-auto mb-4 text-yellow-500"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"¬°Felicitaciones! Has completado todas las sesiones üéâ"}),e.jsx("p",{className:"text-gray-600",children:"Has demostrado un excelente compromiso con tu aprendizaje. ¬°Sigue as√≠!"})]})})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Todas las Sesiones"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Completa cada sesi√≥n en orden para desbloquear la siguiente"})]}),L.length===0?e.jsx(q,{children:e.jsxs(B,{className:"py-12 text-center",children:[e.jsx(ne,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No hay clases disponibles"}),e.jsx("p",{className:"text-gray-600",children:"Las clases de tu nivel aparecer√°n aqu√≠."})]})}):e.jsx("div",{className:"space-y-3",children:v.map((s,t)=>{const a=ye(s),r=d[s.id],l=a.type==="locked",n=a.type==="completed",F=a.icon;return e.jsx(q,{className:`relative overflow-hidden transition-all duration-300 ${n?"border-emerald-200 bg-emerald-50/50":l?"border-gray-200 bg-gray-50 opacity-60":"border-gray-200 hover:border-[#073372]/30 hover:shadow-md"}`,children:e.jsxs("div",{className:"flex items-stretch",children:[e.jsxs("div",{className:`w-20 flex-shrink-0 flex flex-col items-center justify-center py-4 ${n?"bg-emerald-500":l?"bg-gray-300":"bg-gradient-to-b from-[#073372] to-[#0a4a9e]"}`,children:[e.jsx("span",{className:"text-3xl font-bold text-white",children:s.session_number}),e.jsx("span",{className:"text-xs text-white/80 uppercase",children:"Sesi√≥n"})]}),e.jsxs("div",{className:"flex-1 p-4 flex items-center gap-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${a.color}`,children:e.jsx(F,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:`font-semibold truncate ${l?"text-gray-400":"text-gray-900"}`,children:s.title}),e.jsx(k,{className:`${a.color} text-white text-xs flex-shrink-0`,children:a.label})]}),s.description&&e.jsx("p",{className:`text-sm line-clamp-1 ${l?"text-gray-400":"text-gray-600"}`,children:s.description}),e.jsxs("div",{className:`flex items-center gap-3 mt-2 text-xs ${l?"text-gray-400":"text-gray-500"}`,children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(u,{className:"w-3.5 h-3.5"}),s.duration_minutes," min"]}),s.has_exam&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ce,{className:"w-3.5 h-3.5"}),s.exam_questions_count," preguntas"]}),s.resources_count>0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(we,{className:"w-3.5 h-3.5"}),s.resources_count," recursos"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[l&&e.jsxs("div",{className:"text-center px-4",children:[e.jsx(oe,{className:"w-5 h-5 text-gray-400 mx-auto mb-1"}),e.jsxs("span",{className:"text-xs text-gray-400",children:["Completa la sesi√≥n ",parseInt(s.session_number)-1]})]}),a.type==="completed"&&e.jsx(j,{href:`/student/class-templates/${s.id}`,children:e.jsxs(c,{variant:"outline",size:"sm",className:"border-emerald-300 text-emerald-600 hover:bg-emerald-50",children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Ver contenido"]})}),a.type==="practices_pending"&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[(()=>{const P=new Date().toLocaleDateString("en-CA",{timeZone:"America/Lima"}),x=d[s.id],S=x?.practice_sessions.find(ee=>new Date(ee.scheduled_at).toLocaleDateString("en-CA",{timeZone:"America/Lima"})===P&&ee.status==="scheduled"),ve=x?.pending_request?.type==="practice"&&x.pending_request.requested_datetime&&new Date(x.pending_request.requested_datetime).toLocaleDateString("en-CA",{timeZone:"America/Lima"})===P;return S?e.jsxs("div",{className:"flex items-center gap-2 p-1 bg-emerald-50 rounded-lg border border-emerald-100",children:[e.jsxs("div",{className:"text-[10px] text-emerald-800 font-bold px-2 py-0.5 bg-white rounded border border-emerald-200",children:["Hoy ",new Date(S.scheduled_at).toLocaleTimeString("es-PE",{hour:"2-digit",minute:"2-digit"})]}),S.meet_url?e.jsxs(c,{size:"sm",className:"h-7 px-3 bg-[#17BC91] hover:bg-[#14a77f] text-[10px] font-bold",onClick:()=>window.open(S.meet_url,"_blank"),children:[e.jsx(V,{className:"w-3 h-3 mr-1"}),"ENTRAR"]}):e.jsx("span",{className:"text-[9px] text-emerald-600 font-medium px-1",children:"Link hoy"})]}):ve?e.jsxs("div",{className:"flex items-center gap-2 p-1 bg-orange-50 rounded-lg border border-orange-100",children:[e.jsx(u,{className:"w-3 h-3 text-orange-500"}),e.jsx("span",{className:"text-[10px] text-orange-700 font-bold uppercase",children:"En revisi√≥n para hoy"})]}):e.jsxs(c,{size:"sm",className:"bg-cyan-600 hover:bg-cyan-700",onClick:()=>X(s,"practice"),children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Programar Pr√°ctica"]})})(),e.jsx(j,{href:`/student/class-templates/${s.id}`,children:e.jsxs(c,{variant:"outline",size:"sm",children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Detalle"]})})]}),(a.type==="scheduled"||a.type==="in_progress")&&e.jsxs("div",{className:"flex items-center gap-2",children:[(()=>{const P=new Date().toLocaleDateString("en-CA",{timeZone:"America/Lima"}),x=d[s.id]?.regular_session;return x?.meet_url&&x.status!=="completed"&&new Date(x.scheduled_at).toLocaleDateString("en-CA",{timeZone:"America/Lima"})===P?e.jsxs(c,{size:"sm",className:"bg-[#17BC91] hover:bg-[#14a77f]",onClick:()=>window.open(x.meet_url,"_blank"),children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Entrar a Clase"]}):null})(),e.jsx(j,{href:`/student/class-templates/${s.id}`,children:e.jsxs(c,{size:"sm",className:"bg-[#073372] hover:bg-[#052555]",children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Ver contenido"]})})]}),a.type==="request_pending"&&r?.pending_request&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{href:`/student/class-templates/${s.id}`,children:e.jsxs(c,{variant:"outline",size:"sm",children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Ver temario"]})}),e.jsx(c,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>Ne(r.pending_request.id),children:"Cancelar"})]}),a.type==="request_approved"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-cyan-600 bg-cyan-50 px-2 py-1 rounded",children:"En espera de programaci√≥n"}),e.jsx(j,{href:`/student/class-templates/${s.id}`,children:e.jsxs(c,{variant:"outline",size:"sm",children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Ver temario"]})})]})]})]}),n&&t<v.length-1&&e.jsx("div",{className:"absolute -bottom-3 left-10 transform -translate-x-1/2 z-10",children:e.jsx("div",{className:"w-6 h-6 bg-emerald-500 rounded-full flex items-center justify-center shadow-lg",children:e.jsx(ke,{className:"w-4 h-4 text-white rotate-90"})})})]})},s.id)})})]})]}),y&&m&&e.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>A(!1),children:e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md",onClick:s=>s.stopPropagation(),children:[e.jsx("div",{className:"bg-gradient-to-r from-[#073372] to-[#17BC91] px-6 py-5 rounded-t-2xl",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx("span",{className:"text-xl font-bold text-white",children:m.session_number})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Solicitar Clase"}),e.jsxs("p",{className:"text-blue-100 text-sm",children:["Sesi√≥n ",m.session_number]})]})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:m.title}),e.jsx(k,{variant:"outline",className:$==="practice"?"text-cyan-600 border-cyan-200":"text-blue-600 border-blue-200",children:$==="practice"?"Sesi√≥n de Pr√°ctica":"Clase Te√≥rica"})]}),e.jsx("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(u,{className:"w-3.5 h-3.5"}),m.duration_minutes," min"]})})]}),p||w||_?e.jsxs("div",{className:"space-y-4",children:[p&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Horario Disponible"}),fe?e.jsx("div",{className:"flex items-center justify-center p-4",children:e.jsx(qe,{className:"w-6 h-6 animate-spin text-blue-500"})}):z.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-40 overflow-y-auto",children:z.map(s=>e.jsxs("div",{onClick:()=>H(s.id),className:`p-3 rounded-xl border-2 transition-all cursor-pointer flex items-center justify-between ${h===s.id?"border-blue-500 bg-blue-50 shadow-sm":"border-gray-100 hover:border-gray-200 bg-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${h===s.id?"bg-blue-500 text-white":"bg-gray-100 text-gray-400"}`,children:e.jsx(u,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-gray-900",children:new Date(s.scheduled_at).toLocaleTimeString("es-PE",{hour:"2-digit",minute:"2-digit"})}),e.jsx("p",{className:"text-[10px] text-gray-500",children:s.teacher?`Prof. ${s.teacher.name}`:"Asignaci√≥n autom√°tica"})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs(k,{className:s.available_spots>1?"bg-emerald-500":"bg-amber-500",children:[s.available_spots," cupos"]})})]},s.id))}):e.jsx("div",{className:"p-3 bg-blue-50 text-blue-700 text-xs rounded-lg border border-blue-100",children:"El pr√≥ximo horario disponible ser√° calculado autom√°ticamente."})]}),(w||_)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Selecciona Horario"}),e.jsx("input",{type:"datetime-local",className:"w-full p-3 rounded-xl border-gray-200 text-sm focus:ring-2 focus:ring-[#17BC91]",value:M,onChange:s=>G(s.target.value)})]})]}):e.jsx(_e,{label:"Preferencia de Horario",value:U,onChange:s=>O(s.target.value),placeholder:"Ej: Lunes a las 10:00 AM",rows:3}),e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-blue-50 rounded-lg",children:[e.jsx(ie,{className:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-xs text-blue-700",children:$==="practice"?"Podr√°s unirte a la sesi√≥n una vez que sea confirmada por un instructor.":"Un administrador revisar√° tu petici√≥n y te asignar√° el horario solicitado."})]})]}),e.jsxs("div",{className:"bg-gray-50 px-6 py-4 rounded-b-2xl flex justify-end gap-3 border-t",children:[e.jsx(c,{variant:"outline",onClick:()=>A(!1),children:"Cancelar"}),e.jsxs(c,{onClick:je,disabled:W,className:"bg-[#17BC91] hover:bg-[#14a77f]",children:[e.jsx(De,{className:"w-4 h-4 mr-2"}),W?"Enviando...":"Enviar Solicitud"]})]})]})})]})};export{ds as default};
