import{r as C,c as oe,j as t,b as we}from"./app-NrNIKRGF.js";import{D as fe,t as ge,A as ye}from"./AuthenticatedLayout-BWQ4epgC.js";import{c as se,B as Z}from"./button-B4lFAjRl.js";import{B as ee}from"./badge-Coos99GN.js";import{a as re,C as ne,c as ie,d as ce,b as ue}from"./card-Dw_BSVvU.js";import{L as Ce}from"./label-CS4CVQXP.js";import{C as Se}from"./circle-check-big-BQYtRkZy.js";import{V as he}from"./video-DQfmV5_w.js";import{F as je}from"./file-text-DmMTnfai.js";import{a as Ee,C as ke}from"./chevron-up-CnUIGxZc.js";import{F as xe}from"./file-question-DQ4Pp6CT.js";import{A as $e}from"./award-BkUz3UNJ.js";import{P as pe}from"./play-Buh-DuoO.js";import{B as Ve}from"./book-open-DWJIKL0I.js";import{C as Ae}from"./clock-DZCqlfmA.js";/* empty css            */import"./dropdown-menu-Cv5dCpux.js";import"./createLucideIcon-BBzJVuw5.js";import"./index-CcZ2iD88.js";import"./index-1EQp5QUa.js";import"./index-DJKh4HDi.js";import"./triangle-alert-CC45l-EA.js";import"./clsx-B-dksMZM.js";const be=C.forwardRef((n,s)=>{const e=oe.c(40);let l,x,g,u,i,r,o;e[0]!==n?({className:l,value:g,max:u,showLabel:i,size:r,variant:o,...x}=n,e[0]=n,e[1]=l,e[2]=x,e[3]=g,e[4]=u,e[5]=i,e[6]=r,e[7]=o):(l=e[1],x=e[2],g=e[3],u=e[4],i=e[5],r=e[6],o=e[7]);const h=g===void 0?0:g,c=u===void 0?100:u,v=i===void 0?!1:i,j=r===void 0?"md":r,b=o===void 0?"default":o,a=Math.min(Math.max(h/c*100,0),100);let m,d,p,f,N;if(e[8]!==l||e[9]!==a||e[10]!==x||e[11]!==s||e[12]!==j||e[13]!==b){const X={sm:"h-1.5",md:"h-2.5",lg:"h-4"},_={default:"bg-[#073372]",success:"bg-[#17BC91]",warning:"bg-[#F98613]",danger:"bg-red-500"},R=()=>b!=="default"?_[b]:a>=100?_.success:a>=70?_.default:a>=40?_.warning:_.danger;e[19]!==l?(f=se("w-full",l),e[19]=l,e[20]=f):f=e[20],N=s,m=x,p=se("w-full bg-gray-200 rounded-full overflow-hidden",X[j]),d=se("h-full rounded-full transition-all duration-500 ease-out",R()),e[8]=l,e[9]=a,e[10]=x,e[11]=s,e[12]=j,e[13]=b,e[14]=m,e[15]=d,e[16]=p,e[17]=f,e[18]=N}else m=e[14],d=e[15],p=e[16],f=e[17],N=e[18];const E=`${a}%`;let k;e[21]!==E?(k={width:E},e[21]=E,e[22]=k):k=e[22];let w;e[23]!==k||e[24]!==d?(w=t.jsx("div",{className:d,style:k}),e[23]=k,e[24]=d,e[25]=w):w=e[25];let S;e[26]!==w||e[27]!==p?(S=t.jsx("div",{className:p,children:w}),e[26]=w,e[27]=p,e[28]=S):S=e[28];let y;e[29]!==c||e[30]!==a||e[31]!==v||e[32]!==h?(y=v&&t.jsxs("div",{className:"mt-1 flex justify-between text-xs text-gray-600",children:[t.jsxs("span",{children:[Math.round(a),"%"]}),t.jsxs("span",{children:[h,"/",c]})]}),e[29]=c,e[30]=a,e[31]=v,e[32]=h,e[33]=y):y=e[33];let $;return e[34]!==m||e[35]!==S||e[36]!==y||e[37]!==f||e[38]!==N?($=t.jsxs("div",{className:f,ref:N,...m,children:[S,y]}),e[34]=m,e[35]=S,e[36]=y,e[37]=f,e[38]=N,e[39]=$):$=e[39],$});be.displayName="Progress";const ve=C.createContext({}),Ne=C.forwardRef((n,s)=>{const e=oe.c(27);let l,x,g,u,i,r,o,h;e[0]!==n?({className:x,value:h,onValueChange:r,defaultValue:g,disabled:u,name:i,children:l,...o}=n,e[0]=n,e[1]=l,e[2]=x,e[3]=g,e[4]=u,e[5]=i,e[6]=r,e[7]=o,e[8]=h):(l=e[1],x=e[2],g=e[3],u=e[4],i=e[5],r=e[6],o=e[7],h=e[8]);const[c,v]=C.useState(g),j=h!==void 0?h:c;let b;e[9]!==r||e[10]!==h?(b=N=>{h===void 0&&v(N),r?.(N)},e[9]=r,e[10]=h,e[11]=b):b=e[11];const a=b;let m;e[12]!==j||e[13]!==u||e[14]!==a||e[15]!==i?(m={value:j,onValueChange:a,name:i,disabled:u},e[12]=j,e[13]=u,e[14]=a,e[15]=i,e[16]=m):m=e[16];let d;e[17]!==x?(d=se("grid gap-2",x),e[17]=x,e[18]=d):d=e[18];let p;e[19]!==l||e[20]!==o||e[21]!==s||e[22]!==d?(p=t.jsx("div",{ref:s,role:"radiogroup",className:d,...o,children:l}),e[19]=l,e[20]=o,e[21]=s,e[22]=d,e[23]=p):p=e[23];let f;return e[24]!==m||e[25]!==p?(f=t.jsx(ve.Provider,{value:m,children:p}),e[24]=m,e[25]=p,e[26]=f):f=e[26],f});Ne.displayName="RadioGroup";const _e=C.forwardRef((n,s)=>{const e=oe.c(30);let l,x,g,u,i;e[0]!==n?({className:l,value:i,id:x,disabled:g,...u}=n,e[0]=n,e[1]=l,e[2]=x,e[3]=g,e[4]=u,e[5]=i):(l=e[1],x=e[2],g=e[3],u=e[4],i=e[5]);const r=C.useContext(ve),o=r.value===i,h=g||r.disabled,c=x||`radio-${i}`;let v;e[6]!==r||e[7]!==i?(v=()=>r.onValueChange?.(i),e[6]=r,e[7]=i,e[8]=v):v=e[8];let j;e[9]!==r.name||e[10]!==c||e[11]!==o||e[12]!==h||e[13]!==u||e[14]!==s||e[15]!==v||e[16]!==i?(j=t.jsx("input",{ref:s,type:"radio",id:c,name:r.name,value:i,checked:o,disabled:h,onChange:v,className:"sr-only peer",...u}),e[9]=r.name,e[10]=c,e[11]=o,e[12]=h,e[13]=u,e[14]=s,e[15]=v,e[16]=i,e[17]=j):j=e[17];const b=o&&"border-[#073372]";let a;e[18]!==l||e[19]!==b?(a=se("aspect-square h-4 w-4 rounded-full border border-gray-300 cursor-pointer","flex items-center justify-center","ring-offset-white transition-all duration-200","focus-within:ring-2 focus-within:ring-[#073372] focus-within:ring-offset-2","peer-disabled:cursor-not-allowed peer-disabled:opacity-50",b,l),e[18]=l,e[19]=b,e[20]=a):a=e[20];let m;e[21]!==o?(m=o&&t.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-[#073372] animate-in zoom-in-50 duration-200"}),e[21]=o,e[22]=m):m=e[22];let d;e[23]!==c||e[24]!==a||e[25]!==m?(d=t.jsx("label",{htmlFor:c,className:a,children:m}),e[23]=c,e[24]=a,e[25]=m,e[26]=d):d=e[26];let p;return e[27]!==j||e[28]!==d?(p=t.jsxs("div",{className:"relative flex items-center",children:[j,d]}),e[27]=j,e[28]=d,e[29]=p):p=e[29],p});_e.displayName="RadioGroupItem";const ns=n=>{const s=oe.c(79),{enrollment:e,examQuestions:l}=n,[x,g]=C.useState(!0),[u,i]=C.useState(!1),[r,o]=C.useState(0);let h;s[0]===Symbol.for("react.memo_cache_sentinel")?(h={},s[0]=h):h=s[0];const[c,v]=C.useState(h),[,j]=C.useState(!1),{scheduled_class:b}=e,{template:a}=b,m=b.recording_url||a.intro_video_url,d=!!b.recording_url,p=Re;let f;s[1]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{i(!0),o(0),v({}),j(!1)},s[1]=f):f=s[1];const N=f;let E;s[2]===Symbol.for("react.memo_cache_sentinel")?(E=(V,A)=>{v(de=>({...de,[V]:A}))},s[2]=E):E=s[2];const k=E;let w;s[3]!==c||s[4]!==e.id||s[5]!==l?(w=()=>{if(!l)return;const V=l.map((A,de)=>c[de]||null);we.post(`/student/class-enrollments/${e.id}/submit-exam`,{answers:V},{onSuccess:()=>{ge.success("Examen enviado"),j(!0)},onError:De})},s[3]=c,s[4]=e.id,s[5]=l,s[6]=w):w=s[6];const S=w;let y;s[7]!==c||s[8]!==l?(y=l?Math.round(Object.keys(c).length/l.length*100):0,s[7]=c,s[8]=l,s[9]=y):y=s[9];const $=y,X=a.academic_level?.color||"#3B82F6";let _;s[10]!==X?(_={backgroundColor:X},s[10]=X,s[11]=_):_=s[11];let R;s[12]===Symbol.for("react.memo_cache_sentinel")?(R=t.jsx(Ve,{className:"w-7 h-7 text-white"}),s[12]=R):R=s[12];let D;s[13]!==_?(D=t.jsx("div",{className:"w-14 h-14 rounded-xl flex items-center justify-center",style:_,children:R}),s[13]=_,s[14]=D):D=s[14];let F;s[15]!==a.title?(F=t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:a.title}),s[15]=a.title,s[16]=F):F=s[16];let B;s[17]!==a.academic_level.name?(B=t.jsx(ee,{variant:"outline",children:a.academic_level.name}),s[17]=a.academic_level.name,s[18]=B):B=s[18];let z;s[19]!==a.session_number?(z=t.jsxs(ee,{variant:"secondary",children:["Sesi贸n ",a.session_number]}),s[19]=a.session_number,s[20]=z):z=s[20];let M;s[21]!==e.attended?(M=e.attended&&t.jsxs(ee,{variant:"default",className:"bg-green-600",children:[t.jsx(Se,{className:"w-3 h-3 mr-1"}),"Asisti贸"]}),s[21]=e.attended,s[22]=M):M=s[22];let I;s[23]!==B||s[24]!==z||s[25]!==M?(I=t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[B,z,M]}),s[23]=B,s[24]=z,s[25]=M,s[26]=I):I=s[26];let L;s[27]!==F||s[28]!==I?(L=t.jsxs("div",{children:[F,I]}),s[27]=F,s[28]=I,s[29]=L):L=s[29];let P;s[30]!==L||s[31]!==D?(P=t.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[D,L]}),s[30]=L,s[31]=D,s[32]=P):P=s[32];let G;s[33]!==a.description?(G=a.description&&t.jsx("p",{className:"text-gray-600 mt-3",children:a.description}),s[33]=a.description,s[34]=G):G=s[34];let O;s[35]!==P||s[36]!==G?(O=t.jsxs("div",{className:"mb-6",children:[P,G]}),s[35]=P,s[36]=G,s[37]=O):O=s[37];let te;s[38]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx(he,{className:"h-5 w-5"}),s[38]=te):te=s[38];const me=d?"Grabaci贸n de tu Clase":"Video Introductorio";let T;s[39]!==me?(T=t.jsxs(ce,{className:"flex items-center gap-2",children:[te,me]}),s[39]=me,s[40]=T):T=s[40];let q;s[41]!==d?(q=d&&t.jsxs(ee,{variant:"default",className:"bg-purple-600",children:[t.jsx(pe,{className:"w-3 h-3 mr-1"}),"Tu sesi贸n grabada"]}),s[41]=d,s[42]=q):q=s[42];let Q;s[43]!==T||s[44]!==q?(Q=t.jsx(ie,{className:"pb-3",children:t.jsxs("div",{className:"flex items-center justify-between",children:[T,q]})}),s[43]=T,s[44]=q,s[45]=Q):Q=s[45];let U;s[46]!==m?(U=t.jsx(re,{children:m?t.jsx("div",{className:"aspect-video rounded-lg overflow-hidden bg-black",children:t.jsx("iframe",{src:p(m),className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):t.jsx("div",{className:"aspect-video rounded-lg bg-gray-100 flex items-center justify-center",children:t.jsxs("div",{className:"text-center text-gray-500",children:[t.jsx(he,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),t.jsx("p",{children:"El video estar谩 disponible pronto"})]})})}),s[46]=m,s[47]=U):U=s[47];let H;s[48]!==Q||s[49]!==U?(H=t.jsxs(ne,{className:"mb-6",children:[Q,U]}),s[48]=Q,s[49]=U,s[50]=H):H=s[50];let Y;s[51]!==x||s[52]!==a.content||s[53]!==a.objectives?(Y=a.content&&t.jsxs(ne,{className:"mb-6",children:[t.jsx(ie,{className:"cursor-pointer",onClick:()=>g(!x),children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs(ce,{className:"flex items-center gap-2",children:[t.jsx(je,{className:"h-5 w-5"}),"Desarrollo de la Clase"]}),x?t.jsx(Ee,{className:"h-5 w-5"}):t.jsx(ke,{className:"h-5 w-5"})]})}),x&&t.jsxs(re,{children:[a.objectives&&t.jsxs("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:[t.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:" Objetivos de Aprendizaje"}),t.jsx("div",{className:"text-blue-800 whitespace-pre-line",children:a.objectives})]}),t.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:a.content}})]})]}),s[51]=x,s[52]=a.content,s[53]=a.objectives,s[54]=Y):Y=s[54];let J;s[55]!==a.resources?(J=a.resources.length>0&&t.jsxs(ne,{className:"mb-6",children:[t.jsxs(ie,{children:[t.jsxs(ce,{className:"flex items-center gap-2",children:[t.jsx(fe,{className:"h-5 w-5"}),"Material Descargable"]}),t.jsx(ue,{children:"Descarga estos recursos para complementar tu aprendizaje"})]}),t.jsx(re,{children:t.jsx("div",{className:"grid grid-cols-2 gap-4",children:a.resources.map(Fe)})})]}),s[55]=a.resources,s[56]=J):J=s[56];let K;s[57]!==c||s[58]!==r||s[59]!==e.exam_completed||s[60]!==e.latest_exam_attempt||s[61]!==$||s[62]!==l||s[63]!==S||s[64]!==u||s[65]!==a.exam_passing_score||s[66]!==a.exam_questions_count||s[67]!==a.has_exam?(K=a.has_exam&&t.jsxs(ne,{children:[t.jsxs(ie,{children:[t.jsxs(ce,{className:"flex items-center gap-2",children:[t.jsx(xe,{className:"h-5 w-5"}),"Evaluaci贸n de la Sesi贸n"]}),t.jsxs(ue,{children:["Responde las preguntas para completar esta sesi贸n. Necesitas ",a.exam_passing_score,"% para aprobar."]})]}),t.jsx(re,{children:e.exam_completed&&e.latest_exam_attempt?t.jsxs("div",{className:"text-center py-6",children:[t.jsx("div",{className:`w-24 h-24 mx-auto rounded-full flex items-center justify-center mb-4 ${e.latest_exam_attempt.passed?"bg-green-100":"bg-red-100"}`,children:e.latest_exam_attempt.passed?t.jsx($e,{className:"w-12 h-12 text-green-600"}):t.jsx(xe,{className:"w-12 h-12 text-red-600"})}),t.jsx("h3",{className:"text-xl font-bold mb-2",children:e.latest_exam_attempt.passed?"隆Felicitaciones!":"Sigue intentando"}),t.jsxs("p",{className:"text-gray-600 mb-4",children:["Obtuviste ",e.latest_exam_attempt.score," de ",e.latest_exam_attempt.total_points," puntos"]}),t.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-full",children:[t.jsxs("span",{className:`text-2xl font-bold ${e.latest_exam_attempt.passed?"text-green-600":"text-red-600"}`,children:[e.latest_exam_attempt.percentage,"%"]}),t.jsx(ee,{variant:e.latest_exam_attempt.passed?"default":"destructive",children:e.latest_exam_attempt.passed?"Aprobado":"No aprobado"})]}),!e.latest_exam_attempt.passed&&t.jsx(Z,{className:"mt-6",onClick:N,children:"Intentar de nuevo"})]}):u&&l?t.jsxs("div",{children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("span",{className:"text-sm text-gray-600",children:["Pregunta ",r+1," de ",l.length]}),t.jsxs("span",{className:"text-sm text-gray-600",children:[Object.keys(c).length," respondidas"]})]}),t.jsx(be,{value:$,className:"h-2"})]}),t.jsxs("div",{className:"p-6 bg-gray-50 rounded-lg mb-6",children:[t.jsx("p",{className:"text-lg font-medium mb-4",children:l[r].question}),t.jsx(Ne,{value:c[r]||"",onValueChange:V=>k(r,V),children:l[r].options.map(Be)})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(Z,{variant:"outline",onClick:()=>o(ze),disabled:r===0,children:"Anterior"}),t.jsx("div",{className:"flex gap-1",children:l.map((V,A)=>t.jsx("button",{onClick:()=>o(A),className:`w-8 h-8 rounded text-sm font-medium transition ${A===r?"bg-blue-600 text-white":c[A]?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:A+1},A))}),r===l.length-1?t.jsx(Z,{onClick:S,disabled:Object.keys(c).length<l.length,children:"Enviar Examen"}):t.jsx(Z,{onClick:()=>o(V=>Math.min(l.length-1,V+1)),children:"Siguiente"})]})]}):t.jsxs("div",{className:"text-center py-8",children:[t.jsx(xe,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"驴Listo para la evaluaci贸n?"}),t.jsxs("p",{className:"text-gray-600 mb-6",children:["Tendr谩s ",a.exam_questions_count," preguntas aleatorias.",t.jsx("br",{}),"Necesitas ",a.exam_passing_score,"% para aprobar."]}),t.jsxs(Z,{size:"lg",onClick:N,children:[t.jsx(pe,{className:"w-4 h-4 mr-2"}),"Comenzar Evaluaci贸n"]})]})})]}),s[57]=c,s[58]=r,s[59]=e.exam_completed,s[60]=e.latest_exam_attempt,s[61]=$,s[62]=l,s[63]=S,s[64]=u,s[65]=a.exam_passing_score,s[66]=a.exam_questions_count,s[67]=a.has_exam,s[68]=K):K=s[68];let ae;s[69]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx(Ae,{className:"w-4 h-4"}),s[69]=ae):ae=s[69];let W;s[70]!==a.duration_minutes?(W=t.jsxs("div",{className:"mt-6 flex items-center justify-center gap-2 text-sm text-gray-500",children:[ae,t.jsxs("span",{children:["Duraci贸n estimada: ",a.duration_minutes," minutos"]})]}),s[70]=a.duration_minutes,s[71]=W):W=s[71];let le;return s[72]!==O||s[73]!==H||s[74]!==Y||s[75]!==J||s[76]!==K||s[77]!==W?(le=t.jsx(ye,{children:t.jsxs("div",{className:"max-w-5xl mx-auto p-6",children:[O,H,Y,J,K,W]})}),s[72]=O,s[73]=H,s[74]=Y,s[75]=J,s[76]=K,s[77]=W,s[78]=le):le=s[78],le};function Re(n){if(!n)return"";const s=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,e=n.match(s);return e&&e[2].length===11?`https://www.youtube.com/embed/${e[2]}`:n}function De(){ge.error("Error al enviar el examen")}function Fe(n){return t.jsxs("a",{href:`/storage/${n.file_path}`,download:!0,className:"flex items-center gap-3 p-4 border rounded-lg hover:bg-gray-50 transition group",children:[t.jsx("div",{className:"w-12 h-12 rounded-lg bg-blue-100 flex items-center justify-center group-hover:bg-blue-200 transition",children:t.jsx(je,{className:"w-6 h-6 text-blue-600"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-medium text-gray-900 truncate",children:n.name}),t.jsx("p",{className:"text-sm text-gray-500",children:n.file_type.toUpperCase()})]}),t.jsx(fe,{className:"w-5 h-5 text-gray-400 group-hover:text-blue-600"})]},n.id)}function Be(n,s){return t.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-white rounded-lg mb-2 hover:bg-blue-50 transition",children:[t.jsx(_e,{value:n.text,id:`option-${s}`}),t.jsx(Ce,{htmlFor:`option-${s}`,className:"flex-1 cursor-pointer",children:n.text})]},s)}function ze(n){return Math.max(0,n-1)}export{ns as default};
