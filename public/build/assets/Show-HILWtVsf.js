import{c as rs,r as Ue,j as s,b as Le,L as ns}from"./app-C20PMGFE.js";import{t as r,A as cs}from"./AuthenticatedLayout-CoxGlEUd.js";import{B as i}from"./button-A7tge7-D.js";import{B as ie}from"./badge-D6WBSPNm.js";import{a as se,C as te,c as le,d as ae}from"./card-DZC9_eF6.js";import{a as Oe,b as Ye,D as Je,c as Ke,d as Qe,e as We}from"./dialog-CMc02ysw.js";import{I as Xe}from"./input-CQC5_gjR.js";import{L as Ze}from"./label-C1YJuAnP.js";import{P as os}from"./play-B1OSn-o0.js";import{C as ds}from"./circle-check-big-DzF_ckL0.js";import{F as es}from"./film-BO7U_ZcT.js";import{V as ss}from"./video-BnGZavym.js";import{c as Te}from"./createLucideIcon-CV5nJv-t.js";import{U as qe}from"./users-CY4hlQI7.js";import{A as ms}from"./arrow-left-2T0HboLF.js";import{C as xs}from"./calendar-BImOY--Y.js";import{C as hs}from"./clock-D2FmpCIh.js";/* empty css            */import"./dropdown-menu-CuAekoYv.js";import"./index-lq6QG8Q8.js";import"./index-FMhRtu3n.js";import"./index-gzDxTBy5.js";import"./file-text-Biy_N_AA.js";import"./triangle-alert-DBZ47Kgx.js";import"./clsx-B-dksMZM.js";import"./index-DYZNEwUp.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],fs=Te("ExternalLink",us);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],js=Te("UserMinus",ps);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],ys=Te("UserPlus",gs),tt=a=>{const e=rs.c(149),{scheduledClass:t}=a,[$e,re]=Ue.useState(!1),[Ae,ne]=Ue.useState(!1),[n,ts]=Ue.useState(t.recording_url||""),[c,Ve]=Ue.useState(""),ls=vs,as=_s;let ce;e[0]!==t.id?(ce=l=>{Le.put(`/admin/scheduled-classes/${t.id}/status`,{status:l},{onSuccess:bs,onError:Ns})},e[0]=t.id,e[1]=ce):ce=e[1];const o=ce;let oe;e[2]!==n||e[3]!==t.id?(oe=()=>{n&&Le.post(`/admin/scheduled-classes/${t.id}/recording`,{recording_url:n},{onSuccess:()=>{r.success("Grabación guardada"),re(!1)},onError:ws})},e[2]=n,e[3]=t.id,e[4]=oe):oe=e[4];const Ge=oe;let de;e[5]!==t.id||e[6]!==c?(de=()=>{c&&Le.post(`/admin/scheduled-classes/${t.id}/enroll`,{student_id:c},{onSuccess:()=>{r.success("Estudiante inscrito"),ne(!1),Ve("")},onError:Cs})},e[5]=t.id,e[6]=c,e[7]=de):de=e[7];const Re=de;let me;e[8]!==t.id?(me=l=>{confirm("¿Estás seguro de remover a este estudiante?")&&Le.delete(`/admin/scheduled-classes/${t.id}/unenroll/${l}`,{onSuccess:Ss,onError:ks})},e[8]=t.id,e[9]=me):me=e[9];const Be=me,is=Es,xe=t.recording_url||t.template.intro_video_url,he=!!t.recording_url;let ue;e[10]===Symbol.for("react.memo_cache_sentinel")?(ue=s.jsx(ns,{href:"/admin/scheduled-classes",children:s.jsx(i,{variant:"ghost",size:"icon",children:s.jsx(ms,{className:"h-5 w-5"})})}),e[10]=ue):ue=e[10];const He=t.template.academic_level?.color||"#3B82F6";let d;e[11]!==He?(d={backgroundColor:He},e[11]=He,e[12]=d):d=e[12];let fe;e[13]===Symbol.for("react.memo_cache_sentinel")?(fe=s.jsx(xs,{className:"w-6 h-6 text-white"}),e[13]=fe):fe=e[13];let m;e[14]!==d?(m=s.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center",style:d,children:fe}),e[14]=d,e[15]=m):m=e[15];let x;e[16]!==t.template.title?(x=s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:t.template.title}),e[16]=t.template.title,e[17]=x):x=e[17];let h;e[18]!==t.template.academic_level.name?(h=s.jsx(ie,{variant:"outline",children:t.template.academic_level.name}),e[18]=t.template.academic_level.name,e[19]=h):h=e[19];let u;e[20]!==t.status?(u=ls(t.status),e[20]=t.status,e[21]=u):u=e[21];let f;e[22]!==h||e[23]!==u?(f=s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[h,u]}),e[22]=h,e[23]=u,e[24]=f):f=e[24];let p;e[25]!==x||e[26]!==f?(p=s.jsxs("div",{children:[x,f]}),e[25]=x,e[26]=f,e[27]=p):p=e[27];let j;e[28]!==p||e[29]!==m?(j=s.jsxs("div",{className:"flex items-center gap-4",children:[ue,s.jsx("div",{children:s.jsxs("div",{className:"flex items-center gap-3",children:[m,p]})})]}),e[28]=p,e[29]=m,e[30]=j):j=e[30];let g;e[31]!==o||e[32]!==t.status?(g=t.status==="scheduled"&&s.jsxs(i,{variant:"outline",onClick:()=>o("in_progress"),children:[s.jsx(os,{className:"w-4 h-4 mr-2"}),"Iniciar Clase"]}),e[31]=o,e[32]=t.status,e[33]=g):g=e[33];let y;e[34]!==o||e[35]!==t.status?(y=t.status==="in_progress"&&s.jsxs(i,{onClick:()=>o("completed"),children:[s.jsx(ds,{className:"w-4 h-4 mr-2"}),"Marcar Completada"]}),e[34]=o,e[35]=t.status,e[36]=y):y=e[36];let v;e[37]!==t.recording_url||e[38]!==t.status?(v=t.status==="completed"&&s.jsxs(i,{variant:"outline",onClick:()=>re(!0),children:[s.jsx(es,{className:"w-4 h-4 mr-2"}),t.recording_url?"Cambiar Grabación":"Agregar Grabación"]}),e[37]=t.recording_url,e[38]=t.status,e[39]=v):v=e[39];let _;e[40]!==g||e[41]!==y||e[42]!==v?(_=s.jsxs("div",{className:"flex gap-2",children:[g,y,v]}),e[40]=g,e[41]=y,e[42]=v,e[43]=_):_=e[43];let b;e[44]!==j||e[45]!==_?(b=s.jsxs("div",{className:"flex items-start justify-between mb-6",children:[j,_]}),e[44]=j,e[45]=_,e[46]=b):b=e[46];let pe;e[47]===Symbol.for("react.memo_cache_sentinel")?(pe=s.jsx(ss,{className:"h-5 w-5"}),e[47]=pe):pe=e[47];const Pe=he?"Grabación de la Clase":"Video de Introducción";let N;e[48]!==Pe?(N=s.jsxs(ae,{className:"flex items-center gap-2",children:[pe,Pe]}),e[48]=Pe,e[49]=N):N=e[49];let w;e[50]!==he?(w=he&&s.jsxs(ie,{variant:"default",className:"w-fit",children:[s.jsx(es,{className:"w-3 h-3 mr-1"}),"Grabación de sesión"]}),e[50]=he,e[51]=w):w=e[51];let C;e[52]!==N||e[53]!==w?(C=s.jsxs(le,{children:[N,w]}),e[52]=N,e[53]=w,e[54]=C):C=e[54];let S;e[55]!==xe?(S=s.jsx(se,{children:xe?s.jsx("div",{className:"aspect-video rounded-lg overflow-hidden bg-black",children:s.jsx("iframe",{src:is(xe),className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):s.jsx("div",{className:"aspect-video rounded-lg bg-gray-100 flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-gray-500",children:[s.jsx(ss,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"No hay video disponible"})]})})}),e[55]=xe,e[56]=S):S=e[56];let k;e[57]!==C||e[58]!==S?(k=s.jsxs(te,{children:[C,S]}),e[57]=C,e[58]=S,e[59]=k):k=e[59];let E;e[60]!==t.template.description?(E=t.template.description&&s.jsxs(te,{children:[s.jsx(le,{children:s.jsx(ae,{children:"Descripción"})}),s.jsx(se,{children:s.jsx("p",{className:"text-gray-700",children:t.template.description})})]}),e[60]=t.template.description,e[61]=E):E=e[61];let D;e[62]!==t.template.content?(D=t.template.content&&s.jsxs(te,{children:[s.jsx(le,{children:s.jsx(ae,{children:"Contenido de la Clase"})}),s.jsx(se,{children:s.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:t.template.content}})})]}),e[62]=t.template.content,e[63]=D):D=e[63];let I;e[64]!==k||e[65]!==E||e[66]!==D?(I=s.jsxs("div",{className:"col-span-2 space-y-6",children:[k,E,D]}),e[64]=k,e[65]=E,e[66]=D,e[67]=I):I=e[67];let je;e[68]===Symbol.for("react.memo_cache_sentinel")?(je=s.jsx(le,{children:s.jsx(ae,{children:"Información"})}),e[68]=je):je=e[68];let ge,ye;e[69]===Symbol.for("react.memo_cache_sentinel")?(ge=s.jsx(hs,{className:"w-5 h-5 text-gray-400"}),ye=s.jsx("p",{className:"text-sm font-medium",children:"Fecha y Hora"}),e[69]=ge,e[70]=ye):(ge=e[69],ye=e[70]);let M;e[71]!==t.scheduled_at?(M=as(t.scheduled_at),e[71]=t.scheduled_at,e[72]=M):M=e[72];let U;e[73]!==M?(U=s.jsxs("div",{className:"flex items-center gap-3",children:[ge,s.jsxs("div",{children:[ye,s.jsx("p",{className:"text-sm text-gray-600",children:M})]})]}),e[73]=M,e[74]=U):U=e[74];let ve,_e;e[75]===Symbol.for("react.memo_cache_sentinel")?(ve=s.jsx(qe,{className:"w-5 h-5 text-gray-400"}),_e=s.jsx("p",{className:"text-sm font-medium",children:"Profesor"}),e[75]=ve,e[76]=_e):(ve=e[75],_e=e[76]);const ze=t.teacher?.name||"Sin asignar";let L;e[77]!==ze?(L=s.jsxs("div",{className:"flex items-center gap-3",children:[ve,s.jsxs("div",{children:[_e,s.jsx("p",{className:"text-sm text-gray-600",children:ze})]})]}),e[77]=ze,e[78]=L):L=e[78];let $;e[79]!==t.meet_url?($=t.meet_url&&s.jsx("div",{children:s.jsxs("a",{href:t.meet_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-blue-600 hover:text-blue-800 text-sm",children:[s.jsx(fs,{className:"w-4 h-4"}),"Abrir enlace de Meet"]})}),e[79]=t.meet_url,e[80]=$):$=e[80];let A;e[81]!==t.notes?(A=t.notes&&s.jsxs("div",{className:"pt-3 border-t",children:[s.jsx("p",{className:"text-sm font-medium mb-1",children:"Notas"}),s.jsx("p",{className:"text-sm text-gray-600",children:t.notes})]}),e[81]=t.notes,e[82]=A):A=e[82];let G;e[83]!==U||e[84]!==L||e[85]!==$||e[86]!==A?(G=s.jsxs(te,{children:[je,s.jsxs(se,{className:"space-y-4",children:[U,L,$,A]})]}),e[83]=U,e[84]=L,e[85]=$,e[86]=A,e[87]=G):G=e[87];let be;e[88]===Symbol.for("react.memo_cache_sentinel")?(be=s.jsx(qe,{className:"h-5 w-5"}),e[88]=be):be=e[88];let R,B;e[89]!==t.enrollments.length||e[90]!==t.max_students?(R=s.jsxs(ae,{className:"flex items-center gap-2",children:[be,"Estudiantes (",t.enrollments.length,"/",t.max_students,")"]}),B=t.enrollments.length<t.max_students&&s.jsx(i,{size:"sm",variant:"outline",onClick:()=>ne(!0),children:s.jsx(ys,{className:"w-4 h-4"})}),e[89]=t.enrollments.length,e[90]=t.max_students,e[91]=R,e[92]=B):(R=e[91],B=e[92]);let H;e[93]!==R||e[94]!==B?(H=s.jsx(le,{children:s.jsxs("div",{className:"flex justify-between items-center",children:[R,B]})}),e[93]=R,e[94]=B,e[95]=H):H=e[95];let P;e[96]!==Be||e[97]!==t.enrollments?(P=s.jsx(se,{children:t.enrollments.length===0?s.jsxs("div",{className:"text-center py-6 text-gray-500",children:[s.jsx(qe,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{className:"text-sm",children:"No hay estudiantes inscritos"})]}):s.jsx("div",{className:"space-y-2",children:t.enrollments.map(l=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsxs("p",{className:"text-sm font-medium truncate",children:[l.student.first_name," ",l.student.last_name]}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.attended&&s.jsx(ie,{variant:"outline",className:"text-xs text-green-600",children:"Asistió"}),l.exam_completed&&s.jsx(ie,{variant:"outline",className:"text-xs text-blue-600",children:"Examen ✓"})]})]}),s.jsx(i,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-600",onClick:()=>Be(l.student.id),children:s.jsx(js,{className:"h-4 w-4"})})]},l.id))})}),e[96]=Be,e[97]=t.enrollments,e[98]=P):P=e[98];let z;e[99]!==H||e[100]!==P?(z=s.jsxs(te,{children:[H,P]}),e[99]=H,e[100]=P,e[101]=z):z=e[101];let F;e[102]!==t.template.resources?(F=t.template.resources.length>0&&s.jsxs(te,{children:[s.jsx(le,{children:s.jsx(ae,{children:"Recursos"})}),s.jsx(se,{children:s.jsx("div",{className:"space-y-2",children:t.template.resources.map(Ds)})})]}),e[102]=t.template.resources,e[103]=F):F=e[103];let q;e[104]!==G||e[105]!==z||e[106]!==F?(q=s.jsxs("div",{className:"space-y-6",children:[G,z,F]}),e[104]=G,e[105]=z,e[106]=F,e[107]=q):q=e[107];let T;e[108]!==I||e[109]!==q?(T=s.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[I,q]}),e[108]=I,e[109]=q,e[110]=T):T=e[110];const Fe=t.recording_url?"Cambiar Grabación":"Agregar Grabación";let V;e[111]!==Fe?(V=s.jsx(Oe,{children:Fe}),e[111]=Fe,e[112]=V):V=e[112];let Ne;e[113]===Symbol.for("react.memo_cache_sentinel")?(Ne=s.jsx(Ye,{children:"La grabación reemplazará el video de introducción para los estudiantes"}),e[113]=Ne):Ne=e[113];let O;e[114]!==V?(O=s.jsxs(Je,{children:[V,Ne]}),e[114]=V,e[115]=O):O=e[115];let we;e[116]===Symbol.for("react.memo_cache_sentinel")?(we=s.jsx(Ze,{children:"URL de la Grabación"}),e[116]=we):we=e[116];let Ce;e[117]===Symbol.for("react.memo_cache_sentinel")?(Ce=l=>ts(l.target.value),e[117]=Ce):Ce=e[117];let Y;e[118]!==n?(Y=s.jsx("div",{className:"space-y-4 py-4",children:s.jsxs("div",{className:"space-y-2",children:[we,s.jsx(Xe,{type:"url",value:n,onChange:Ce,placeholder:"https://drive.google.com/..."})]})}),e[118]=n,e[119]=Y):Y=e[119];let Se;e[120]===Symbol.for("react.memo_cache_sentinel")?(Se=s.jsx(i,{variant:"outline",onClick:()=>re(!1),children:"Cancelar"}),e[120]=Se):Se=e[120];let J;e[121]!==Ge?(J=s.jsxs(Ke,{children:[Se,s.jsx(i,{onClick:Ge,children:"Guardar"})]}),e[121]=Ge,e[122]=J):J=e[122];let K;e[123]!==O||e[124]!==Y||e[125]!==J?(K=s.jsxs(Qe,{children:[O,Y,J]}),e[123]=O,e[124]=Y,e[125]=J,e[126]=K):K=e[126];let Q;e[127]!==$e||e[128]!==K?(Q=s.jsx(We,{open:$e,onOpenChange:re,children:K}),e[127]=$e,e[128]=K,e[129]=Q):Q=e[129];let ke;e[130]===Symbol.for("react.memo_cache_sentinel")?(ke=s.jsxs(Je,{children:[s.jsx(Oe,{children:"Inscribir Estudiante"}),s.jsx(Ye,{children:"Ingresa el ID del estudiante a inscribir"})]}),e[130]=ke):ke=e[130];let Ee;e[131]===Symbol.for("react.memo_cache_sentinel")?(Ee=s.jsx(Ze,{children:"ID del Estudiante"}),e[131]=Ee):Ee=e[131];let De;e[132]===Symbol.for("react.memo_cache_sentinel")?(De=l=>Ve(l.target.value),e[132]=De):De=e[132];let W;e[133]!==c?(W=s.jsx("div",{className:"space-y-4 py-4",children:s.jsxs("div",{className:"space-y-2",children:[Ee,s.jsx(Xe,{type:"number",value:c,onChange:De,placeholder:"ID del estudiante"})]})}),e[133]=c,e[134]=W):W=e[134];let Ie;e[135]===Symbol.for("react.memo_cache_sentinel")?(Ie=s.jsx(i,{variant:"outline",onClick:()=>ne(!1),children:"Cancelar"}),e[135]=Ie):Ie=e[135];let X;e[136]!==Re?(X=s.jsxs(Ke,{children:[Ie,s.jsx(i,{onClick:Re,children:"Inscribir"})]}),e[136]=Re,e[137]=X):X=e[137];let Z;e[138]!==W||e[139]!==X?(Z=s.jsxs(Qe,{children:[ke,W,X]}),e[138]=W,e[139]=X,e[140]=Z):Z=e[140];let ee;e[141]!==Ae||e[142]!==Z?(ee=s.jsx(We,{open:Ae,onOpenChange:ne,children:Z}),e[141]=Ae,e[142]=Z,e[143]=ee):ee=e[143];let Me;return e[144]!==b||e[145]!==T||e[146]!==Q||e[147]!==ee?(Me=s.jsx(cs,{children:s.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[b,T,Q,ee]})}),e[144]=b,e[145]=T,e[146]=Q,e[147]=ee,e[148]=Me):Me=e[148],Me};function vs(a){const e={scheduled:{variant:"outline",label:"Programada"},in_progress:{variant:"default",label:"En curso"},completed:{variant:"secondary",label:"Completada"},cancelled:{variant:"destructive",label:"Cancelada"}},t=e[a]||e.scheduled;return s.jsx(ie,{variant:t.variant,className:"text-sm",children:t.label})}function _s(a){return new Date(a).toLocaleDateString("es-PE",{weekday:"long",day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}function bs(){r.success("Estado actualizado")}function Ns(){r.error("Error al actualizar estado")}function ws(){r.error("Error al guardar grabación")}function Cs(){r.error("Error al inscribir estudiante")}function Ss(){r.success("Estudiante removido")}function ks(){r.error("Error al remover estudiante")}function Es(a){const e=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,t=a.match(e);return t&&t[2].length===11?`https://www.youtube.com/embed/${t[2]}`:a}function Ds(a){return s.jsxs("a",{href:`/storage/${a.file_path}`,download:!0,className:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg hover:bg-gray-100 transition",children:[s.jsx("div",{className:"w-8 h-8 rounded bg-blue-100 flex items-center justify-center",children:s.jsx("span",{className:"text-xs font-medium text-blue-600",children:a.file_type.toUpperCase()})}),s.jsx("span",{className:"text-sm truncate flex-1",children:a.name})]},a.id)}export{tt as default};
