import{r as o,j as e,H as I,a as f}from"./app-DbGauczp.js";import{A as T}from"./AuthenticatedLayout-CcOpJFtm.js";import{t as r}from"./DocumentConfirmationModal-CBO2LUiQ.js";import{I as H}from"./input-DPgu5UPQ.js";import{B as u}from"./button-CTq9rhy_.js";import{C as j,c as y,d as N,a as v}from"./card-I5-tjbS3.js";import{S as w}from"./switch-BeO6WT-B.js";import{S as O}from"./save-DjP4lbGH.js";import{L as C}from"./link-2-D37GqGAW.js";import{C as $}from"./copy-Bqd972xq.js";import{C as F}from"./circle-alert-CWcrbXkv.js";import{C as G}from"./circle-check-big-DVBmLLUY.js";import{C as U}from"./clock-DUwasotU.js";/* empty css            */import"./dropdown-menu-uHHtlmE_.js";import"./createLucideIcon-El5PEAiD.js";import"./index-BV3GPBJK.js";import"./index-Czsmbtr5.js";import"./index-Ced-36WD.js";import"./badge-FEcguR_G.js";import"./x-CaU8MqPZ.js";import"./triangle-alert-Bm1PLXca.js";import"./clsx-B-dksMZM.js";import"./index-C1jNgpeo.js";const k=["Lunes","Martes","Miércoles","Jueves","Viernes","Sábado","Domingo"],pe=({teacher:i,settings:x})=>{const[c,z]=o.useState(i.meet_url||""),[a,S]=o.useState(i.not_available_today),p=s=>(s.includes(":")?s.split(":")[0]:s).padStart(2,"0")+":00",d=p(x?.operation_start_hour||"08"),n=p(x?.operation_end_hour||"22"),[l,g]=o.useState(i.time_slots&&i.time_slots.length>0?Array.from(new Set(i.time_slots.map(s=>s.day_of_week))):k),[m,h]=o.useState(!1),[_,b]=o.useState(!1),D=s=>{l.includes(s)?g(l.filter(t=>t!==s)):g([...l,s])},A=async()=>{h(!0);try{await f.put("/teacher/availability",{meet_url:c||null,time_slots:l.map(s=>({day_of_week:s,start_time:d,end_time:n}))}),r.success("Configuración guardada exitosamente")}catch{r.error("Error al guardar la configuración")}finally{h(!1)}},E=async()=>{b(!0);try{const s=await f.post("/teacher/toggle-availability");S(s.data.not_available_today),s.data.not_available_today?r.warning("Marcado como NO DISPONIBLE por hoy"):r.success("Marcado como DISPONIBLE hoy")}catch{r.error("Error al cambiar disponibilidad")}finally{b(!1)}},L=()=>{c&&(navigator.clipboard.writeText(c),r.success("Link copiado al portapapeles"))},M=s=>({Lunes:"#073372",Martes:"#0ea5e9",Miércoles:"#17BC91",Jueves:"#8b5cf6",Viernes:"#ec4899",Sábado:"#f59e0b",Domingo:"#ef4444"})[s]||"#64748b";return e.jsxs(T,{children:[e.jsx(I,{title:"Mi Disponibilidad"}),e.jsxs("div",{className:"bg-gray-50 min-h-screen pb-12",children:[e.jsx("div",{className:"bg-white border-b sticky top-0 z-30 shadow-sm",children:e.jsx("div",{className:"w-full px-6 py-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Mi Disponibilidad"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Administra tus días de trabajo (Horario fijo de ",d," a ",n,")"]})]}),e.jsx("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:e.jsxs(u,{onClick:A,disabled:m,className:"bg-[#073372] hover:bg-[#062b61] text-white flex-1 sm:w-48",children:[m?"Guardando...":"Guardar Cambios",!m&&e.jsx(O,{className:"w-4 h-4 ml-2"})]})})]})})}),e.jsxs("div",{className:"w-full px-6 py-8 space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(j,{className:"md:col-span-2 shadow-sm border-gray-200",children:[e.jsx(y,{className:"pb-3",children:e.jsxs(N,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 bg-blue-100 rounded-lg",children:e.jsx(C,{className:"w-4 h-4 text-blue-700"})}),"Link de Google Meet"]})}),e.jsx(v,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"relative flex-1",children:e.jsx(H,{readOnly:!0,placeholder:"https://meet.google.com/...",value:c,className:"font-mono text-sm bg-gray-50 text-gray-500 cursor-not-allowed",icon:e.jsx(C,{className:"w-4 h-4"})})}),e.jsx(u,{variant:"outline",size:"icon",onClick:L,title:"Copiar Link",className:"shrink-0",children:e.jsx($,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Este enlace es asignado administrativamente y no puede ser modificado."})]})})]}),e.jsxs(j,{className:`shadow-sm border transition-colors ${a?"border-red-200 bg-red-50/50":"border-emerald-200 bg-emerald-50/50"}`,children:[e.jsx(y,{className:"pb-3",children:e.jsxs(N,{className:"text-base font-semibold flex items-center gap-2",children:[e.jsx("div",{className:`p-1.5 rounded-lg ${a?"bg-red-100":"bg-emerald-100"}`,children:a?e.jsx(F,{className:"w-4 h-4 text-red-700"}):e.jsx(G,{className:"w-4 h-4 text-emerald-700"})}),"Estado de Hoy"]})}),e.jsx(v,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-sm font-medium ${a?"text-red-700":"text-emerald-700"}`,children:a?"NO Disponible":"Disponible"}),e.jsx(w,{checked:!a,onCheckedChange:E,disabled:_,className:"data-[state=checked]:bg-[#17BC91]"})]}),e.jsx("p",{className:"text-xs text-gray-500 leading-tight",children:a?"Has indicado que no puedes atender hoy. No recibirás nuevas asignaciones por el resto del día.":"Estás disponible para recibir clases hoy según tus horarios configurados."})]})})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(U,{className:"w-5 h-5 text-gray-400"}),"Días de Disponibilidad Semanal"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:k.map(s=>{const t=l.includes(s),B=M(s);return e.jsxs("div",{className:`flex flex-col rounded-xl shadow-sm border transition-all duration-300 overflow-hidden ${t?"bg-white border-gray-200":"bg-gray-100/50 border-gray-200 grayscale opacity-70"}`,children:[e.jsxs("div",{className:"px-4 py-3 border-b flex items-center justify-between bg-gray-50/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center font-bold text-white shadow-sm text-sm",style:{backgroundColor:B},children:s.substring(0,3).toUpperCase()}),e.jsx("span",{className:"font-bold text-gray-900",children:s})]}),e.jsx(w,{checked:t,onCheckedChange:()=>D(s),className:"data-[state=checked]:bg-[#17BC91]"})]}),e.jsx("div",{className:"p-5 flex flex-col items-center justify-center text-center space-y-2",children:t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-lg font-mono font-bold text-[#073372]",children:[d," - ",n]}),e.jsx("span",{className:"text-[10px] uppercase tracking-wider font-bold text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full",children:"Disponible"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-lg font-mono font-bold text-gray-400",children:"-- : --"}),e.jsx("span",{className:"text-[10px] uppercase tracking-wider font-bold text-gray-400 bg-gray-200 px-2 py-0.5 rounded-full",children:"No Laboral"})]})})]},s)})})]})]})]})]})};export{pe as default};
